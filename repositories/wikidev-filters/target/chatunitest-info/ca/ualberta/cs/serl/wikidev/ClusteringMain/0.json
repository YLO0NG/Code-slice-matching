{
  "className": "ClusteringMain",
  "methodName": "main",
  "brief": "public static void main(String[] args){}",
  "methodSignature": "main(String[])",
  "sourceCode": "public static void main(String[] args) {\n\t\ttry {\n\t\t\tString[] args2 = {\n\t\t\t\t\t\"jdbc:mysql://hypatia.cs.ualberta.ca/wikidev_ucosp\",\n\t\t\t\t\t\"fokaefs\", \"filimon9786#7@gr\", \"2009-09-01 00:00:00\",\n\t\t\t\t\t\"2010-01-01 00:00:00\", \"1\", \"weekly\", \"-lb\", \"0.05\", \"-ub\",\n\t\t\t\t\t\"0.95\", \"-i\", \"0.05\" };\n\t\t\tInvocationParser ip = new InvocationParser();\n\t\t\tip.parseArgs(args2);\n\t\t\tString databaseName = ip.getDatabaseName();\n\t\t\tString username = ip.getUsername();\n\t\t\tString password = ip.getPassword();\n\t\t\tDataManager.openTheConnection(username, password, databaseName);\n\t\t\tString fromdate = ip.getFromdate();\n\t\t\tString todate = ip.getTodate();\n\t\t\t//String fromdate = DataManager.getTheEarlierstTimeOfActivity().toString();\n\t\t\t//String todate = DataManager.getTheLatestTimeOfActivity().toString();\n\t\t\t//String fromdate = \"2009-09-01 00:00:00\";\n\t\t\t//String todate = \"2010-01-01 00:00:00\";\n\t\t\tint project = ip.getProject();\n\t\t\tString window = ip.getWindow();\n\t\t\tdouble lowerBound = ip.getLowerBound();\n\t\t\tdouble upperBound = ip.getUpperBound();\n\t\t\tdouble interval = ip.getInterval();\n\t\t\tString week = \"week\";\n\t\t\t\n\t\t\tTimestamp firstWeek = new Timestamp(Timestamp.valueOf(fromdate).getTime()+DataManager.WEEK_INTERVAL_IN_MILLIS);\n\t\t\tTimestamp previousWeek = Timestamp.valueOf(fromdate);\n\t\t\tfor(long l=firstWeek.getTime(); l<Timestamp.valueOf(todate).getTime()+DataManager.WEEK_INTERVAL_IN_MILLIS; l+=DataManager.WEEK_INTERVAL_IN_MILLIS) {\n\t\t\t\tif(l>Timestamp.valueOf(todate).getTime()) {\n\t\t\t\t\tl = Timestamp.valueOf(todate).getTime();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tTimestamp nextWeek = new Timestamp(l);\n\t\t\t\tSystem.out.println(\"From \"+previousWeek.toString()+\" to \"+nextWeek.toString());\n\t\t\t\tArrayList<Cluster> totalClusters = new ArrayList<Cluster>();\n\t\t\t\tArrayList<IArtifact> newArtifacts = DataManager.getArtifactsBetweenDates(previousWeek.toString(), nextWeek.toString(), project);\n\t\t\t\tRelationshipMiner rm = new RelationshipMiner(newArtifacts);\n\t\t\t\trm.getRelationships();\n\t\t\t\tdouble[][] distanceMatrix = rm.getDistanceMatrix();\n\t\t\t\t//System.out.println(\"Clustering start\");\n\t\t\t\tfor (double threshold = lowerBound; threshold <= upperBound; threshold+=interval) {\n\t\t\t\t\tdouble[][] coords = new double[distanceMatrix.length][distanceMatrix.length];\n\t\t\t\t\tClustering clustering = Clustering.getInstance(0,\n\t\t\t\t\t\t\tdistanceMatrix, threshold);\n\t\t\t\t\tArrayList<Cluster> clusters = clustering\n\t\t\t\t\t\t\t.clustering(newArtifacts);\n\t\t\t\t\tif (clusters != null) {\n\t\t\t\t\t\tArrayList<Cluster> finalClusters = new ArrayList<Cluster>();\n\t\t\t\t\t\tfor (Cluster cluster : clusters) {\n\t\t\t\t\t\t\tif (cluster.getArtifacts().size() > 1) {\n\t\t\t\t\t\t\t\tif (!totalClusters.contains(cluster)) {\n\t\t\t\t\t\t\t\t\tfinalClusters.add(cluster);\n\t\t\t\t\t\t\t\t\ttotalClusters.add(cluster);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (distanceMatrix.length > 0 && !finalClusters.isEmpty()) {\n\t\t\t\t\t\t\tMultidimensionalScaling mds = new MultidimensionalScaling(\n\t\t\t\t\t\t\t\t\tdistanceMatrix);\n\t\t\t\t\t\t\tdouble[][] mdsCoords = mds.cMDS();\n\t\t\t\t\t\t\tSammonsProjection sammon = new SammonsProjection(mdsCoords, 2, 1000);\n\t\t\t\t\t\t\tsammon.CreateMapping();\n\t\t\t\t\t\t\tcoords = sammon.getProjection();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tint index = 1;\n\t\t\t\t\t\tint clustered = 0;\n\t\t\t\t\t\tfor (Cluster cluster : finalClusters) {\n\t\t\t\t\t\t\tfor(IArtifact artifact : cluster.getArtifacts()) {\n\t\t\t\t\t\t\t\tint j = newArtifacts.indexOf(artifact);\n\t\t\t\t\t\t\t\tcluster.addCoordinate(artifact, new ClusterPoint(coords[j][0], coords[j][1]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tclustered += cluster.getArtifacts().size();\n\t\t\t\t\t\t\tcluster.setUsersAndWords();\n\t\t\t\t\t\t\tcluster.setIndex(index);\n\t\t\t\t\t\t\tcluster.setFromdate(Timestamp.valueOf(fromdate));\n\t\t\t\t\t\t\tcluster.setTodate(Timestamp.valueOf(todate));\n\t\t\t\t\t\t\tcluster.setProject(project);\n\t\t\t\t\t\t\tcluster.setCluster_set_name(window);\n\t\t\t\t\t\t\tcluster.setThreshold(threshold);\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t//System.out.println(\"Writing cluster\");\n\t\t\t\t\t\t\tDataManager.writeCluster(cluster);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tDataManager.writeClusterPerProject(project,clustered, newArtifacts.size(), previousWeek.toString() ,nextWeek.toString(), window, threshold);\n\t\t\t\t\t\t//printClusters(finalClusters, week+threshold);\n\t\t\t\t\t}\n\t\t\t\t\t//System.out.println(\"Clustering end\");\n\t\t\t\t\t//rm.printResults(project);\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t//System.out.println(\"Finish!!!!\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tSystem.out.println(\"Success!!!\");\n\t\t\t\tpreviousWeek = nextWeek;\n\t\t\t}\n\t\t\tDataManager.closeTheConnection();\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t}",
  "useField": true,
  "isConstructor": false,
  "isGetSet": false,
  "isPublic": true,
  "isBoolean": false,
  "isAbstract": false,
  "parameters": [
    "String[]"
  ],
  "dependentMethods": {
    "java.lang.String": [],
    "ca.ualberta.cs.serl.wikidev.InvocationParser": [
      "getUpperBound()",
      "getProject()",
      "getPassword()",
      "getLowerBound()",
      "getUsername()",
      "getInterval()",
      "getFromdate()",
      "getTodate()",
      "getWindow()",
      "parseArgs(String[])",
      "getDatabaseName()"
    ],
    "ca.ualberta.cs.serl.wikidev.DataManager": [
      "getArtifactsBetweenDates(String, String, int)",
      "closeTheConnection()",
      "writeCluster(Cluster)",
      "writeClusterPerProject(int, int, int, String, String, String, double)",
      "openTheConnection(String, String, String)"
    ],
    "java.sql.Timestamp": [
      "valueOf(String)",
      "toString()",
      "getTime()"
    ],
    "java.io.PrintStream": [
      "println(String)"
    ],
    "ca.ualberta.cs.serl.wikidev.RelationshipMiner": [
      "getDistanceMatrix()",
      "getRelationships()"
    ],
    "ca.ualberta.cs.serl.wikidev.clustering.Clustering": [
      "getInstance(int, double[][], double)",
      "clustering(IArtifact>)"
    ],
    "java.util.ArrayList": [
      "isEmpty()",
      "indexOf(Object)",
      "contains(Object)",
      "add(E)",
      "size()"
    ],
    "ca.ualberta.cs.serl.wikidev.clustering.Cluster": [
      "setTodate(Timestamp)",
      "setThreshold(double)",
      "setUsersAndWords()",
      "setIndex(int)",
      "getArtifacts()",
      "setCluster_set_name(String)",
      "setProject(int)",
      "addCoordinate(IArtifact, ClusterPoint)",
      "setFromdate(Timestamp)"
    ],
    "ca.ualberta.cs.serl.wikidev.clustering.MultidimensionalScaling": [
      "cMDS()"
    ],
    "ca.ualberta.cs.serl.wikidev.clustering.SammonsProjection": [
      "CreateMapping()",
      "getProjection()"
    ],
    "java.lang.Throwable": [
      "printStackTrace()"
    ]
  },
  "full_method_info": "/**\n * @param args\n */\npublic static void main(String[] args) {\n    try {\n        String[] args2 = { \"jdbc:mysql://hypatia.cs.ualberta.ca/wikidev_ucosp\", \"fokaefs\", \"filimon9786#7@gr\", \"2009-09-01 00:00:00\", \"2010-01-01 00:00:00\", \"1\", \"weekly\", \"-lb\", \"0.05\", \"-ub\", \"0.95\", \"-i\", \"0.05\" };\n        InvocationParser ip = new InvocationParser();\n        ip.parseArgs(args2);\n        String databaseName = ip.getDatabaseName();\n        String username = ip.getUsername();\n        String password = ip.getPassword();\n        DataManager.openTheConnection(username, password, databaseName);\n        String fromdate = ip.getFromdate();\n        String todate = ip.getTodate();\n        // String fromdate = DataManager.getTheEarlierstTimeOfActivity().toString();\n        // String todate = DataManager.getTheLatestTimeOfActivity().toString();\n        // String fromdate = \"2009-09-01 00:00:00\";\n        // String todate = \"2010-01-01 00:00:00\";\n        int project = ip.getProject();\n        String window = ip.getWindow();\n        double lowerBound = ip.getLowerBound();\n        double upperBound = ip.getUpperBound();\n        double interval = ip.getInterval();\n        String week = \"week\";\n        Timestamp firstWeek = new Timestamp(Timestamp.valueOf(fromdate).getTime() + DataManager.WEEK_INTERVAL_IN_MILLIS);\n        Timestamp previousWeek = Timestamp.valueOf(fromdate);\n        for (long l = firstWeek.getTime(); l < Timestamp.valueOf(todate).getTime() + DataManager.WEEK_INTERVAL_IN_MILLIS; l += DataManager.WEEK_INTERVAL_IN_MILLIS) {\n            if (l > Timestamp.valueOf(todate).getTime()) {\n                l = Timestamp.valueOf(todate).getTime();\n            }\n            Timestamp nextWeek = new Timestamp(l);\n            System.out.println(\"From \" + previousWeek.toString() + \" to \" + nextWeek.toString());\n            ArrayList<Cluster> totalClusters = new ArrayList<Cluster>();\n            ArrayList<IArtifact> newArtifacts = DataManager.getArtifactsBetweenDates(previousWeek.toString(), nextWeek.toString(), project);\n            RelationshipMiner rm = new RelationshipMiner(newArtifacts);\n            rm.getRelationships();\n            double[][] distanceMatrix = rm.getDistanceMatrix();\n            // System.out.println(\"Clustering start\");\n            for (double threshold = lowerBound; threshold <= upperBound; threshold += interval) {\n                double[][] coords = new double[distanceMatrix.length][distanceMatrix.length];\n                Clustering clustering = Clustering.getInstance(0, distanceMatrix, threshold);\n                ArrayList<Cluster> clusters = clustering.clustering(newArtifacts);\n                if (clusters != null) {\n                    ArrayList<Cluster> finalClusters = new ArrayList<Cluster>();\n                    for (Cluster cluster : clusters) {\n                        if (cluster.getArtifacts().size() > 1) {\n                            if (!totalClusters.contains(cluster)) {\n                                finalClusters.add(cluster);\n                                totalClusters.add(cluster);\n                            }\n                        }\n                    }\n                    if (distanceMatrix.length > 0 && !finalClusters.isEmpty()) {\n                        MultidimensionalScaling mds = new MultidimensionalScaling(distanceMatrix);\n                        double[][] mdsCoords = mds.cMDS();\n                        SammonsProjection sammon = new SammonsProjection(mdsCoords, 2, 1000);\n                        sammon.CreateMapping();\n                        coords = sammon.getProjection();\n                    }\n                    int index = 1;\n                    int clustered = 0;\n                    for (Cluster cluster : finalClusters) {\n                        for (IArtifact artifact : cluster.getArtifacts()) {\n                            int j = newArtifacts.indexOf(artifact);\n                            cluster.addCoordinate(artifact, new ClusterPoint(coords[j][0], coords[j][1]));\n                        }\n                        clustered += cluster.getArtifacts().size();\n                        cluster.setUsersAndWords();\n                        cluster.setIndex(index);\n                        cluster.setFromdate(Timestamp.valueOf(fromdate));\n                        cluster.setTodate(Timestamp.valueOf(todate));\n                        cluster.setProject(project);\n                        cluster.setCluster_set_name(window);\n                        cluster.setThreshold(threshold);\n                        index++;\n                        // System.out.println(\"Writing cluster\");\n                        DataManager.writeCluster(cluster);\n                    }\n                    DataManager.writeClusterPerProject(project, clustered, newArtifacts.size(), previousWeek.toString(), nextWeek.toString(), window, threshold);\n                    // printClusters(finalClusters, week+threshold);\n                }\n                // System.out.println(\"Clustering end\");\n                // rm.printResults(project);\n                // System.out.println(\"Finish!!!!\");\n            }\n            System.out.println(\"Success!!!\");\n            previousWeek = nextWeek;\n        }\n        DataManager.closeTheConnection();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}",
  "method_comment": "\n\t * @param args\n\t ",
  "method_annotation": ""
}