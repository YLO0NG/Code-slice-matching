{
  "fullClassName": "ca.ualberta.cs.serl.wikidev.TextParser",
  "className": "TextParser",
  "index": 43,
  "modifier": "[public ]",
  "extend": "[]",
  "implement": "[]",
  "packageName": "ca.ualberta.cs.serl.wikidev",
  "packageDeclaration": "package ca.ualberta.cs.serl.wikidev;",
  "classSignature": "public class TextParser",
  "hasConstructor": true,
  "isPublic": true,
  "isInterface": false,
  "isAbstract": false,
  "imports": [
    "import java.io.BufferedReader;",
    "import java.io.File;",
    "import java.io.FileNotFoundException;",
    "import java.io.IOException;",
    "import java.io.InputStreamReader;",
    "import java.util.ArrayList;",
    "import java.util.HashMap;",
    "import java.util.Set;",
    "import java.util.TreeMap;"
  ],
  "fields": [
    "private ArrayList<URL> urls;",
    "private ArrayList<String> keywords;",
    "private ArrayList<String> words;",
    "private HashMap<String, Integer> frequencies;",
    "private boolean punctuation;",
    "private TreeMap<String, Double> tfidf;",
    "private ArrayList<Document> documents;"
  ],
  "superClasses": [],
  "implementedTypes": [],
  "methodSigs": {
    "getKeywords()": "0",
    "setKeywords(ArrayList)": "1",
    "getTfidf()": "2",
    "setTfidf(TreeMap)": "3",
    "calculateTFIDF()": "4",
    "setFrequencies()": "5",
    "getUrls()": "6",
    "getWords()": "7",
    "getFrequencies()": "8",
    "parseFile(File)": "9",
    "parseTextInWords(String)": "10",
    "removeRareTerms()": "11",
    "stem()": "12",
    "separateURLandWords()": "13",
    "removeEveryPunctuation()": "14",
    "removePunctuation(String)": "15",
    "removeChar(String, char)": "16",
    "parseURL(String)": "17",
    "applyStoplist()": "18",
    "TextParser(ArrayList)": "19",
    "TextParser()": "20"
  },
  "methodsBrief": [
    "public ArrayList<String> getKeywords(){}",
    "public void setKeywords(ArrayList<String> keywords){}",
    "public TreeMap<String, Double> getTfidf(){}",
    "public void setTfidf(TreeMap<String, Double> tfidf){}",
    "public TreeMap<String, Double> calculateTFIDF(){}",
    "public void setFrequencies(){}",
    "public ArrayList<URL> getUrls(){}",
    "public Set<String> getWords(){}",
    "public HashMap<String, Integer> getFrequencies(){}",
    "public void parseFile(File file){}",
    "public void parseTextInWords(String text){}",
    "private HashMap<String, Integer> removeRareTerms(){}",
    "private ArrayList<String> stem(){}",
    "private void separateURLandWords(){}",
    "private void removeEveryPunctuation(){}",
    "private String removePunctuation(String word){}",
    "private String removeChar(String s, char c){}",
    "public void parseURL(String text){}",
    "private ArrayList<String> applyStoplist(){}",
    "public TextParser(ArrayList<Document> documents){}",
    "public TextParser(){}"
  ],
  "constructorSigs": [
    "TextParser(ArrayList)",
    "TextParser()"
  ],
  "constructorBrief": [
    "public TextParser(ArrayList<Document> documents){}",
    "public TextParser(){}"
  ],
  "getterSetterSigs": [
    "getKeywords()",
    "setKeywords(ArrayList)",
    "getTfidf()",
    "setTfidf(TreeMap)",
    "setFrequencies()",
    "getUrls()",
    "getWords()",
    "getFrequencies()"
  ],
  "getterSetterBrief": [
    "public ArrayList<String> getKeywords(){}",
    "public void setKeywords(ArrayList<String> keywords){}",
    "public TreeMap<String, Double> getTfidf(){}",
    "public void setTfidf(TreeMap<String, Double> tfidf){}",
    "public void setFrequencies(){}",
    "public ArrayList<URL> getUrls(){}",
    "public Set<String> getWords(){}",
    "public HashMap<String, Integer> getFrequencies(){}"
  ],
  "constructorDeps": {},
  "compilationUnitCode": "package ca.ualberta.cs.serl.wikidev;\n\nimport java.io.BufferedReader;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Set;\nimport java.util.TreeMap;\n\n/**\n * @author   User\n */\npublic class TextParser {\n\n    /**\n     * @uml.property  name=\"urls\"\n     * @uml.associationEnd  multiplicity=\"(0 -1)\" elementType=\"ca.ualberta.cs.serl.wikidev.URL\"\n     */\n    private ArrayList<URL> urls;\n\n    /**\n     * @uml.property  name=\"keywords\"\n     */\n    private ArrayList<String> keywords;\n\n    /**\n     * @uml.property  name=\"words\"\n     * @uml.associationEnd  multiplicity=\"(0 -1)\" elementType=\"java.lang.String\"\n     */\n    private ArrayList<String> words;\n\n    /**\n     * @uml.property  name=\"frequencies\"\n     * @uml.associationEnd  qualifier=\"word:java.lang.String java.lang.Integer\"\n     */\n    private HashMap<String, Integer> frequencies;\n\n    /**\n     * @uml.property  name=\"punctuation\"\n     */\n    private boolean punctuation;\n\n    /**\n     * @uml.property  name=\"tfidf\"\n     */\n    private TreeMap<String, Double> tfidf;\n\n    /**\n     * @uml.property  name=\"documents\"\n     */\n    private ArrayList<Document> documents;\n\n    public TextParser(ArrayList<Document> documents) {\n        this.urls = new ArrayList<URL>();\n        this.keywords = new ArrayList<String>();\n        this.words = new ArrayList<String>();\n        this.frequencies = new HashMap<String, Integer>();\n        this.tfidf = new TreeMap<String, Double>();\n        this.documents = documents;\n    }\n\n    public TextParser() {\n        this.urls = new ArrayList<URL>();\n        this.keywords = new ArrayList<String>();\n        this.words = new ArrayList<String>();\n        this.frequencies = new HashMap<String, Integer>();\n        this.tfidf = new TreeMap<String, Double>();\n    }\n\n    public ArrayList<String> getKeywords() {\n        return keywords;\n    }\n\n    public void setKeywords(ArrayList<String> keywords) {\n        this.keywords = keywords;\n    }\n\n    public TreeMap<String, Double> getTfidf() {\n        return tfidf;\n    }\n\n    public void setTfidf(TreeMap<String, Double> tfidf) {\n        this.tfidf = tfidf;\n    }\n\n    public TreeMap<String, Double> calculateTFIDF() {\n        TreeMap<String, Double> tfidf = new TreeMap<String, Double>();\n        double numberOfDocuments = 0.0;\n        double idf = 0.0;\n        for (String word : frequencies.keySet()) {\n            for (Document document : documents) {\n                if (document.contains(word)) {\n                    numberOfDocuments++;\n                }\n            }\n            idf = Math.log(1 + documents.size() / numberOfDocuments);\n            tfidf.put(word, Math.log(1 + frequencies.get(word)) * idf);\n            numberOfDocuments = 0.0;\n        }\n        return tfidf;\n    }\n\n    public void setFrequencies() {\n        for (String word : words) {\n            if (frequencies.containsKey(word)) {\n                frequencies.put(word, (frequencies.get(word) + 1));\n            } else {\n                frequencies.put(word, 1);\n            }\n        }\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"urls\"\n     */\n    public ArrayList<URL> getUrls() {\n        return urls;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"words\"\n     */\n    public Set<String> getWords() {\n        return frequencies.keySet();\n    }\n\n    public HashMap<String, Integer> getFrequencies() {\n        return frequencies;\n    }\n\n    public void parseFile(File file) {\n    }\n\n    public void parseTextInWords(String text) {\n        int index = 0;\n        String word = \"\";\n        while (index < text.length()) {\n            if (text.charAt(index) == ' ') {\n                word = text.substring(0, index);\n                text = text.substring(index + 1);\n                words.add(word);\n                index = 0;\n            } else {\n                if (!text.contains(\" \")) {\n                    words.add(text);\n                    break;\n                }\n                index++;\n            }\n        }\n        separateURLandWords();\n        removeEveryPunctuation();\n        words = applyStoplist();\n        words = stem();\n        setFrequencies();\n        frequencies = removeRareTerms();\n        // tfidf = calculateTFIDF();\n    }\n\n    private HashMap<String, Integer> removeRareTerms() {\n        ArrayList<String> rareTerms = new ArrayList<String>();\n        double avg = 0.0;\n        for (String word : frequencies.keySet()) {\n            avg += frequencies.get(word);\n        }\n        int size = frequencies.size();\n        if (size > 0) {\n            avg /= size;\n        }\n        for (String word : frequencies.keySet()) {\n            if (!word.matches(\"[a-z]+\")) {\n                rareTerms.add(word);\n            }\n        }\n        for (String word : rareTerms) {\n            frequencies.remove(word);\n        }\n        return frequencies;\n    }\n\n    private ArrayList<String> stem() {\n        Stemmer stemmer = new Stemmer();\n        ArrayList<String> stemmedWords = new ArrayList<String>();\n        for (String word : words) {\n            stemmer.add(word.toCharArray(), word.length());\n            stemmer.stem();\n            stemmedWords.add(stemmer.toString());\n        }\n        return stemmedWords;\n    }\n\n    private void separateURLandWords() {\n        ArrayList<String> wordsToBeRemoved = new ArrayList<String>();\n        for (String word : words) {\n            if (word.startsWith(\"http\") || word.startsWith(\"file:///\")) {\n                parseURL(word);\n                wordsToBeRemoved.add(word);\n            }\n        }\n        for (String word : wordsToBeRemoved) {\n            words.remove(word);\n        }\n    }\n\n    private void removeEveryPunctuation() {\n        ArrayList<String> newWords = new ArrayList<String>();\n        String newWord = \"\";\n        for (String word : words) {\n            newWord = word;\n            newWord = removePunctuation(newWord);\n            while (punctuation) {\n                newWord = removePunctuation(newWord);\n            }\n            newWords.add(newWord);\n        }\n        words.clear();\n        words.addAll(newWords);\n        /*for(int i=0; i<urls.size(); i++) {\n\t\t\tURL newUrl = urls.get(i);\n\t\t\tnewUrl.setUrl(removePunctuation(urls.get(i).getUrl()));\n\t\t\turls.set(i, newUrl);\n\t\t}*/\n    }\n\n    private String removePunctuation(String word) {\n        punctuation = false;\n        if (word.startsWith(\".\") || word.endsWith(\".\")) {\n            word = removeChar(word, '.');\n            punctuation = true;\n        }\n        if (word.startsWith(\",\") || word.endsWith(\",\")) {\n            word = removeChar(word, ',');\n            punctuation = true;\n        }\n        if (word.startsWith(\"?\") || word.endsWith(\"?\")) {\n            word = removeChar(word, '?');\n            punctuation = true;\n        }\n        if (word.startsWith(\"!\") || word.endsWith(\"!\")) {\n            word = removeChar(word, '!');\n            punctuation = true;\n        }\n        if (word.startsWith(\"\\\"\") || word.endsWith(\"\\\"\")) {\n            word = removeChar(word, '\\\"');\n            punctuation = true;\n        }\n        if (word.startsWith(\"\\'\") || word.endsWith(\"\\'\")) {\n            word = removeChar(word, '\\'');\n            punctuation = true;\n        }\n        if (word.startsWith(\"(\") || word.endsWith(\"(\")) {\n            word = removeChar(word, '(');\n            punctuation = true;\n        }\n        if (word.startsWith(\")\") || word.endsWith(\")\")) {\n            word = removeChar(word, ')');\n            punctuation = true;\n        }\n        if (word.startsWith(\"{\") || word.endsWith(\"{\")) {\n            word = removeChar(word, '{');\n            punctuation = true;\n        }\n        if (word.startsWith(\"}\") || word.endsWith(\"}\")) {\n            word = removeChar(word, '}');\n            punctuation = true;\n        }\n        if (word.startsWith(\"[\") || word.endsWith(\"[\")) {\n            word = removeChar(word, '[');\n            punctuation = true;\n        }\n        if (word.startsWith(\"]\") || word.endsWith(\"]\")) {\n            word = removeChar(word, ']');\n            punctuation = true;\n        }\n        if (word.startsWith(\"*\") || word.endsWith(\"*\")) {\n            word = removeChar(word, '*');\n            punctuation = true;\n        }\n        if (word.startsWith(\"#\") || word.endsWith(\"#\")) {\n            word = removeChar(word, '#');\n            punctuation = true;\n        }\n        if (word.startsWith(\"-\") || word.endsWith(\"-\")) {\n            word = removeChar(word, '-');\n            punctuation = true;\n        }\n        if (word.startsWith(\"_\") || word.endsWith(\"_\")) {\n            word = removeChar(word, '_');\n            punctuation = true;\n        }\n        if (word.startsWith(\"<\") || word.endsWith(\"<\")) {\n            word = removeChar(word, '<');\n            punctuation = true;\n        }\n        if (word.startsWith(\">\") || word.endsWith(\">\")) {\n            word = removeChar(word, '>');\n            punctuation = true;\n        }\n        if (word.startsWith(\"=\") || word.endsWith(\"=\")) {\n            word = removeChar(word, '=');\n            punctuation = true;\n        }\n        if (word.startsWith(\"~\") || word.endsWith(\"~\")) {\n            word = removeChar(word, '~');\n            punctuation = true;\n        }\n        if (word.startsWith(\":\") || word.endsWith(\":\")) {\n            word = removeChar(word, ':');\n            punctuation = true;\n        }\n        if (word.startsWith(\"\\\\\") || word.endsWith(\"\\\\\")) {\n            word = removeChar(word, '\\\\');\n            punctuation = true;\n        }\n        if (word.startsWith(\"/\") || word.endsWith(\"/\")) {\n            word = removeChar(word, '/');\n            punctuation = true;\n        }\n        if (word.startsWith(\"�\") || word.endsWith(\"�\")) {\n            word = removeChar(word, '�');\n            punctuation = true;\n        }\n        return word;\n    }\n\n    /*private String removePunctuation(String word) {\n\t\tif(word.contains(\".\")) {\n\t\t\tword = removeChar(word, '.');\n\t\t}\n\t\tif(word.contains(\",\")) {\n\t\t\tword = removeChar(word, ',');\t\t}\n\t\tif(word.contains(\"?\")) {\n\t\t\tword = removeChar(word, '?');\n\t\t}\n\t\tif(word.contains(\"!\")) {\n\t\t\tword = removeChar(word, '!');\n\t\t}\n\t\tif(word.contains(\"\\\"\")) {\n\t\t\tword = removeChar(word, '\\\"');\n\t\t}\n\t\tif(word.contains(\"\\'\")) {\n\t\t\tword = removeChar(word, '\\'');\n\t\t}\n\t\tif(word.contains(\"(\")) {\n\t\t\tword = removeChar(word, '(');\n\t\t}\n\t\tif(word.contains(\")\")) {\n\t\t\tword = removeChar(word, ')');\n\t\t}\n\t\tif(word.contains(\"{\")) {\n\t\t\tword = removeChar(word, '{');\n\t\t}\n\t\tif(word.contains(\"}\")) {\n\t\t\tword = removeChar(word, '}');\n\t\t}\n\t\tif(word.contains(\"[\")) {\n\t\t\tword = removeChar(word, '[');\n\t\t}\n\t\tif(word.contains(\"]\")) {\n\t\t\tword = removeChar(word, ']');\n\t\t}\n\t\tif(word.contains(\"*\")) {\n\t\t\tword = removeChar(word, '*');\n\t\t}\n\t\tif(word.contains(\"#\")) {\n\t\t\tword = removeChar(word, '#');\n\t\t}\n\t\tif(word.contains(\"-\")) {\n\t\t\tword = removeChar(word, '-');\n\t\t}\n\t\tif(word.contains(\"_\")) {\n\t\t\tword = removeChar(word, '_');\n\t\t}\n\t\treturn word;\n\t}*/\n    private String removeChar(String s, char c) {\n        String r = \"\";\n        for (int i = 0; i < s.length(); i++) {\n            if (s.charAt(i) != c)\n                r += s.charAt(i);\n        }\n        return r;\n    }\n\n    public void parseURL(String text) {\n        URL newURL = new URL();\n        newURL.setUrl(text);\n        if (text.startsWith(\"http://\")) {\n            text = text.substring(7);\n        } else if (text.startsWith(\"https://\") || text.startsWith(\"file:///\")) {\n            text = text.substring(8);\n        }\n        int indexOfNextSlash = text.indexOf(\"/\");\n        if (indexOfNextSlash != -1) {\n            newURL.setHost(text.substring(0, indexOfNextSlash));\n            text = text.substring(indexOfNextSlash + 1);\n            indexOfNextSlash = text.indexOf(\"/\");\n            if (indexOfNextSlash != -1) {\n                if (text.substring(0, indexOfNextSlash).contains(\".\")) {\n                    text = text.substring(indexOfNextSlash + 1);\n                    indexOfNextSlash = text.indexOf(\"/\");\n                }\n                if (indexOfNextSlash != -1) {\n                    if (text.substring(0, indexOfNextSlash).equals(\"drproject\")) {\n                        indexOfNextSlash = text.indexOf(\"/\");\n                        text = text.substring(indexOfNextSlash + 1);\n                        indexOfNextSlash = text.indexOf(\"/\");\n                        newURL.setProjectName(text.substring(0, indexOfNextSlash));\n                        text = text.substring(indexOfNextSlash + 1);\n                        indexOfNextSlash = text.indexOf(\"/\");\n                        if (indexOfNextSlash != -1) {\n                            newURL.setEntityType(Dictionary.getDataBaseTable(text.substring(0, indexOfNextSlash)));\n                        } else {\n                            newURL.setEntityType(Dictionary.getDataBaseTable(text));\n                        }\n                    } else if (text.substring(0, indexOfNextSlash).equals(\"svn\")) {\n                        newURL.setEntityType(Dictionary.getDataBaseTable(text.substring(0, indexOfNextSlash)));\n                        text = text.substring(indexOfNextSlash + 1);\n                        indexOfNextSlash = text.indexOf(\"/\");\n                        if (indexOfNextSlash != -1) {\n                            newURL.setProjectName(text.substring(0, indexOfNextSlash));\n                        } else {\n                            newURL.setProjectName(text);\n                        }\n                    } else {\n                        newURL.setProjectName(text.substring(0, indexOfNextSlash));\n                        text = text.substring(indexOfNextSlash + 1);\n                        indexOfNextSlash = text.indexOf(\"/\");\n                        if (indexOfNextSlash != -1) {\n                            newURL.setEntityType(Dictionary.getDataBaseTable(text.substring(0, indexOfNextSlash)));\n                        } else {\n                            newURL.setEntityType(Dictionary.getDataBaseTable(text));\n                        }\n                    }\n                }\n            }\n        } else {\n            newURL.setHost(text);\n        }\n        if (newURL.getUrl().contains(\"src\")) {\n            newURL.setEntityType(Dictionary.getDataBaseTable(\"src\"));\n        }\n        this.urls.add(newURL);\n    }\n\n    private ArrayList<String> applyStoplist() {\n        ArrayList<String> newWords = new ArrayList<String>();\n        boolean found = false;\n        try {\n            for (String word : words) {\n                // BufferedReader in = new BufferedReader(new FileReader(\"ca/ualberta/cs/serl/wikidev/files/glasgowstoplist.txt\"));\n                BufferedReader in = new BufferedReader(new InputStreamReader(TextParser.class.getResourceAsStream(\"files/glasgowstoplist.txt\")));\n                String next = in.readLine();\n                while (next != null) {\n                    if (word.equalsIgnoreCase(next)) {\n                        found = true;\n                    }\n                    next = in.readLine();\n                }\n                in.close();\n                if (found) {\n                    newWords.add(word);\n                }\n                found = false;\n            }\n            words.removeAll(newWords);\n            /*found = false;\n\t\t\tfor(String newWord : newWords) {\n\t\t\t\tfor(String word : words) {\n\t\t\t\t\tif(word.equals(newWord)) {\n\t\t\t\t\t\tfound=true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\twords.remove(newWord);\n\t\t\t}*/\n        } catch (FileNotFoundException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        return words;\n    }\n    /*public String listOfWords(String text) {\n\t\tString result=\"\";\n\t\tTaporwareServices ts = new TaporwareServicesLocator();\n\t\ttry {\n\t\t\tTaporwareService_xml_bindingStub tapor = (TaporwareService_xml_bindingStub)ts.getTaporwareService_xml();\n\t\t\tresult = tapor.list_Words_Plain(text, \"stop\", \"glasgow\", \"2\", \"tab\");\n\t\t} catch (ServiceException e) {\n\t\t\t// TODO Auto-generated catch block\n\t\t\te.printStackTrace();\n\t\t} catch (RemoteException e) {\n\t\t\t// TODO Auto-generated catch block\n\t\t\te.printStackTrace();\n\t\t}\n\t\treturn result;\n\t}*/\n}\n",
  "classDeclarationCode": "/**\n * @author   User\n */\npublic class TextParser {\n\n    /**\n     * @uml.property  name=\"urls\"\n     * @uml.associationEnd  multiplicity=\"(0 -1)\" elementType=\"ca.ualberta.cs.serl.wikidev.URL\"\n     */\n    private ArrayList<URL> urls;\n\n    /**\n     * @uml.property  name=\"keywords\"\n     */\n    private ArrayList<String> keywords;\n\n    /**\n     * @uml.property  name=\"words\"\n     * @uml.associationEnd  multiplicity=\"(0 -1)\" elementType=\"java.lang.String\"\n     */\n    private ArrayList<String> words;\n\n    /**\n     * @uml.property  name=\"frequencies\"\n     * @uml.associationEnd  qualifier=\"word:java.lang.String java.lang.Integer\"\n     */\n    private HashMap<String, Integer> frequencies;\n\n    /**\n     * @uml.property  name=\"punctuation\"\n     */\n    private boolean punctuation;\n\n    /**\n     * @uml.property  name=\"tfidf\"\n     */\n    private TreeMap<String, Double> tfidf;\n\n    /**\n     * @uml.property  name=\"documents\"\n     */\n    private ArrayList<Document> documents;\n\n    public TextParser(ArrayList<Document> documents) {\n        this.urls = new ArrayList<URL>();\n        this.keywords = new ArrayList<String>();\n        this.words = new ArrayList<String>();\n        this.frequencies = new HashMap<String, Integer>();\n        this.tfidf = new TreeMap<String, Double>();\n        this.documents = documents;\n    }\n\n    public TextParser() {\n        this.urls = new ArrayList<URL>();\n        this.keywords = new ArrayList<String>();\n        this.words = new ArrayList<String>();\n        this.frequencies = new HashMap<String, Integer>();\n        this.tfidf = new TreeMap<String, Double>();\n    }\n\n    public ArrayList<String> getKeywords() {\n        return keywords;\n    }\n\n    public void setKeywords(ArrayList<String> keywords) {\n        this.keywords = keywords;\n    }\n\n    public TreeMap<String, Double> getTfidf() {\n        return tfidf;\n    }\n\n    public void setTfidf(TreeMap<String, Double> tfidf) {\n        this.tfidf = tfidf;\n    }\n\n    public TreeMap<String, Double> calculateTFIDF() {\n        TreeMap<String, Double> tfidf = new TreeMap<String, Double>();\n        double numberOfDocuments = 0.0;\n        double idf = 0.0;\n        for (String word : frequencies.keySet()) {\n            for (Document document : documents) {\n                if (document.contains(word)) {\n                    numberOfDocuments++;\n                }\n            }\n            idf = Math.log(1 + documents.size() / numberOfDocuments);\n            tfidf.put(word, Math.log(1 + frequencies.get(word)) * idf);\n            numberOfDocuments = 0.0;\n        }\n        return tfidf;\n    }\n\n    public void setFrequencies() {\n        for (String word : words) {\n            if (frequencies.containsKey(word)) {\n                frequencies.put(word, (frequencies.get(word) + 1));\n            } else {\n                frequencies.put(word, 1);\n            }\n        }\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"urls\"\n     */\n    public ArrayList<URL> getUrls() {\n        return urls;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"words\"\n     */\n    public Set<String> getWords() {\n        return frequencies.keySet();\n    }\n\n    public HashMap<String, Integer> getFrequencies() {\n        return frequencies;\n    }\n\n    public void parseFile(File file) {\n    }\n\n    public void parseTextInWords(String text) {\n        int index = 0;\n        String word = \"\";\n        while (index < text.length()) {\n            if (text.charAt(index) == ' ') {\n                word = text.substring(0, index);\n                text = text.substring(index + 1);\n                words.add(word);\n                index = 0;\n            } else {\n                if (!text.contains(\" \")) {\n                    words.add(text);\n                    break;\n                }\n                index++;\n            }\n        }\n        separateURLandWords();\n        removeEveryPunctuation();\n        words = applyStoplist();\n        words = stem();\n        setFrequencies();\n        frequencies = removeRareTerms();\n        // tfidf = calculateTFIDF();\n    }\n\n    private HashMap<String, Integer> removeRareTerms() {\n        ArrayList<String> rareTerms = new ArrayList<String>();\n        double avg = 0.0;\n        for (String word : frequencies.keySet()) {\n            avg += frequencies.get(word);\n        }\n        int size = frequencies.size();\n        if (size > 0) {\n            avg /= size;\n        }\n        for (String word : frequencies.keySet()) {\n            if (!word.matches(\"[a-z]+\")) {\n                rareTerms.add(word);\n            }\n        }\n        for (String word : rareTerms) {\n            frequencies.remove(word);\n        }\n        return frequencies;\n    }\n\n    private ArrayList<String> stem() {\n        Stemmer stemmer = new Stemmer();\n        ArrayList<String> stemmedWords = new ArrayList<String>();\n        for (String word : words) {\n            stemmer.add(word.toCharArray(), word.length());\n            stemmer.stem();\n            stemmedWords.add(stemmer.toString());\n        }\n        return stemmedWords;\n    }\n\n    private void separateURLandWords() {\n        ArrayList<String> wordsToBeRemoved = new ArrayList<String>();\n        for (String word : words) {\n            if (word.startsWith(\"http\") || word.startsWith(\"file:///\")) {\n                parseURL(word);\n                wordsToBeRemoved.add(word);\n            }\n        }\n        for (String word : wordsToBeRemoved) {\n            words.remove(word);\n        }\n    }\n\n    private void removeEveryPunctuation() {\n        ArrayList<String> newWords = new ArrayList<String>();\n        String newWord = \"\";\n        for (String word : words) {\n            newWord = word;\n            newWord = removePunctuation(newWord);\n            while (punctuation) {\n                newWord = removePunctuation(newWord);\n            }\n            newWords.add(newWord);\n        }\n        words.clear();\n        words.addAll(newWords);\n        /*for(int i=0; i<urls.size(); i++) {\n\t\t\tURL newUrl = urls.get(i);\n\t\t\tnewUrl.setUrl(removePunctuation(urls.get(i).getUrl()));\n\t\t\turls.set(i, newUrl);\n\t\t}*/\n    }\n\n    private String removePunctuation(String word) {\n        punctuation = false;\n        if (word.startsWith(\".\") || word.endsWith(\".\")) {\n            word = removeChar(word, '.');\n            punctuation = true;\n        }\n        if (word.startsWith(\",\") || word.endsWith(\",\")) {\n            word = removeChar(word, ',');\n            punctuation = true;\n        }\n        if (word.startsWith(\"?\") || word.endsWith(\"?\")) {\n            word = removeChar(word, '?');\n            punctuation = true;\n        }\n        if (word.startsWith(\"!\") || word.endsWith(\"!\")) {\n            word = removeChar(word, '!');\n            punctuation = true;\n        }\n        if (word.startsWith(\"\\\"\") || word.endsWith(\"\\\"\")) {\n            word = removeChar(word, '\\\"');\n            punctuation = true;\n        }\n        if (word.startsWith(\"\\'\") || word.endsWith(\"\\'\")) {\n            word = removeChar(word, '\\'');\n            punctuation = true;\n        }\n        if (word.startsWith(\"(\") || word.endsWith(\"(\")) {\n            word = removeChar(word, '(');\n            punctuation = true;\n        }\n        if (word.startsWith(\")\") || word.endsWith(\")\")) {\n            word = removeChar(word, ')');\n            punctuation = true;\n        }\n        if (word.startsWith(\"{\") || word.endsWith(\"{\")) {\n            word = removeChar(word, '{');\n            punctuation = true;\n        }\n        if (word.startsWith(\"}\") || word.endsWith(\"}\")) {\n            word = removeChar(word, '}');\n            punctuation = true;\n        }\n        if (word.startsWith(\"[\") || word.endsWith(\"[\")) {\n            word = removeChar(word, '[');\n            punctuation = true;\n        }\n        if (word.startsWith(\"]\") || word.endsWith(\"]\")) {\n            word = removeChar(word, ']');\n            punctuation = true;\n        }\n        if (word.startsWith(\"*\") || word.endsWith(\"*\")) {\n            word = removeChar(word, '*');\n            punctuation = true;\n        }\n        if (word.startsWith(\"#\") || word.endsWith(\"#\")) {\n            word = removeChar(word, '#');\n            punctuation = true;\n        }\n        if (word.startsWith(\"-\") || word.endsWith(\"-\")) {\n            word = removeChar(word, '-');\n            punctuation = true;\n        }\n        if (word.startsWith(\"_\") || word.endsWith(\"_\")) {\n            word = removeChar(word, '_');\n            punctuation = true;\n        }\n        if (word.startsWith(\"<\") || word.endsWith(\"<\")) {\n            word = removeChar(word, '<');\n            punctuation = true;\n        }\n        if (word.startsWith(\">\") || word.endsWith(\">\")) {\n            word = removeChar(word, '>');\n            punctuation = true;\n        }\n        if (word.startsWith(\"=\") || word.endsWith(\"=\")) {\n            word = removeChar(word, '=');\n            punctuation = true;\n        }\n        if (word.startsWith(\"~\") || word.endsWith(\"~\")) {\n            word = removeChar(word, '~');\n            punctuation = true;\n        }\n        if (word.startsWith(\":\") || word.endsWith(\":\")) {\n            word = removeChar(word, ':');\n            punctuation = true;\n        }\n        if (word.startsWith(\"\\\\\") || word.endsWith(\"\\\\\")) {\n            word = removeChar(word, '\\\\');\n            punctuation = true;\n        }\n        if (word.startsWith(\"/\") || word.endsWith(\"/\")) {\n            word = removeChar(word, '/');\n            punctuation = true;\n        }\n        if (word.startsWith(\"�\") || word.endsWith(\"�\")) {\n            word = removeChar(word, '�');\n            punctuation = true;\n        }\n        return word;\n    }\n\n    /*private String removePunctuation(String word) {\n\t\tif(word.contains(\".\")) {\n\t\t\tword = removeChar(word, '.');\n\t\t}\n\t\tif(word.contains(\",\")) {\n\t\t\tword = removeChar(word, ',');\t\t}\n\t\tif(word.contains(\"?\")) {\n\t\t\tword = removeChar(word, '?');\n\t\t}\n\t\tif(word.contains(\"!\")) {\n\t\t\tword = removeChar(word, '!');\n\t\t}\n\t\tif(word.contains(\"\\\"\")) {\n\t\t\tword = removeChar(word, '\\\"');\n\t\t}\n\t\tif(word.contains(\"\\'\")) {\n\t\t\tword = removeChar(word, '\\'');\n\t\t}\n\t\tif(word.contains(\"(\")) {\n\t\t\tword = removeChar(word, '(');\n\t\t}\n\t\tif(word.contains(\")\")) {\n\t\t\tword = removeChar(word, ')');\n\t\t}\n\t\tif(word.contains(\"{\")) {\n\t\t\tword = removeChar(word, '{');\n\t\t}\n\t\tif(word.contains(\"}\")) {\n\t\t\tword = removeChar(word, '}');\n\t\t}\n\t\tif(word.contains(\"[\")) {\n\t\t\tword = removeChar(word, '[');\n\t\t}\n\t\tif(word.contains(\"]\")) {\n\t\t\tword = removeChar(word, ']');\n\t\t}\n\t\tif(word.contains(\"*\")) {\n\t\t\tword = removeChar(word, '*');\n\t\t}\n\t\tif(word.contains(\"#\")) {\n\t\t\tword = removeChar(word, '#');\n\t\t}\n\t\tif(word.contains(\"-\")) {\n\t\t\tword = removeChar(word, '-');\n\t\t}\n\t\tif(word.contains(\"_\")) {\n\t\t\tword = removeChar(word, '_');\n\t\t}\n\t\treturn word;\n\t}*/\n    private String removeChar(String s, char c) {\n        String r = \"\";\n        for (int i = 0; i < s.length(); i++) {\n            if (s.charAt(i) != c)\n                r += s.charAt(i);\n        }\n        return r;\n    }\n\n    public void parseURL(String text) {\n        URL newURL = new URL();\n        newURL.setUrl(text);\n        if (text.startsWith(\"http://\")) {\n            text = text.substring(7);\n        } else if (text.startsWith(\"https://\") || text.startsWith(\"file:///\")) {\n            text = text.substring(8);\n        }\n        int indexOfNextSlash = text.indexOf(\"/\");\n        if (indexOfNextSlash != -1) {\n            newURL.setHost(text.substring(0, indexOfNextSlash));\n            text = text.substring(indexOfNextSlash + 1);\n            indexOfNextSlash = text.indexOf(\"/\");\n            if (indexOfNextSlash != -1) {\n                if (text.substring(0, indexOfNextSlash).contains(\".\")) {\n                    text = text.substring(indexOfNextSlash + 1);\n                    indexOfNextSlash = text.indexOf(\"/\");\n                }\n                if (indexOfNextSlash != -1) {\n                    if (text.substring(0, indexOfNextSlash).equals(\"drproject\")) {\n                        indexOfNextSlash = text.indexOf(\"/\");\n                        text = text.substring(indexOfNextSlash + 1);\n                        indexOfNextSlash = text.indexOf(\"/\");\n                        newURL.setProjectName(text.substring(0, indexOfNextSlash));\n                        text = text.substring(indexOfNextSlash + 1);\n                        indexOfNextSlash = text.indexOf(\"/\");\n                        if (indexOfNextSlash != -1) {\n                            newURL.setEntityType(Dictionary.getDataBaseTable(text.substring(0, indexOfNextSlash)));\n                        } else {\n                            newURL.setEntityType(Dictionary.getDataBaseTable(text));\n                        }\n                    } else if (text.substring(0, indexOfNextSlash).equals(\"svn\")) {\n                        newURL.setEntityType(Dictionary.getDataBaseTable(text.substring(0, indexOfNextSlash)));\n                        text = text.substring(indexOfNextSlash + 1);\n                        indexOfNextSlash = text.indexOf(\"/\");\n                        if (indexOfNextSlash != -1) {\n                            newURL.setProjectName(text.substring(0, indexOfNextSlash));\n                        } else {\n                            newURL.setProjectName(text);\n                        }\n                    } else {\n                        newURL.setProjectName(text.substring(0, indexOfNextSlash));\n                        text = text.substring(indexOfNextSlash + 1);\n                        indexOfNextSlash = text.indexOf(\"/\");\n                        if (indexOfNextSlash != -1) {\n                            newURL.setEntityType(Dictionary.getDataBaseTable(text.substring(0, indexOfNextSlash)));\n                        } else {\n                            newURL.setEntityType(Dictionary.getDataBaseTable(text));\n                        }\n                    }\n                }\n            }\n        } else {\n            newURL.setHost(text);\n        }\n        if (newURL.getUrl().contains(\"src\")) {\n            newURL.setEntityType(Dictionary.getDataBaseTable(\"src\"));\n        }\n        this.urls.add(newURL);\n    }\n\n    private ArrayList<String> applyStoplist() {\n        ArrayList<String> newWords = new ArrayList<String>();\n        boolean found = false;\n        try {\n            for (String word : words) {\n                // BufferedReader in = new BufferedReader(new FileReader(\"ca/ualberta/cs/serl/wikidev/files/glasgowstoplist.txt\"));\n                BufferedReader in = new BufferedReader(new InputStreamReader(TextParser.class.getResourceAsStream(\"files/glasgowstoplist.txt\")));\n                String next = in.readLine();\n                while (next != null) {\n                    if (word.equalsIgnoreCase(next)) {\n                        found = true;\n                    }\n                    next = in.readLine();\n                }\n                in.close();\n                if (found) {\n                    newWords.add(word);\n                }\n                found = false;\n            }\n            words.removeAll(newWords);\n            /*found = false;\n\t\t\tfor(String newWord : newWords) {\n\t\t\t\tfor(String word : words) {\n\t\t\t\t\tif(word.equals(newWord)) {\n\t\t\t\t\t\tfound=true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\twords.remove(newWord);\n\t\t\t}*/\n        } catch (FileNotFoundException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        return words;\n    }\n    /*public String listOfWords(String text) {\n\t\tString result=\"\";\n\t\tTaporwareServices ts = new TaporwareServicesLocator();\n\t\ttry {\n\t\t\tTaporwareService_xml_bindingStub tapor = (TaporwareService_xml_bindingStub)ts.getTaporwareService_xml();\n\t\t\tresult = tapor.list_Words_Plain(text, \"stop\", \"glasgow\", \"2\", \"tab\");\n\t\t} catch (ServiceException e) {\n\t\t\t// TODO Auto-generated catch block\n\t\t\te.printStackTrace();\n\t\t} catch (RemoteException e) {\n\t\t\t// TODO Auto-generated catch block\n\t\t\te.printStackTrace();\n\t\t}\n\t\treturn result;\n\t}*/\n}",
  "subClasses": []
}