{
  "fullClassName": "ca.ualberta.cs.serl.wikidev.CityMain",
  "className": "CityMain",
  "index": 23,
  "modifier": "[public ]",
  "extend": "[]",
  "implement": "[]",
  "packageName": "ca.ualberta.cs.serl.wikidev",
  "packageDeclaration": "package ca.ualberta.cs.serl.wikidev;",
  "classSignature": "public class CityMain",
  "hasConstructor": false,
  "isPublic": true,
  "isInterface": false,
  "isAbstract": false,
  "imports": [
    "import java.io.BufferedWriter;",
    "import java.io.FileWriter;",
    "import java.io.IOException;",
    "import java.sql.Timestamp;",
    "import java.util.ArrayList;",
    "import ca.ualberta.cs.serl.wikidev.artifacts.ChangeSet;",
    "import ca.ualberta.cs.serl.wikidev.artifacts.IArtifact;",
    "import ca.ualberta.cs.serl.wikidev.artifacts.Message;",
    "import ca.ualberta.cs.serl.wikidev.artifacts.Ticket;",
    "import ca.ualberta.cs.serl.wikidev.artifacts.Wiki;",
    "import ca.ualberta.cs.serl.wikidev.city3d.CityLayout;",
    "import ca.ualberta.cs.serl.wikidev.city3d.Layout;",
    "import ca.ualberta.cs.serl.wikidev.city3d.IndustrialLayout;",
    "import ca.ualberta.cs.serl.wikidev.city3d.animation.BuildingData;",
    "import ca.ualberta.cs.serl.wikidev.city3d.animation.ClusterData;",
    "import ca.ualberta.cs.serl.wikidev.city3d.animation.CommunicationBuildingData;",
    "import ca.ualberta.cs.serl.wikidev.clustering.Cluster;",
    "import ca.ualberta.cs.serl.wikidev.clustering.ClusterPoint;",
    "import ca.ualberta.cs.serl.wikidev.clustering.Clustering;",
    "import ca.ualberta.cs.serl.wikidev.clustering.MultidimensionalScaling;",
    "import ca.ualberta.cs.serl.wikidev.clustering.SammonsProjection;"
  ],
  "fields": [],
  "superClasses": [],
  "implementedTypes": [],
  "methodSigs": {
    "main(String[])": "0",
    "printClusters(ArrayList, String)": "1"
  },
  "methodsBrief": [
    "public static void main(String[] args){}",
    "public static void printClusters(ArrayList<Cluster> clusters, String week) throws IOException{}"
  ],
  "constructorSigs": [],
  "constructorBrief": [],
  "getterSetterSigs": [],
  "getterSetterBrief": [],
  "constructorDeps": {},
  "compilationUnitCode": "package ca.ualberta.cs.serl.wikidev;\n\nimport java.io.BufferedWriter;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.sql.Timestamp;\nimport java.util.ArrayList;\nimport ca.ualberta.cs.serl.wikidev.artifacts.ChangeSet;\nimport ca.ualberta.cs.serl.wikidev.artifacts.IArtifact;\nimport ca.ualberta.cs.serl.wikidev.artifacts.Message;\nimport ca.ualberta.cs.serl.wikidev.artifacts.Ticket;\nimport ca.ualberta.cs.serl.wikidev.artifacts.Wiki;\nimport ca.ualberta.cs.serl.wikidev.city3d.CityLayout;\nimport ca.ualberta.cs.serl.wikidev.city3d.Layout;\nimport ca.ualberta.cs.serl.wikidev.city3d.IndustrialLayout;\nimport ca.ualberta.cs.serl.wikidev.city3d.animation.BuildingData;\nimport ca.ualberta.cs.serl.wikidev.city3d.animation.ClusterData;\nimport ca.ualberta.cs.serl.wikidev.city3d.animation.CommunicationBuildingData;\nimport ca.ualberta.cs.serl.wikidev.clustering.Cluster;\nimport ca.ualberta.cs.serl.wikidev.clustering.ClusterPoint;\nimport ca.ualberta.cs.serl.wikidev.clustering.Clustering;\nimport ca.ualberta.cs.serl.wikidev.clustering.MultidimensionalScaling;\nimport ca.ualberta.cs.serl.wikidev.clustering.SammonsProjection;\n\npublic class CityMain {\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        try {\n            String[] args2 = { \"jdbc:mysql://hypatia.cs.ualberta.ca/wikidev_ucosp\", \"fokaefs\", \"filimon9786#7@gr\", \"2009-09-01 00:00:00\", \"2010-01-01 00:00:00\", \"1\", \"weekly\", \"-lb\", \"0.05\", \"-ub\", \"0.95\", \"-i\", \"0.05\" };\n            InvocationParser ip = new InvocationParser();\n            ip.parseArgs(args2);\n            String databaseName = ip.getDatabaseName();\n            String username = ip.getUsername();\n            String password = ip.getPassword();\n            DataManager.openTheConnection(username, password, databaseName);\n            // String fromdate = ip.getFromdate();\n            // String todate = ip.getTodate();\n            String fromdate = DataManager.getTheEarlierstTimeOfActivity().toString();\n            String todate = DataManager.getTheLatestTimeOfActivity().toString();\n            // String fromdate = \"2009-09-01 00:00:00\";\n            // String todate = \"2009-10-01 00:00:00\";\n            int project = ip.getProject();\n            String window = ip.getWindow();\n            double lowerBound = ip.getLowerBound();\n            double upperBound = ip.getUpperBound();\n            double interval = ip.getInterval();\n            String week = \"week\";\n            System.out.println(\"Relationship miner start\");\n            ArrayList<IArtifact> newArtifacts = DataManager.getArtifactsBetweenDates(fromdate, todate, project);\n            ArrayList<ChangeSet> changesets = new ArrayList<ChangeSet>();\n            for (IArtifact artifact : newArtifacts) {\n                if (artifact instanceof ChangeSet) {\n                    ChangeSet changeset = (ChangeSet) artifact;\n                    changesets.add(changeset);\n                }\n            }\n            newArtifacts.removeAll(changesets);\n            int i = 0;\n            for (IArtifact artifact : newArtifacts) {\n                System.out.println(i + artifact.toString());\n                i++;\n            }\n            // System.exit(0);\n            RelationshipMiner rm = new RelationshipMiner(newArtifacts);\n            rm.getRelationships();\n            System.out.println(\"Relationship miner end \" + newArtifacts.size());\n            // Layout.assignUserColors(7);\n            CityLayout cityLayout = new CityLayout(newArtifacts, rm, project);\n            cityLayout.prepareToWriteCitySnapshots(Timestamp.valueOf(fromdate), Timestamp.valueOf(todate));\n            IndustrialLayout layout = new IndustrialLayout(changesets, project);\n            layout.prepareToWriteCitySnapshots(Timestamp.valueOf(fromdate), Timestamp.valueOf(todate));\n            /*ArrayList<CommunicationBuildingData> buildings = DataManager.getCommunicationsBuildingHistory(\"Message\", 66, 1);\n\t\t\tClusterData clustered = DataManager.getClusteredBuildings(buildings.get(0));\n\t\t\tint countComm=0;\n\t\t\tint countFile=0;\n\t\t\tfor(BuildingData data : clustered.getBuildings().keySet()) {\n\t\t\t\t\n\t\t\t\tif (data instanceof CommunicationBuildingData) {\n\t\t\t\t\t//System.out.println(data.getUrl());\n\t\t\t\t\tcountComm++;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcountFile++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tSystem.out.println(clustered.getTerms().size());\n\t\t\tfor(String term : clustered.getTerms().keySet()) {\n\t\t\t\tSystem.out.println(term+\" \"+clustered.getTerms().get(term));\n\t\t\t}\n\t\t\tSystem.out.println(countComm);\n\t\t\tSystem.out.println(countFile);*/\n            DataManager.closeTheConnection();\n            System.out.println(\"Success!!!\");\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void printClusters(ArrayList<Cluster> clusters, String week) throws IOException {\n        // BufferedWriter out = new BufferedWriter(new FileWriter(\"C:\\\\Documents and Settings\\\\Marios Fokaefs\\\\Desktop\\\\wikidev-files\\\\ucosp\\\\clusters\"+week+\".txt\"));\n        BufferedWriter out = new BufferedWriter(new FileWriter(\"C:\\\\Documents and Settings\\\\Marios Fokaefs\\\\Desktop\\\\wikidev-files\\\\c301f09\\\\clusters\" + week + \".txt\"));\n        int index = 1;\n        for (Cluster cluster : clusters) {\n            out.write(\"======================================================================\");\n            out.newLine();\n            out.write(\"Cluster \" + index);\n            out.newLine();\n            out.write(\"======================================================================\");\n            out.newLine();\n            out.newLine();\n            out.write(\"Users\");\n            out.newLine();\n            out.write(\"----------------------------------------------------------------------\");\n            out.newLine();\n            for (User user : cluster.getUsers()) {\n                out.write(user.toString());\n                out.newLine();\n            }\n            out.newLine();\n            out.write(\"Terms\");\n            out.newLine();\n            out.write(\"-----------------------------------------------------------------------\");\n            out.newLine();\n            for (String term : cluster.getWords()) {\n                out.write(term);\n                out.newLine();\n            }\n            out.newLine();\n            out.write(\"Artifacts\");\n            out.newLine();\n            out.write(\"----------------------------------------------------------------------\");\n            out.newLine();\n            for (IArtifact artifact : cluster.getArtifacts()) {\n                out.write(artifact.toString());\n                out.newLine();\n            }\n            out.newLine();\n            out.newLine();\n            index++;\n        }\n        out.close();\n    }\n}\n",
  "classDeclarationCode": "public class CityMain {\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        try {\n            String[] args2 = { \"jdbc:mysql://hypatia.cs.ualberta.ca/wikidev_ucosp\", \"fokaefs\", \"filimon9786#7@gr\", \"2009-09-01 00:00:00\", \"2010-01-01 00:00:00\", \"1\", \"weekly\", \"-lb\", \"0.05\", \"-ub\", \"0.95\", \"-i\", \"0.05\" };\n            InvocationParser ip = new InvocationParser();\n            ip.parseArgs(args2);\n            String databaseName = ip.getDatabaseName();\n            String username = ip.getUsername();\n            String password = ip.getPassword();\n            DataManager.openTheConnection(username, password, databaseName);\n            // String fromdate = ip.getFromdate();\n            // String todate = ip.getTodate();\n            String fromdate = DataManager.getTheEarlierstTimeOfActivity().toString();\n            String todate = DataManager.getTheLatestTimeOfActivity().toString();\n            // String fromdate = \"2009-09-01 00:00:00\";\n            // String todate = \"2009-10-01 00:00:00\";\n            int project = ip.getProject();\n            String window = ip.getWindow();\n            double lowerBound = ip.getLowerBound();\n            double upperBound = ip.getUpperBound();\n            double interval = ip.getInterval();\n            String week = \"week\";\n            System.out.println(\"Relationship miner start\");\n            ArrayList<IArtifact> newArtifacts = DataManager.getArtifactsBetweenDates(fromdate, todate, project);\n            ArrayList<ChangeSet> changesets = new ArrayList<ChangeSet>();\n            for (IArtifact artifact : newArtifacts) {\n                if (artifact instanceof ChangeSet) {\n                    ChangeSet changeset = (ChangeSet) artifact;\n                    changesets.add(changeset);\n                }\n            }\n            newArtifacts.removeAll(changesets);\n            int i = 0;\n            for (IArtifact artifact : newArtifacts) {\n                System.out.println(i + artifact.toString());\n                i++;\n            }\n            // System.exit(0);\n            RelationshipMiner rm = new RelationshipMiner(newArtifacts);\n            rm.getRelationships();\n            System.out.println(\"Relationship miner end \" + newArtifacts.size());\n            // Layout.assignUserColors(7);\n            CityLayout cityLayout = new CityLayout(newArtifacts, rm, project);\n            cityLayout.prepareToWriteCitySnapshots(Timestamp.valueOf(fromdate), Timestamp.valueOf(todate));\n            IndustrialLayout layout = new IndustrialLayout(changesets, project);\n            layout.prepareToWriteCitySnapshots(Timestamp.valueOf(fromdate), Timestamp.valueOf(todate));\n            /*ArrayList<CommunicationBuildingData> buildings = DataManager.getCommunicationsBuildingHistory(\"Message\", 66, 1);\n\t\t\tClusterData clustered = DataManager.getClusteredBuildings(buildings.get(0));\n\t\t\tint countComm=0;\n\t\t\tint countFile=0;\n\t\t\tfor(BuildingData data : clustered.getBuildings().keySet()) {\n\t\t\t\t\n\t\t\t\tif (data instanceof CommunicationBuildingData) {\n\t\t\t\t\t//System.out.println(data.getUrl());\n\t\t\t\t\tcountComm++;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcountFile++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tSystem.out.println(clustered.getTerms().size());\n\t\t\tfor(String term : clustered.getTerms().keySet()) {\n\t\t\t\tSystem.out.println(term+\" \"+clustered.getTerms().get(term));\n\t\t\t}\n\t\t\tSystem.out.println(countComm);\n\t\t\tSystem.out.println(countFile);*/\n            DataManager.closeTheConnection();\n            System.out.println(\"Success!!!\");\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void printClusters(ArrayList<Cluster> clusters, String week) throws IOException {\n        // BufferedWriter out = new BufferedWriter(new FileWriter(\"C:\\\\Documents and Settings\\\\Marios Fokaefs\\\\Desktop\\\\wikidev-files\\\\ucosp\\\\clusters\"+week+\".txt\"));\n        BufferedWriter out = new BufferedWriter(new FileWriter(\"C:\\\\Documents and Settings\\\\Marios Fokaefs\\\\Desktop\\\\wikidev-files\\\\c301f09\\\\clusters\" + week + \".txt\"));\n        int index = 1;\n        for (Cluster cluster : clusters) {\n            out.write(\"======================================================================\");\n            out.newLine();\n            out.write(\"Cluster \" + index);\n            out.newLine();\n            out.write(\"======================================================================\");\n            out.newLine();\n            out.newLine();\n            out.write(\"Users\");\n            out.newLine();\n            out.write(\"----------------------------------------------------------------------\");\n            out.newLine();\n            for (User user : cluster.getUsers()) {\n                out.write(user.toString());\n                out.newLine();\n            }\n            out.newLine();\n            out.write(\"Terms\");\n            out.newLine();\n            out.write(\"-----------------------------------------------------------------------\");\n            out.newLine();\n            for (String term : cluster.getWords()) {\n                out.write(term);\n                out.newLine();\n            }\n            out.newLine();\n            out.write(\"Artifacts\");\n            out.newLine();\n            out.write(\"----------------------------------------------------------------------\");\n            out.newLine();\n            for (IArtifact artifact : cluster.getArtifacts()) {\n                out.write(artifact.toString());\n                out.newLine();\n            }\n            out.newLine();\n            out.newLine();\n            index++;\n        }\n        out.close();\n    }\n}",
  "subClasses": []
}