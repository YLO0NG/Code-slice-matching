{
  "fullClassName": "ca.ualberta.cs.serl.wikidev.QueryBuilder",
  "className": "QueryBuilder",
  "index": 39,
  "modifier": "[public , abstract ]",
  "extend": "[]",
  "implement": "[]",
  "packageName": "ca.ualberta.cs.serl.wikidev",
  "packageDeclaration": "package ca.ualberta.cs.serl.wikidev;",
  "classSignature": "public abstract class QueryBuilder",
  "hasConstructor": false,
  "isPublic": true,
  "isInterface": false,
  "isAbstract": true,
  "imports": [
    "import java.sql.Timestamp;",
    "import ca.ualberta.cs.serl.wikidev.city3d.animation.CommunicationBuildingData;",
    "import ca.ualberta.cs.serl.wikidev.city3d.animation.FileBuildingData;",
    "import ca.ualberta.cs.serl.wikidev.clustering.Cluster;",
    "import ca.ualberta.cs.serl.wikidev.clustering.ClusterPoint;"
  ],
  "fields": [
    "public static final String SELECT_ALL_USERS = \"select * from mw_user\";",
    "public static final String SELECT_ALL_PROJECTS = \"select * from wikidev_projects\";"
  ],
  "superClasses": [],
  "implementedTypes": [],
  "methodSigs": {
    "selectTheEarliestTimeOfActivity()": "0",
    "selectTheLatestTimeOfActivity()": "1",
    "selectUsersPerProject(int)": "2",
    "selectProjectByName(String)": "3",
    "selectClusterID(Cluster, String)": "4",
    "insertIntoClusters(Cluster, String)": "5",
    "insertArtifactInCluster(String, int, String, int, ClusterPoint)": "6",
    "insertUserInCluster(String, int)": "7",
    "insertClusterPerProject(int, String, String, String, int, String, double)": "8",
    "selectCommunicationsBuildingID(CommunicationBuildingData, int)": "9",
    "selectFilesBuildingID(FileBuildingData, int)": "10",
    "insertCommunicationsBuildingData(String, int, String, int, int, int, int, String, int, String, Timestamp, Timestamp)": "11",
    "insertFilesBuildingData(String, String, int, int, int, int, String, int, String, Timestamp, Timestamp)": "12",
    "insertUserData(int, String, int, int, int, double, String, String)": "13",
    "selectProjectByID(int)": "14",
    "selectArtifactByURL(String, String)": "15",
    "selectUserByID(int)": "16",
    "selectUserByExternalUserName(String)": "17",
    "selectUserByUserName(String)": "18",
    "selectArtifactsAfterTimestamp(String, String)": "19",
    "selectArtifactsForProject(String, int)": "20",
    "selectProjectIDByExternalSystem(int)": "21",
    "selectExternalSystemByProjectID(int)": "22",
    "selectTicketChangesByTicketID(int)": "23",
    "selectChangeSetDetailByRevAndProject(int, int)": "24",
    "selectSourceClassByName(String)": "25",
    "selectUserAliases(int)": "26",
    "selectProjectRoles(int)": "27",
    "selectCommunicationParticipants(int)": "28",
    "selectSourceClassEditors(int)": "29",
    "selectProjectSourceClasses(int)": "30",
    "selectSourceClassByID(int)": "31",
    "selectProjectUsers(int)": "32",
    "selectTicketByDrID(int, int)": "33",
    "selectAllChangesetsForProject(int)": "34",
    "selectArtifactsForProjectBetweenDates(String, String, String, int, int)": "35",
    "selectRevisionsByWikiID(int)": "36",
    "selectRevisionTextByRevisionID(int)": "37",
    "selectProjectNamespaceByNamespaceID(int)": "38",
    "selectProjectNamespaceByID(int)": "39",
    "selectProjectNamespaceIDbyNamespace(String)": "40",
    "selectCommunicationCitySnapshot(Timestamp, int)": "41",
    "selectFileCitySnapshot(Timestamp, int)": "42",
    "selectUsersForBuilding(int, String)": "43",
    "selectCommunicationsBuildingHistory(String, int, int)": "44",
    "selectFilesBuildingHistory(String)": "45",
    "selectCommunicationsCitySize(int)": "46",
    "selectFilesCitySize(int)": "47",
    "selectClusterIDsByBuilding(CommunicationBuildingData)": "48",
    "selectClusterByID(int)": "49",
    "selectArtifactsInCluster(Cluster)": "50",
    "selectArtifactByTypeAndID(String, int, int)": "51"
  },
  "methodsBrief": [
    "public static String selectTheEarliestTimeOfActivity(){}",
    "public static String selectTheLatestTimeOfActivity(){}",
    "public static String selectUsersPerProject(int projectid){}",
    "public static String selectProjectByName(String projectName){}",
    "public static String selectClusterID(Cluster cluster, String projectname){}",
    "public static String insertIntoClusters(Cluster cluster, String projectname){}",
    "public static String insertArtifactInCluster(String type, int clusterid, String projectname, int id, ClusterPoint point){}",
    "public static String insertUserInCluster(String username, int clusterid){}",
    "public static String insertClusterPerProject(int clustered, String projectname, String fromdate, String todate, int total, String cluster_set_name, double threshold){}",
    "public static String selectCommunicationsBuildingID(CommunicationBuildingData building, int projectid){}",
    "public static String selectFilesBuildingID(FileBuildingData building, int projectid){}",
    "public static String insertCommunicationsBuildingData(String type, int artifact_id, String week, int height, int neighborhoodX, int neighborhoodY, int cityBlock, String url, int projectid, String lastEditor, Timestamp created, Timestamp lastModified){}",
    "public static String insertFilesBuildingData(String type, String week, int height, int neighborhoodX, int neighborhoodY, int cityBlock, String url, int projectid, String lastEditor, Timestamp created, Timestamp lastModified){}",
    "public static String insertUserData(int buildingid, String username, int R, int G, int B, double contribution, String week, String cityType){}",
    "public static String selectProjectByID(int projectID){}",
    "public static String selectArtifactByURL(String entityType, String URL){}",
    "public static String selectUserByID(int userID){}",
    "public static String selectUserByExternalUserName(String externalUserName){}",
    "public static String selectUserByUserName(String userName){}",
    "public static String selectArtifactsAfterTimestamp(String entityType, String timestamp){}",
    "public static String selectArtifactsForProject(String entityType, int projectid){}",
    "public static String selectProjectIDByExternalSystem(int externalsystem_id){}",
    "public static String selectExternalSystemByProjectID(int projectid){}",
    "public static String selectTicketChangesByTicketID(int ticketID){}",
    "public static String selectChangeSetDetailByRevAndProject(int rev, int externalsystem_id){}",
    "public static String selectSourceClassByName(String className){}",
    "public static String selectUserAliases(int userID){}",
    "public static String selectProjectRoles(int userID){}",
    "public static String selectCommunicationParticipants(int communicationID){}",
    "public static String selectSourceClassEditors(int sourceClassID){}",
    "public static String selectProjectSourceClasses(int projectID){}",
    "public static String selectSourceClassByID(int classID){}",
    "public static String selectProjectUsers(int projectID){}",
    "public static String selectTicketByDrID(int ticketid, int project){}",
    "public static String selectAllChangesetsForProject(int externalsystem){}",
    "public static String selectArtifactsForProjectBetweenDates(String entityType, String timestamp1, String timestamp2, int projectid, int page_namespace_id){}",
    "public static String selectRevisionsByWikiID(int page_id){}",
    "public static String selectRevisionTextByRevisionID(int rev_id){}",
    "public static String selectProjectNamespaceByNamespaceID(int page_namespace_id){}",
    "public static String selectProjectNamespaceByID(int projectid){}",
    "public static String selectProjectNamespaceIDbyNamespace(String namespace){}",
    "public static String selectCommunicationCitySnapshot(Timestamp timestamp,\r\n\t\t\tint projectid){}",
    "public static String selectFileCitySnapshot(Timestamp timestamp,\r\n\t\t\tint projectid){}",
    "public static String selectUsersForBuilding(int id, String city_type){}",
    "public static String selectCommunicationsBuildingHistory(String type, int artifactId, int projectid){}",
    "public static String selectFilesBuildingHistory(String url){}",
    "public static String selectCommunicationsCitySize(int projectid){}",
    "public static String selectFilesCitySize(int projectid){}",
    "public static String selectClusterIDsByBuilding(CommunicationBuildingData building){}",
    "public static String selectClusterByID(int clusterid){}",
    "public static String selectArtifactsInCluster(Cluster cluster){}",
    "public static String selectArtifactByTypeAndID(String type, int id, int projectid){}"
  ],
  "constructorSigs": [],
  "constructorBrief": [],
  "getterSetterSigs": [],
  "getterSetterBrief": [],
  "constructorDeps": {},
  "compilationUnitCode": "package ca.ualberta.cs.serl.wikidev;\n\nimport java.sql.Timestamp;\nimport ca.ualberta.cs.serl.wikidev.city3d.animation.CommunicationBuildingData;\nimport ca.ualberta.cs.serl.wikidev.city3d.animation.FileBuildingData;\nimport ca.ualberta.cs.serl.wikidev.clustering.Cluster;\nimport ca.ualberta.cs.serl.wikidev.clustering.ClusterPoint;\n\npublic abstract class QueryBuilder {\n\n    public static final String SELECT_ALL_USERS = \"select * from mw_user\";\n\n    public static final String SELECT_ALL_PROJECTS = \"select * from wikidev_projects\";\n\n    public static String selectTheEarliestTimeOfActivity() {\n        return \"SELECT min(time) as time FROM (SELECT min(timestamp) as time from wikidev_changesets UNION SELECT min(date) as time from wikidev_messages UNION SELECT min(change_time) as time from wikidev_ticketchanges UNION SELECT min(created) as time from wikidev_tickets) times\";\n    }\n\n    public static String selectTheLatestTimeOfActivity() {\n        return \"SELECT max(time) as time FROM (SELECT max(timestamp) as time from wikidev_changesets UNION SELECT max(date) as time from wikidev_messages UNION SELECT max(change_time) as time from wikidev_ticketchanges UNION SELECT max(created) as time from wikidev_tickets) times\";\n    }\n\n    public static String selectUsersPerProject(int projectid) {\n        return \"select userid from wikidev_projectroles where projectid=\\'\" + projectid + \"\\'\";\n    }\n\n    public static String selectProjectByName(String projectName) {\n        return \"select * from wikidev_projects where projectname=\\'\" + projectName + \"\\'\";\n    }\n\n    public static String selectClusterID(Cluster cluster, String projectname) {\n        return \"select clusterid from wikidev_clusters where project_name=\\'\" + projectname + \"\\' and clusterindex=\\'\" + cluster.getIndex() + \"\\' and from_date=\\'\" + cluster.getFromdate().toString() + \"\\' and to_date=\\'\" + cluster.getTodate().toString() + \"\\'\";\n    }\n\n    public static String insertIntoClusters(Cluster cluster, String projectname) {\n        return \"insert into wikidev_clusters (clusterid, project_name, clusterindex, terms, from_date, to_date, cluster_set_name, threshold) values (null, \\'\" + projectname + \"\\', \" + cluster.getIndex() + \", \\'\" + Dictionary.concatStrings(cluster.getWords()) + \"\\', \\'\" + cluster.getFromdate().toString() + \"\\', \\'\" + cluster.getTodate().toString() + \"\\', \\'\" + cluster.getCluster_set_name() + \"\\', \\'\" + cluster.getThreshold() + \"\\')\";\n    }\n\n    public static String insertArtifactInCluster(String type, int clusterid, String projectname, int id, ClusterPoint point) {\n        return \"insert into wikidev_artifacts_in_clusters values (\\'\" + type + \"\\', \" + clusterid + \", \\'\" + projectname + \"\\', \" + id + \", \" + point.getX() + \", \" + point.getY() + \")\";\n    }\n\n    public static String insertUserInCluster(String username, int clusterid) {\n        return \"insert into wikidev_users_in_clusters values (\\'\" + username + \"\\', \" + clusterid + \")\";\n    }\n\n    public static String insertClusterPerProject(int clustered, String projectname, String fromdate, String todate, int total, String cluster_set_name, double threshold) {\n        return \"insert into wikidev_clusters_per_project values (\\'\" + cluster_set_name + \"\\', \\'\" + fromdate + \"\\', \\'\" + todate + \"\\', \\'\" + projectname + \"\\', \\'\" + clustered + \"\\', \\'\" + total + \"\\', \\'\" + threshold + \"\\')\";\n    }\n\n    public static String selectCommunicationsBuildingID(CommunicationBuildingData building, int projectid) {\n        return \"select building_id from wikidev_wikidev3d_communications_city where project_id=\\'\" + projectid + \"\\' and week=\\'\" + building.getWeek() + \"\\' and type=\\'\" + building.getType() + \"\\' and artifact_id=\\'\" + building.getArtifact_id() + \"\\'\";\n    }\n\n    public static String selectFilesBuildingID(FileBuildingData building, int projectid) {\n        return \"select building_id from wikidev_wikidev3d_files_city where project_id=\\'\" + projectid + \"\\' and url=\\'\" + building.getUrl() + \"\\'\";\n    }\n\n    public static String insertCommunicationsBuildingData(String type, int artifact_id, String week, int height, int neighborhoodX, int neighborhoodY, int cityBlock, String url, int projectid, String lastEditor, Timestamp created, Timestamp lastModified) {\n        return \"insert into wikidev_wikidev3d_communications_city (type, artifact_id, week, height, neighborhoodX, neighborhoodY, cityBlock, url, project_id, last_editor, created, last_modified) values (\\\"\" + type + \"\\\", \\\"\" + artifact_id + \"\\\", \\\"\" + week + \"\\\", \\\"\" + height + \"\\\", \\\"\" + neighborhoodX + \"\\\", \\\"\" + neighborhoodY + \"\\\", \\\"\" + cityBlock + \"\\\", \\\"\" + url.replaceAll(\"\\\"\", \"\\\\\\\\\\\"\") + \"\\\", \\\"\" + projectid + \"\\\", \\\"\" + lastEditor + \"\\\", \\\"\" + created.toString() + \"\\\", \\\"\" + lastModified.toString() + \"\\\")\";\n    }\n\n    public static String insertFilesBuildingData(String type, String week, int height, int neighborhoodX, int neighborhoodY, int cityBlock, String url, int projectid, String lastEditor, Timestamp created, Timestamp lastModified) {\n        return \"insert into wikidev_wikidev3d_files_city (type, week, height, neighborhoodX, neighborhoodY, cityBlock, url, project_id, last_editor, created, last_modified) values (\\'\" + type + \"\\', \\'\" + week + \"\\', \\'\" + height + \"\\', \\'\" + neighborhoodX + \"\\', \\'\" + neighborhoodY + \"\\', \\'\" + cityBlock + \"\\', \\'\" + url + \"\\', \\'\" + projectid + \"\\', \\'\" + lastEditor + \"\\', \\'\" + created.toString() + \"\\', \\'\" + lastModified.toString() + \"\\')\";\n    }\n\n    public static String insertUserData(int buildingid, String username, int R, int G, int B, double contribution, String week, String cityType) {\n        return \"insert into wikidev_wikidev3d_users (building_id, username, R, G, B, contribution, week, city_type) values (\\'\" + buildingid + \"\\', \\'\" + username + \"\\', \\'\" + R + \"\\', \\'\" + G + \"\\', \\'\" + B + \"\\', \\'\" + contribution + \"\\', \\'\" + week + \"\\', \\'\" + cityType + \"\\')\";\n    }\n\n    public static String selectProjectByID(int projectID) {\n        return \"select * from wikidev_projects where projectid=\" + projectID;\n    }\n\n    public static String selectArtifactByURL(String entityType, String URL) {\n        return \"select * from \" + entityType + \" where url=\\'\" + URL + \"\\'\";\n    }\n\n    public static String selectUserByID(int userID) {\n        return \"select * from mw_user where user_id=\" + userID;\n    }\n\n    public static String selectUserByExternalUserName(String externalUserName) {\n        return \"select userid from wikidev_usermap where externalusername=\\'\" + externalUserName + \"\\'\";\n    }\n\n    public static String selectUserByUserName(String userName) {\n        return \"select user_id,user_name,user_real_name from mw_user where user_name=\\'\" + userName + \"\\'\";\n    }\n\n    public static String selectArtifactsAfterTimestamp(String entityType, String timestamp) {\n        return \"select * from \" + entityType + \" where timestamp>\" + timestamp;\n    }\n\n    public static String selectArtifactsForProject(String entityType, int projectid) {\n        return \"select * from \" + entityType + \" where project_id=\\'\" + projectid + \"\\'\";\n    }\n\n    public static String selectProjectIDByExternalSystem(int externalsystem_id) {\n        return \"select project from wikidev_projects_system where externalsystem=\" + externalsystem_id;\n    }\n\n    public static String selectExternalSystemByProjectID(int projectid) {\n        return \"select externalsystem from wikidev_projects_system where project=\" + projectid;\n    }\n\n    public static String selectTicketChangesByTicketID(int ticketID) {\n        return \"select * from wikidev_ticketchanges where ticket_id=\" + ticketID;\n    }\n\n    public static String selectChangeSetDetailByRevAndProject(int rev, int externalsystem_id) {\n        return \"select * from wikidev_changesetdetails where rev=\\'\" + rev + \"\\' and externalsystem_id=\\'\" + externalsystem_id + \"\\'\";\n    }\n\n    public static String selectSourceClassByName(String className) {\n        return \"select * from wikidev_sourceclasses where name=\\'\" + className + \"\\'\";\n    }\n\n    public static String selectUserAliases(int userID) {\n        return \"select * from wikidev_usermap where userid=\" + userID;\n    }\n\n    public static String selectProjectRoles(int userID) {\n        return \"select * from wikidev_projectroles where userid=\" + userID;\n    }\n\n    public static String selectCommunicationParticipants(int communicationID) {\n        return \"select * from wikidev_communicationparticipants where communicationid=\" + communicationID;\n    }\n\n    public static String selectSourceClassEditors(int sourceClassID) {\n        return \"select * from wikidev_sourceclasseditors where classid=\" + sourceClassID;\n    }\n\n    public static String selectProjectSourceClasses(int projectID) {\n        return \"select * from wikidev_projectsourceclasses where projectid=\" + projectID;\n    }\n\n    public static String selectSourceClassByID(int classID) {\n        return \"select * from wikidev_sourceclasses where classid=\" + classID;\n    }\n\n    public static String selectProjectUsers(int projectID) {\n        return \"select * from wikidev_projectroles where projectid=\" + projectID;\n    }\n\n    public static String selectTicketByDrID(int ticketid, int project) {\n        return \"select * from wikidev_tickets where project_ticket_id=\\'\" + ticketid + \"\\' AND project_id=\\'\" + project + \"\\'\";\n    }\n\n    public static String selectAllChangesetsForProject(int externalsystem) {\n        return \"select * from wikidev_changesets where externalsystem_id=\\'\" + externalsystem + \"\\'\";\n    }\n\n    public static String selectArtifactsForProjectBetweenDates(String entityType, String timestamp1, String timestamp2, int projectid, int page_namespace_id) {\n        String query = \"\";\n        if (entityType.equals(\"wikidev_tickets\")) {\n            query = \"select * from wikidev_tickets where ((created>=\\'\" + timestamp1 + \"\\'\" + \" AND created<=\\'\" + timestamp2 + \"\\') OR (last_modified>=\\'\" + timestamp1 + \"\\'\" + \" AND last_modified<=\\'\" + timestamp2 + \"\\'))\" + \" AND project_id=\\'\" + projectid + \"\\'\";\n        } else if (entityType.equals(\"wikidev_messages\")) {\n            query = \"select * from wikidev_messages where date>=\\'\" + timestamp1 + \"\\'\" + \" AND date<=\\'\" + timestamp2 + \"\\'\" + \" AND project_id=\\'\" + projectid + \"\\'\";\n        } else if (entityType.equals(\"mw_page\")) {\n            query = \"select * from mw_page where page_touched>=\\'\" + timestamp1 + \"\\'\" + \" AND page_touched<=\\'\" + timestamp2 + \"\\'\" + \" AND page_namespace=\\'\" + page_namespace_id + \"\\'\";\n        } else if (entityType.equals(\"wikidev_changesets\")) {\n            query = \"select * from wikidev_changesets where timestamp>=\\'\" + timestamp1 + \"\\'\" + \" AND timestamp<=\\'\" + timestamp2 + \"\\'\" + \" AND project_id=\" + projectid;\n        }\n        return query;\n    }\n\n    /*private static String getProjectName(int projectid) {\n\t\tif(projectid<10) {\n\t\t\treturn \"team0\"+projectid;\n\t\t}\n\t\telse {\n\t\t\treturn \"team\"+projectid;\n\t\t}\n\t}*/\n    public static String selectRevisionsByWikiID(int page_id) {\n        return \"select * from mw_revision where rev_page=\\'\" + page_id + \"\\'\";\n    }\n\n    public static String selectRevisionTextByRevisionID(int rev_id) {\n        return \"select CAST(old_text AS CHAR) from mw_text where old_id=\\'\" + rev_id + \"\\'\";\n    }\n\n    public static String selectProjectNamespaceByNamespaceID(int page_namespace_id) {\n        return \"select * from mw_an_extranamespaces where nsId=\\'\" + page_namespace_id + \"\\'\";\n    }\n\n    public static String selectProjectNamespaceByID(int projectid) {\n        return \"select * from wikidev_projects where projectid=\\'\" + projectid + \"\\'\";\n    }\n\n    public static String selectProjectNamespaceIDbyNamespace(String namespace) {\n        return \"select * from mw_an_extranamespaces where nsName=\\'\" + namespace + \"\\'\";\n    }\n\n    public static String selectCommunicationCitySnapshot(Timestamp timestamp, int projectid) {\n        return \"select * from wikidev_wikidev3d_communications_city where week=\\'\" + timestamp + \"\\' and project_id=\\'\" + projectid + \"\\'\";\n    }\n\n    public static String selectFileCitySnapshot(Timestamp timestamp, int projectid) {\n        return \"select * from wikidev_wikidev3d_files_city where week=\\'\" + timestamp + \"\\' and project_id=\\'\" + projectid + \"\\'\";\n    }\n\n    public static String selectUsersForBuilding(int id, String city_type) {\n        return \"select * from wikidev_wikidev3d_users where building_id=\\'\" + id + \"\\' and city_type=\\'\" + city_type + \"\\'\";\n    }\n\n    public static String selectCommunicationsBuildingHistory(String type, int artifactId, int projectid) {\n        return \"select * from wikidev_wikidev3d_communications_city where type=\\'\" + type + \"\\' and project_id=\\'\" + projectid + \"\\' and artifact_id=\\'\" + artifactId + \"\\'\";\n    }\n\n    public static String selectFilesBuildingHistory(String url) {\n        return \"select * from wikidev_wikidev3d_files_city where url=\\'\" + url + \"\\'\";\n    }\n\n    public static String selectCommunicationsCitySize(int projectid) {\n        return \"SELECT max( size ) AS size FROM (SELECT max( neighborhoodX ) AS size FROM wikidev_wikidev3d_communications_city AS a UNION SELECT max( neighborhoodY ) AS size FROM wikidev_wikidev3d_communications_city AS b)times\";\n    }\n\n    public static String selectFilesCitySize(int projectid) {\n        return \"SELECT max( size ) AS size FROM (SELECT max( neighborhoodX ) AS size FROM wikidev_wikidev3d_files_city AS a UNION SELECT max( neighborhoodY ) AS size FROM wikidev_wikidev3d_files_city AS b)times\";\n    }\n\n    public static String selectClusterIDsByBuilding(CommunicationBuildingData building) {\n        return \"select clusterid from wikidev_artifacts_in_clusters where type=\\'\" + building.getType() + \"\\' and id=\\'\" + building.getArtifact_id() + \"\\'\";\n    }\n\n    public static String selectClusterByID(int clusterid) {\n        return \"select * from wikidev_clusters where clusterid=\\'\" + clusterid + \"\\'\";\n    }\n\n    public static String selectArtifactsInCluster(Cluster cluster) {\n        return \"select type,id from wikidev_artifacts_in_clusters where clusterid=\\'\" + cluster.getClusterid() + \"\\'\";\n    }\n\n    public static String selectArtifactByTypeAndID(String type, int id, int projectid) {\n        String query = \"\";\n        if (type.equals(\"Ticket\")) {\n            query = \"select * from wikidev_tickets where id=\\'\" + id + \"\\'\";\n        } else if (type.equals(\"Message\")) {\n            query = \"select * from wikidev_messages where id=\\'\" + id + \"\\'\";\n        } else if (type.equals(\"Wiki\")) {\n            query = \"select * from mw_page where page_id=\\'\" + id + \"\\'\";\n        } else if (type.equals(\"ChangeSet\")) {\n            query = \"select * from wikidev_changesets where rev=\\'\" + id + \"\\' AND project_id=\\'\" + projectid + \"\\'\";\n        }\n        return query;\n    }\n}\n",
  "classDeclarationCode": "public abstract class QueryBuilder {\n\n    public static final String SELECT_ALL_USERS = \"select * from mw_user\";\n\n    public static final String SELECT_ALL_PROJECTS = \"select * from wikidev_projects\";\n\n    public static String selectTheEarliestTimeOfActivity() {\n        return \"SELECT min(time) as time FROM (SELECT min(timestamp) as time from wikidev_changesets UNION SELECT min(date) as time from wikidev_messages UNION SELECT min(change_time) as time from wikidev_ticketchanges UNION SELECT min(created) as time from wikidev_tickets) times\";\n    }\n\n    public static String selectTheLatestTimeOfActivity() {\n        return \"SELECT max(time) as time FROM (SELECT max(timestamp) as time from wikidev_changesets UNION SELECT max(date) as time from wikidev_messages UNION SELECT max(change_time) as time from wikidev_ticketchanges UNION SELECT max(created) as time from wikidev_tickets) times\";\n    }\n\n    public static String selectUsersPerProject(int projectid) {\n        return \"select userid from wikidev_projectroles where projectid=\\'\" + projectid + \"\\'\";\n    }\n\n    public static String selectProjectByName(String projectName) {\n        return \"select * from wikidev_projects where projectname=\\'\" + projectName + \"\\'\";\n    }\n\n    public static String selectClusterID(Cluster cluster, String projectname) {\n        return \"select clusterid from wikidev_clusters where project_name=\\'\" + projectname + \"\\' and clusterindex=\\'\" + cluster.getIndex() + \"\\' and from_date=\\'\" + cluster.getFromdate().toString() + \"\\' and to_date=\\'\" + cluster.getTodate().toString() + \"\\'\";\n    }\n\n    public static String insertIntoClusters(Cluster cluster, String projectname) {\n        return \"insert into wikidev_clusters (clusterid, project_name, clusterindex, terms, from_date, to_date, cluster_set_name, threshold) values (null, \\'\" + projectname + \"\\', \" + cluster.getIndex() + \", \\'\" + Dictionary.concatStrings(cluster.getWords()) + \"\\', \\'\" + cluster.getFromdate().toString() + \"\\', \\'\" + cluster.getTodate().toString() + \"\\', \\'\" + cluster.getCluster_set_name() + \"\\', \\'\" + cluster.getThreshold() + \"\\')\";\n    }\n\n    public static String insertArtifactInCluster(String type, int clusterid, String projectname, int id, ClusterPoint point) {\n        return \"insert into wikidev_artifacts_in_clusters values (\\'\" + type + \"\\', \" + clusterid + \", \\'\" + projectname + \"\\', \" + id + \", \" + point.getX() + \", \" + point.getY() + \")\";\n    }\n\n    public static String insertUserInCluster(String username, int clusterid) {\n        return \"insert into wikidev_users_in_clusters values (\\'\" + username + \"\\', \" + clusterid + \")\";\n    }\n\n    public static String insertClusterPerProject(int clustered, String projectname, String fromdate, String todate, int total, String cluster_set_name, double threshold) {\n        return \"insert into wikidev_clusters_per_project values (\\'\" + cluster_set_name + \"\\', \\'\" + fromdate + \"\\', \\'\" + todate + \"\\', \\'\" + projectname + \"\\', \\'\" + clustered + \"\\', \\'\" + total + \"\\', \\'\" + threshold + \"\\')\";\n    }\n\n    public static String selectCommunicationsBuildingID(CommunicationBuildingData building, int projectid) {\n        return \"select building_id from wikidev_wikidev3d_communications_city where project_id=\\'\" + projectid + \"\\' and week=\\'\" + building.getWeek() + \"\\' and type=\\'\" + building.getType() + \"\\' and artifact_id=\\'\" + building.getArtifact_id() + \"\\'\";\n    }\n\n    public static String selectFilesBuildingID(FileBuildingData building, int projectid) {\n        return \"select building_id from wikidev_wikidev3d_files_city where project_id=\\'\" + projectid + \"\\' and url=\\'\" + building.getUrl() + \"\\'\";\n    }\n\n    public static String insertCommunicationsBuildingData(String type, int artifact_id, String week, int height, int neighborhoodX, int neighborhoodY, int cityBlock, String url, int projectid, String lastEditor, Timestamp created, Timestamp lastModified) {\n        return \"insert into wikidev_wikidev3d_communications_city (type, artifact_id, week, height, neighborhoodX, neighborhoodY, cityBlock, url, project_id, last_editor, created, last_modified) values (\\\"\" + type + \"\\\", \\\"\" + artifact_id + \"\\\", \\\"\" + week + \"\\\", \\\"\" + height + \"\\\", \\\"\" + neighborhoodX + \"\\\", \\\"\" + neighborhoodY + \"\\\", \\\"\" + cityBlock + \"\\\", \\\"\" + url.replaceAll(\"\\\"\", \"\\\\\\\\\\\"\") + \"\\\", \\\"\" + projectid + \"\\\", \\\"\" + lastEditor + \"\\\", \\\"\" + created.toString() + \"\\\", \\\"\" + lastModified.toString() + \"\\\")\";\n    }\n\n    public static String insertFilesBuildingData(String type, String week, int height, int neighborhoodX, int neighborhoodY, int cityBlock, String url, int projectid, String lastEditor, Timestamp created, Timestamp lastModified) {\n        return \"insert into wikidev_wikidev3d_files_city (type, week, height, neighborhoodX, neighborhoodY, cityBlock, url, project_id, last_editor, created, last_modified) values (\\'\" + type + \"\\', \\'\" + week + \"\\', \\'\" + height + \"\\', \\'\" + neighborhoodX + \"\\', \\'\" + neighborhoodY + \"\\', \\'\" + cityBlock + \"\\', \\'\" + url + \"\\', \\'\" + projectid + \"\\', \\'\" + lastEditor + \"\\', \\'\" + created.toString() + \"\\', \\'\" + lastModified.toString() + \"\\')\";\n    }\n\n    public static String insertUserData(int buildingid, String username, int R, int G, int B, double contribution, String week, String cityType) {\n        return \"insert into wikidev_wikidev3d_users (building_id, username, R, G, B, contribution, week, city_type) values (\\'\" + buildingid + \"\\', \\'\" + username + \"\\', \\'\" + R + \"\\', \\'\" + G + \"\\', \\'\" + B + \"\\', \\'\" + contribution + \"\\', \\'\" + week + \"\\', \\'\" + cityType + \"\\')\";\n    }\n\n    public static String selectProjectByID(int projectID) {\n        return \"select * from wikidev_projects where projectid=\" + projectID;\n    }\n\n    public static String selectArtifactByURL(String entityType, String URL) {\n        return \"select * from \" + entityType + \" where url=\\'\" + URL + \"\\'\";\n    }\n\n    public static String selectUserByID(int userID) {\n        return \"select * from mw_user where user_id=\" + userID;\n    }\n\n    public static String selectUserByExternalUserName(String externalUserName) {\n        return \"select userid from wikidev_usermap where externalusername=\\'\" + externalUserName + \"\\'\";\n    }\n\n    public static String selectUserByUserName(String userName) {\n        return \"select user_id,user_name,user_real_name from mw_user where user_name=\\'\" + userName + \"\\'\";\n    }\n\n    public static String selectArtifactsAfterTimestamp(String entityType, String timestamp) {\n        return \"select * from \" + entityType + \" where timestamp>\" + timestamp;\n    }\n\n    public static String selectArtifactsForProject(String entityType, int projectid) {\n        return \"select * from \" + entityType + \" where project_id=\\'\" + projectid + \"\\'\";\n    }\n\n    public static String selectProjectIDByExternalSystem(int externalsystem_id) {\n        return \"select project from wikidev_projects_system where externalsystem=\" + externalsystem_id;\n    }\n\n    public static String selectExternalSystemByProjectID(int projectid) {\n        return \"select externalsystem from wikidev_projects_system where project=\" + projectid;\n    }\n\n    public static String selectTicketChangesByTicketID(int ticketID) {\n        return \"select * from wikidev_ticketchanges where ticket_id=\" + ticketID;\n    }\n\n    public static String selectChangeSetDetailByRevAndProject(int rev, int externalsystem_id) {\n        return \"select * from wikidev_changesetdetails where rev=\\'\" + rev + \"\\' and externalsystem_id=\\'\" + externalsystem_id + \"\\'\";\n    }\n\n    public static String selectSourceClassByName(String className) {\n        return \"select * from wikidev_sourceclasses where name=\\'\" + className + \"\\'\";\n    }\n\n    public static String selectUserAliases(int userID) {\n        return \"select * from wikidev_usermap where userid=\" + userID;\n    }\n\n    public static String selectProjectRoles(int userID) {\n        return \"select * from wikidev_projectroles where userid=\" + userID;\n    }\n\n    public static String selectCommunicationParticipants(int communicationID) {\n        return \"select * from wikidev_communicationparticipants where communicationid=\" + communicationID;\n    }\n\n    public static String selectSourceClassEditors(int sourceClassID) {\n        return \"select * from wikidev_sourceclasseditors where classid=\" + sourceClassID;\n    }\n\n    public static String selectProjectSourceClasses(int projectID) {\n        return \"select * from wikidev_projectsourceclasses where projectid=\" + projectID;\n    }\n\n    public static String selectSourceClassByID(int classID) {\n        return \"select * from wikidev_sourceclasses where classid=\" + classID;\n    }\n\n    public static String selectProjectUsers(int projectID) {\n        return \"select * from wikidev_projectroles where projectid=\" + projectID;\n    }\n\n    public static String selectTicketByDrID(int ticketid, int project) {\n        return \"select * from wikidev_tickets where project_ticket_id=\\'\" + ticketid + \"\\' AND project_id=\\'\" + project + \"\\'\";\n    }\n\n    public static String selectAllChangesetsForProject(int externalsystem) {\n        return \"select * from wikidev_changesets where externalsystem_id=\\'\" + externalsystem + \"\\'\";\n    }\n\n    public static String selectArtifactsForProjectBetweenDates(String entityType, String timestamp1, String timestamp2, int projectid, int page_namespace_id) {\n        String query = \"\";\n        if (entityType.equals(\"wikidev_tickets\")) {\n            query = \"select * from wikidev_tickets where ((created>=\\'\" + timestamp1 + \"\\'\" + \" AND created<=\\'\" + timestamp2 + \"\\') OR (last_modified>=\\'\" + timestamp1 + \"\\'\" + \" AND last_modified<=\\'\" + timestamp2 + \"\\'))\" + \" AND project_id=\\'\" + projectid + \"\\'\";\n        } else if (entityType.equals(\"wikidev_messages\")) {\n            query = \"select * from wikidev_messages where date>=\\'\" + timestamp1 + \"\\'\" + \" AND date<=\\'\" + timestamp2 + \"\\'\" + \" AND project_id=\\'\" + projectid + \"\\'\";\n        } else if (entityType.equals(\"mw_page\")) {\n            query = \"select * from mw_page where page_touched>=\\'\" + timestamp1 + \"\\'\" + \" AND page_touched<=\\'\" + timestamp2 + \"\\'\" + \" AND page_namespace=\\'\" + page_namespace_id + \"\\'\";\n        } else if (entityType.equals(\"wikidev_changesets\")) {\n            query = \"select * from wikidev_changesets where timestamp>=\\'\" + timestamp1 + \"\\'\" + \" AND timestamp<=\\'\" + timestamp2 + \"\\'\" + \" AND project_id=\" + projectid;\n        }\n        return query;\n    }\n\n    /*private static String getProjectName(int projectid) {\n\t\tif(projectid<10) {\n\t\t\treturn \"team0\"+projectid;\n\t\t}\n\t\telse {\n\t\t\treturn \"team\"+projectid;\n\t\t}\n\t}*/\n    public static String selectRevisionsByWikiID(int page_id) {\n        return \"select * from mw_revision where rev_page=\\'\" + page_id + \"\\'\";\n    }\n\n    public static String selectRevisionTextByRevisionID(int rev_id) {\n        return \"select CAST(old_text AS CHAR) from mw_text where old_id=\\'\" + rev_id + \"\\'\";\n    }\n\n    public static String selectProjectNamespaceByNamespaceID(int page_namespace_id) {\n        return \"select * from mw_an_extranamespaces where nsId=\\'\" + page_namespace_id + \"\\'\";\n    }\n\n    public static String selectProjectNamespaceByID(int projectid) {\n        return \"select * from wikidev_projects where projectid=\\'\" + projectid + \"\\'\";\n    }\n\n    public static String selectProjectNamespaceIDbyNamespace(String namespace) {\n        return \"select * from mw_an_extranamespaces where nsName=\\'\" + namespace + \"\\'\";\n    }\n\n    public static String selectCommunicationCitySnapshot(Timestamp timestamp, int projectid) {\n        return \"select * from wikidev_wikidev3d_communications_city where week=\\'\" + timestamp + \"\\' and project_id=\\'\" + projectid + \"\\'\";\n    }\n\n    public static String selectFileCitySnapshot(Timestamp timestamp, int projectid) {\n        return \"select * from wikidev_wikidev3d_files_city where week=\\'\" + timestamp + \"\\' and project_id=\\'\" + projectid + \"\\'\";\n    }\n\n    public static String selectUsersForBuilding(int id, String city_type) {\n        return \"select * from wikidev_wikidev3d_users where building_id=\\'\" + id + \"\\' and city_type=\\'\" + city_type + \"\\'\";\n    }\n\n    public static String selectCommunicationsBuildingHistory(String type, int artifactId, int projectid) {\n        return \"select * from wikidev_wikidev3d_communications_city where type=\\'\" + type + \"\\' and project_id=\\'\" + projectid + \"\\' and artifact_id=\\'\" + artifactId + \"\\'\";\n    }\n\n    public static String selectFilesBuildingHistory(String url) {\n        return \"select * from wikidev_wikidev3d_files_city where url=\\'\" + url + \"\\'\";\n    }\n\n    public static String selectCommunicationsCitySize(int projectid) {\n        return \"SELECT max( size ) AS size FROM (SELECT max( neighborhoodX ) AS size FROM wikidev_wikidev3d_communications_city AS a UNION SELECT max( neighborhoodY ) AS size FROM wikidev_wikidev3d_communications_city AS b)times\";\n    }\n\n    public static String selectFilesCitySize(int projectid) {\n        return \"SELECT max( size ) AS size FROM (SELECT max( neighborhoodX ) AS size FROM wikidev_wikidev3d_files_city AS a UNION SELECT max( neighborhoodY ) AS size FROM wikidev_wikidev3d_files_city AS b)times\";\n    }\n\n    public static String selectClusterIDsByBuilding(CommunicationBuildingData building) {\n        return \"select clusterid from wikidev_artifacts_in_clusters where type=\\'\" + building.getType() + \"\\' and id=\\'\" + building.getArtifact_id() + \"\\'\";\n    }\n\n    public static String selectClusterByID(int clusterid) {\n        return \"select * from wikidev_clusters where clusterid=\\'\" + clusterid + \"\\'\";\n    }\n\n    public static String selectArtifactsInCluster(Cluster cluster) {\n        return \"select type,id from wikidev_artifacts_in_clusters where clusterid=\\'\" + cluster.getClusterid() + \"\\'\";\n    }\n\n    public static String selectArtifactByTypeAndID(String type, int id, int projectid) {\n        String query = \"\";\n        if (type.equals(\"Ticket\")) {\n            query = \"select * from wikidev_tickets where id=\\'\" + id + \"\\'\";\n        } else if (type.equals(\"Message\")) {\n            query = \"select * from wikidev_messages where id=\\'\" + id + \"\\'\";\n        } else if (type.equals(\"Wiki\")) {\n            query = \"select * from mw_page where page_id=\\'\" + id + \"\\'\";\n        } else if (type.equals(\"ChangeSet\")) {\n            query = \"select * from wikidev_changesets where rev=\\'\" + id + \"\\' AND project_id=\\'\" + projectid + \"\\'\";\n        }\n        return query;\n    }\n}",
  "subClasses": []
}