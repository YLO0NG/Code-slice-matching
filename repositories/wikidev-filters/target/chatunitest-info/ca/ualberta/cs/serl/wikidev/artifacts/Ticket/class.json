{
  "fullClassName": "ca.ualberta.cs.serl.wikidev.artifacts.Ticket",
  "className": "Ticket",
  "index": 8,
  "modifier": "[public ]",
  "extend": "[IArtifact]",
  "implement": "[]",
  "packageName": "ca.ualberta.cs.serl.wikidev.artifacts",
  "packageDeclaration": "package ca.ualberta.cs.serl.wikidev.artifacts;",
  "classSignature": "public class Ticket",
  "hasConstructor": true,
  "isPublic": true,
  "isInterface": false,
  "isAbstract": false,
  "imports": [
    "import java.sql.Timestamp;",
    "import java.util.ArrayList;",
    "import java.util.HashMap;",
    "import java.util.HashSet;",
    "import java.util.Set;",
    "import java.util.TreeSet;",
    "import ca.ualberta.cs.serl.wikidev.Project;",
    "import ca.ualberta.cs.serl.wikidev.User;"
  ],
  "fields": [
    "public static final String TICKET_TYPE_TASK = \"task\";",
    "public static final String TICKET_TYPE_ENHANCEMENT = \"enhancement\";",
    "public static final String TICKET_TYPE_DEFECT = \"defect\";",
    "public static final String TICKET_PRIORITY_LOW = \"low\";",
    "public static final String TICKET_PRIORITY_MEDIUM = \"medium\";",
    "public static final String TICKET_PRIOhRITY_HIGH = \"high\";",
    "public static final String TICKET_STATUS_REJECTED = \"rejected\";",
    "public static final String TICKET_STATUS_OPEN = \"open\";",
    "public static final String TICKET_STATUS_COMPLETED = \"completed\";",
    "private int ticketID;",
    "private User reporter;",
    "private String summary;",
    "private String desription;",
    "private ArrayList<TicketChange> ticketChanges;",
    "private ArrayList<User> relatedUsers;",
    "private Timestamp dateOpened;",
    "private String ownerName;",
    "private String reporterName;",
    "private int project;",
    "private int project_ticket_id;",
    "private String priority;"
  ],
  "superClasses": [
    "IArtifact"
  ],
  "implementedTypes": [],
  "methodSigs": {
    "getPriority()": "0",
    "getDr_id()": "1",
    "setDr_id(int)": "2",
    "getProjectID()": "3",
    "setProject_name(int)": "4",
    "getOwnerName()": "5",
    "setOwnerName(String)": "6",
    "getReporterName()": "7",
    "setReporterName(String)": "8",
    "getTicketID()": "9",
    "getSummary()": "10",
    "getDesription()": "11",
    "getTicketChanges()": "12",
    "setTicketChanges(ArrayList)": "13",
    "getRelatedUsers()": "14",
    "getDateOpened()": "15",
    "getReporter()": "16",
    "setReporter(User)": "17",
    "getLastPriorityBeforeDate(Timestamp)": "18",
    "getNumberOfChangesBeforeDate(Timestamp)": "19",
    "setLastEditorAndTimeLastModifiedBeforeDate(Timestamp)": "20",
    "setTimeCreate(Timestamp)": "21",
    "getUserContributionBeforeDate(Timestamp, ArrayList)": "22",
    "getAssociatedUsers()": "23",
    "toString()": "24",
    "compareTo(IArtifact)": "25",
    "Ticket(Timestamp, String, Timestamp, String, String, String, int, int, int, String)": "26"
  },
  "methodsBrief": [
    "public int getPriority(){}",
    "public int getDr_id(){}",
    "public void setDr_id(int dr_id){}",
    "public int getProjectID(){}",
    "public void setProject_name(int project){}",
    "public String getOwnerName(){}",
    "public void setOwnerName(String ownerName){}",
    "public String getReporterName(){}",
    "public void setReporterName(String reporterName){}",
    "public int getTicketID(){}",
    "public String getSummary(){}",
    "public String getDesription(){}",
    "public ArrayList<TicketChange> getTicketChanges(){}",
    "public void setTicketChanges(ArrayList<TicketChange> ticketChanges){}",
    "public ArrayList<User> getRelatedUsers(){}",
    "public Timestamp getDateOpened(){}",
    "public User getReporter(){}",
    "public void setReporter(User reporter){}",
    "public String getLastPriorityBeforeDate(Timestamp timestamp){}",
    "public int getNumberOfChangesBeforeDate(Timestamp timestamp){}",
    "public void setLastEditorAndTimeLastModifiedBeforeDate(Timestamp timestamp){}",
    "public void setTimeCreate(Timestamp timestamp){}",
    "public HashMap<User, Double> getUserContributionBeforeDate(Timestamp timestamp, ArrayList<User> users){}",
    "@Override\r\n\tpublic Set<User> getAssociatedUsers(){}",
    "public String toString(){}",
    "public int compareTo(IArtifact o){}",
    "public Ticket(Timestamp dateOpened, String desription, Timestamp lastModified, String ownerName, \r\n\t\t\tString reporterName, String summary,\r\n\t\t\tint ticketID, int project, int dr_id, String priority){}"
  ],
  "constructorSigs": [
    "Ticket(Timestamp, String, Timestamp, String, String, String, int, int, int, String)"
  ],
  "constructorBrief": [
    "public Ticket(Timestamp dateOpened, String desription, Timestamp lastModified, String ownerName, \r\n\t\t\tString reporterName, String summary,\r\n\t\t\tint ticketID, int project, int dr_id, String priority){}"
  ],
  "getterSetterSigs": [
    "getPriority()",
    "getDr_id()",
    "setDr_id(int)",
    "getProjectID()",
    "setProject_name(int)",
    "getOwnerName()",
    "setOwnerName(String)",
    "getReporterName()",
    "setReporterName(String)",
    "getTicketID()",
    "getSummary()",
    "getDesription()",
    "getTicketChanges()",
    "setTicketChanges(ArrayList)",
    "getRelatedUsers()",
    "getDateOpened()",
    "getReporter()",
    "setReporter(User)",
    "setLastEditorAndTimeLastModifiedBeforeDate(Timestamp)",
    "setTimeCreate(Timestamp)",
    "getAssociatedUsers()"
  ],
  "getterSetterBrief": [
    "public int getPriority(){}",
    "public int getDr_id(){}",
    "public void setDr_id(int dr_id){}",
    "public int getProjectID(){}",
    "public void setProject_name(int project){}",
    "public String getOwnerName(){}",
    "public void setOwnerName(String ownerName){}",
    "public String getReporterName(){}",
    "public void setReporterName(String reporterName){}",
    "public int getTicketID(){}",
    "public String getSummary(){}",
    "public String getDesription(){}",
    "public ArrayList<TicketChange> getTicketChanges(){}",
    "public void setTicketChanges(ArrayList<TicketChange> ticketChanges){}",
    "public ArrayList<User> getRelatedUsers(){}",
    "public Timestamp getDateOpened(){}",
    "public User getReporter(){}",
    "public void setReporter(User reporter){}",
    "public void setLastEditorAndTimeLastModifiedBeforeDate(Timestamp timestamp){}",
    "public void setTimeCreate(Timestamp timestamp){}",
    "@Override\r\n\tpublic Set<User> getAssociatedUsers(){}"
  ],
  "constructorDeps": {
    "java.sql.Timestamp": [],
    "java.lang.String": []
  },
  "compilationUnitCode": "package ca.ualberta.cs.serl.wikidev.artifacts;\n\nimport java.sql.Timestamp;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Set;\nimport java.util.TreeSet;\nimport ca.ualberta.cs.serl.wikidev.Project;\nimport ca.ualberta.cs.serl.wikidev.User;\n\n/**\n * @author   User\n */\npublic class Ticket extends IArtifact {\n\n    public static final String TICKET_TYPE_TASK = \"task\";\n\n    public static final String TICKET_TYPE_ENHANCEMENT = \"enhancement\";\n\n    public static final String TICKET_TYPE_DEFECT = \"defect\";\n\n    public static final String TICKET_PRIORITY_LOW = \"low\";\n\n    public static final String TICKET_PRIORITY_MEDIUM = \"medium\";\n\n    public static final String TICKET_PRIOhRITY_HIGH = \"high\";\n\n    public static final String TICKET_STATUS_REJECTED = \"rejected\";\n\n    public static final String TICKET_STATUS_OPEN = \"open\";\n\n    public static final String TICKET_STATUS_COMPLETED = \"completed\";\n\n    /**\n     * @uml.property  name=\"ticketID\"\n     */\n    private int ticketID;\n\n    // private int externalSystemID;\n    /**\n     * @uml.property  name=\"reporter\"\n     * @uml.associationEnd\n     */\n    private User reporter;\n\n    // private String type;\n    /**\n     * @uml.property  name=\"summary\"\n     */\n    private String summary;\n\n    /**\n     * @uml.property  name=\"desription\"\n     */\n    private String desription;\n\n    // private String priority;\n    // private String status;\n    /**\n     * @uml.property  name=\"ticketChanges\"\n     */\n    private ArrayList<TicketChange> ticketChanges;\n\n    /**\n     * @uml.property  name=\"relatedUsers\"\n     */\n    private ArrayList<User> relatedUsers;\n\n    /**\n     * @uml.property  name=\"dateOpened\"\n     */\n    private Timestamp dateOpened;\n\n    /**\n     * @uml.property  name=\"ownerName\"\n     */\n    private String ownerName;\n\n    /**\n     * @uml.property  name=\"reporterName\"\n     */\n    private String reporterName;\n\n    /**\n     * @uml.property  name=\"project\"\n     */\n    private int project;\n\n    /**\n     * @uml.property  name=\"project_ticket_id\"\n     */\n    private int project_ticket_id;\n\n    private String priority;\n\n    public Ticket(Timestamp dateOpened, String desription, Timestamp lastModified, String ownerName, String reporterName, String summary, int ticketID, int project, int dr_id, String priority) {\n        this.dateOpened = dateOpened;\n        this.desription = desription;\n        this.timestamp = lastModified;\n        this.ownerName = ownerName;\n        this.reporterName = reporterName;\n        this.summary = summary;\n        this.ticketID = ticketID;\n        this.directlyRelatedArtifacts = new ArrayList<RelatedArtifact>();\n        // this.indirectlyRelatedArtifacts = new HashMap<IArtifact, HashMap<IArtifact, Integer>>();\n        this.project = project;\n        this.project_ticket_id = dr_id;\n        this.priority = priority;\n    }\n\n    public int getPriority() {\n        return Integer.parseInt(\"\" + priority.charAt(1));\n    }\n\n    public int getDr_id() {\n        return project_ticket_id;\n    }\n\n    public void setDr_id(int dr_id) {\n        this.project_ticket_id = dr_id;\n    }\n\n    public int getProjectID() {\n        return project;\n    }\n\n    public void setProject_name(int project) {\n        this.project = project;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"ownerName\"\n     */\n    public String getOwnerName() {\n        return ownerName;\n    }\n\n    /**\n     * @param ownerName\n     * @uml.property  name=\"ownerName\"\n     */\n    public void setOwnerName(String ownerName) {\n        this.ownerName = ownerName;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"reporterName\"\n     */\n    public String getReporterName() {\n        return reporterName;\n    }\n\n    /**\n     * @param reporterName\n     * @uml.property  name=\"reporterName\"\n     */\n    public void setReporterName(String reporterName) {\n        this.reporterName = reporterName;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"ticketID\"\n     */\n    public int getTicketID() {\n        return ticketID;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"summary\"\n     */\n    public String getSummary() {\n        return summary;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"desription\"\n     */\n    public String getDesription() {\n        return desription;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"ticketChanges\"\n     */\n    public ArrayList<TicketChange> getTicketChanges() {\n        return ticketChanges;\n    }\n\n    /**\n     * @param  ticketChanges\n     * @uml.property  name=\"ticketChanges\"\n     */\n    public void setTicketChanges(ArrayList<TicketChange> ticketChanges) {\n        this.ticketChanges = ticketChanges;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"relatedUsers\"\n     */\n    public ArrayList<User> getRelatedUsers() {\n        return relatedUsers;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"dateOpened\"\n     */\n    public Timestamp getDateOpened() {\n        return dateOpened;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"reporter\"\n     */\n    public User getReporter() {\n        return reporter;\n    }\n\n    /**\n     * @param  reporter\n     * @uml.property  name=\"reporter\"\n     */\n    public void setReporter(User reporter) {\n        this.reporter = reporter;\n    }\n\n    public String getLastPriorityBeforeDate(Timestamp timestamp) {\n        String p = \"\";\n        for (TicketChange change : this.ticketChanges) {\n            if (change.getTimestamp().before(timestamp) && change.getFieldChanged().equals(\"priority\")) {\n                p = change.getNewValue();\n            }\n        }\n        if (p.equals(\"\")) {\n            p = priority;\n        }\n        return p;\n    }\n\n    public int getNumberOfChangesBeforeDate(Timestamp timestamp) {\n        int count = 0;\n        for (TicketChange change : ticketChanges) {\n            if (change.getTimestamp().before(timestamp)) {\n                count++;\n            }\n        }\n        return count;\n    }\n\n    public void setLastEditorAndTimeLastModifiedBeforeDate(Timestamp timestamp) {\n        lastModified = created;\n        lastEditor = owner;\n        for (TicketChange change : ticketChanges) {\n            if (change.getTimestamp().before(timestamp) && change.getTimestamp().after(lastModified)) {\n                lastModified = change.getTimestamp();\n                lastEditor = change.getExternalAuthor();\n            }\n        }\n    }\n\n    public void setTimeCreate(Timestamp timestamp) {\n        created = dateOpened;\n    }\n\n    public HashMap<User, Double> getUserContributionBeforeDate(Timestamp timestamp, ArrayList<User> users) {\n        HashMap<User, Double> userChanges = new HashMap<User, Double>();\n        for (User user : users) {\n            if (user.equals(owner) || user.equals(reporter)) {\n                userChanges.put(user, 1.0);\n            } else {\n                userChanges.put(user, 0.0);\n            }\n        }\n        for (TicketChange change : ticketChanges) {\n            if (change.getTimestamp().before(timestamp)) {\n                userChanges.put(change.getExternalAuthor(), userChanges.get(change.getExternalAuthor()) + 1.0);\n            }\n        }\n        if (getNumberOfChangesBeforeDate(timestamp) != 0) {\n            for (User user : userChanges.keySet()) {\n                userChanges.put(user, userChanges.get(user) / ((double) getNumberOfChangesBeforeDate(timestamp) + 1.0));\n            }\n        }\n        return userChanges;\n    }\n\n    @Override\n    public Set<User> getAssociatedUsers() {\n        Set<User> users = new TreeSet<User>();\n        users.add(owner);\n        users.add(reporter);\n        for (TicketChange changes : ticketChanges) {\n            users.add(changes.getExternalAuthor());\n        }\n        return users;\n    }\n\n    public String toString() {\n        return \"Ticket\" + project_ticket_id + \" \" + super.toString();\n    }\n\n    public int compareTo(IArtifact o) {\n        if (o instanceof Ticket) {\n            if (this.equals((Ticket) o)) {\n                return 0;\n            } else {\n                return 1;\n            }\n        } else {\n            return 1;\n        }\n    }\n}\n",
  "classDeclarationCode": "/**\n * @author   User\n */\npublic class Ticket extends IArtifact {\n\n    public static final String TICKET_TYPE_TASK = \"task\";\n\n    public static final String TICKET_TYPE_ENHANCEMENT = \"enhancement\";\n\n    public static final String TICKET_TYPE_DEFECT = \"defect\";\n\n    public static final String TICKET_PRIORITY_LOW = \"low\";\n\n    public static final String TICKET_PRIORITY_MEDIUM = \"medium\";\n\n    public static final String TICKET_PRIOhRITY_HIGH = \"high\";\n\n    public static final String TICKET_STATUS_REJECTED = \"rejected\";\n\n    public static final String TICKET_STATUS_OPEN = \"open\";\n\n    public static final String TICKET_STATUS_COMPLETED = \"completed\";\n\n    /**\n     * @uml.property  name=\"ticketID\"\n     */\n    private int ticketID;\n\n    // private int externalSystemID;\n    /**\n     * @uml.property  name=\"reporter\"\n     * @uml.associationEnd\n     */\n    private User reporter;\n\n    // private String type;\n    /**\n     * @uml.property  name=\"summary\"\n     */\n    private String summary;\n\n    /**\n     * @uml.property  name=\"desription\"\n     */\n    private String desription;\n\n    // private String priority;\n    // private String status;\n    /**\n     * @uml.property  name=\"ticketChanges\"\n     */\n    private ArrayList<TicketChange> ticketChanges;\n\n    /**\n     * @uml.property  name=\"relatedUsers\"\n     */\n    private ArrayList<User> relatedUsers;\n\n    /**\n     * @uml.property  name=\"dateOpened\"\n     */\n    private Timestamp dateOpened;\n\n    /**\n     * @uml.property  name=\"ownerName\"\n     */\n    private String ownerName;\n\n    /**\n     * @uml.property  name=\"reporterName\"\n     */\n    private String reporterName;\n\n    /**\n     * @uml.property  name=\"project\"\n     */\n    private int project;\n\n    /**\n     * @uml.property  name=\"project_ticket_id\"\n     */\n    private int project_ticket_id;\n\n    private String priority;\n\n    public Ticket(Timestamp dateOpened, String desription, Timestamp lastModified, String ownerName, String reporterName, String summary, int ticketID, int project, int dr_id, String priority) {\n        this.dateOpened = dateOpened;\n        this.desription = desription;\n        this.timestamp = lastModified;\n        this.ownerName = ownerName;\n        this.reporterName = reporterName;\n        this.summary = summary;\n        this.ticketID = ticketID;\n        this.directlyRelatedArtifacts = new ArrayList<RelatedArtifact>();\n        // this.indirectlyRelatedArtifacts = new HashMap<IArtifact, HashMap<IArtifact, Integer>>();\n        this.project = project;\n        this.project_ticket_id = dr_id;\n        this.priority = priority;\n    }\n\n    public int getPriority() {\n        return Integer.parseInt(\"\" + priority.charAt(1));\n    }\n\n    public int getDr_id() {\n        return project_ticket_id;\n    }\n\n    public void setDr_id(int dr_id) {\n        this.project_ticket_id = dr_id;\n    }\n\n    public int getProjectID() {\n        return project;\n    }\n\n    public void setProject_name(int project) {\n        this.project = project;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"ownerName\"\n     */\n    public String getOwnerName() {\n        return ownerName;\n    }\n\n    /**\n     * @param ownerName\n     * @uml.property  name=\"ownerName\"\n     */\n    public void setOwnerName(String ownerName) {\n        this.ownerName = ownerName;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"reporterName\"\n     */\n    public String getReporterName() {\n        return reporterName;\n    }\n\n    /**\n     * @param reporterName\n     * @uml.property  name=\"reporterName\"\n     */\n    public void setReporterName(String reporterName) {\n        this.reporterName = reporterName;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"ticketID\"\n     */\n    public int getTicketID() {\n        return ticketID;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"summary\"\n     */\n    public String getSummary() {\n        return summary;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"desription\"\n     */\n    public String getDesription() {\n        return desription;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"ticketChanges\"\n     */\n    public ArrayList<TicketChange> getTicketChanges() {\n        return ticketChanges;\n    }\n\n    /**\n     * @param  ticketChanges\n     * @uml.property  name=\"ticketChanges\"\n     */\n    public void setTicketChanges(ArrayList<TicketChange> ticketChanges) {\n        this.ticketChanges = ticketChanges;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"relatedUsers\"\n     */\n    public ArrayList<User> getRelatedUsers() {\n        return relatedUsers;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"dateOpened\"\n     */\n    public Timestamp getDateOpened() {\n        return dateOpened;\n    }\n\n    /**\n     * @return\n     * @uml.property  name=\"reporter\"\n     */\n    public User getReporter() {\n        return reporter;\n    }\n\n    /**\n     * @param  reporter\n     * @uml.property  name=\"reporter\"\n     */\n    public void setReporter(User reporter) {\n        this.reporter = reporter;\n    }\n\n    public String getLastPriorityBeforeDate(Timestamp timestamp) {\n        String p = \"\";\n        for (TicketChange change : this.ticketChanges) {\n            if (change.getTimestamp().before(timestamp) && change.getFieldChanged().equals(\"priority\")) {\n                p = change.getNewValue();\n            }\n        }\n        if (p.equals(\"\")) {\n            p = priority;\n        }\n        return p;\n    }\n\n    public int getNumberOfChangesBeforeDate(Timestamp timestamp) {\n        int count = 0;\n        for (TicketChange change : ticketChanges) {\n            if (change.getTimestamp().before(timestamp)) {\n                count++;\n            }\n        }\n        return count;\n    }\n\n    public void setLastEditorAndTimeLastModifiedBeforeDate(Timestamp timestamp) {\n        lastModified = created;\n        lastEditor = owner;\n        for (TicketChange change : ticketChanges) {\n            if (change.getTimestamp().before(timestamp) && change.getTimestamp().after(lastModified)) {\n                lastModified = change.getTimestamp();\n                lastEditor = change.getExternalAuthor();\n            }\n        }\n    }\n\n    public void setTimeCreate(Timestamp timestamp) {\n        created = dateOpened;\n    }\n\n    public HashMap<User, Double> getUserContributionBeforeDate(Timestamp timestamp, ArrayList<User> users) {\n        HashMap<User, Double> userChanges = new HashMap<User, Double>();\n        for (User user : users) {\n            if (user.equals(owner) || user.equals(reporter)) {\n                userChanges.put(user, 1.0);\n            } else {\n                userChanges.put(user, 0.0);\n            }\n        }\n        for (TicketChange change : ticketChanges) {\n            if (change.getTimestamp().before(timestamp)) {\n                userChanges.put(change.getExternalAuthor(), userChanges.get(change.getExternalAuthor()) + 1.0);\n            }\n        }\n        if (getNumberOfChangesBeforeDate(timestamp) != 0) {\n            for (User user : userChanges.keySet()) {\n                userChanges.put(user, userChanges.get(user) / ((double) getNumberOfChangesBeforeDate(timestamp) + 1.0));\n            }\n        }\n        return userChanges;\n    }\n\n    @Override\n    public Set<User> getAssociatedUsers() {\n        Set<User> users = new TreeSet<User>();\n        users.add(owner);\n        users.add(reporter);\n        for (TicketChange changes : ticketChanges) {\n            users.add(changes.getExternalAuthor());\n        }\n        return users;\n    }\n\n    public String toString() {\n        return \"Ticket\" + project_ticket_id + \" \" + super.toString();\n    }\n\n    public int compareTo(IArtifact o) {\n        if (o instanceof Ticket) {\n            if (this.equals((Ticket) o)) {\n                return 0;\n            } else {\n                return 1;\n            }\n        } else {\n            return 1;\n        }\n    }\n}",
  "subClasses": []
}