{
  "targetClass": "ca.ualberta.cs.serl.wikidev.DataManager",
  "targetMethod": "getArtifactByTypeAndID(IArtifact, int)",
  "dependentFields": {
    "ca.ualberta.cs.serl.wikidev.artifacts.Message": "private int communicationID;\nprivate String subject;\nprivate String body;\nprivate int project_id;\nprivate String author;\nprivate String address;\nprivate int deleted;\nprivate String mid_header;\nprivate String user_name;\nprivate String refid_header;",
    "ca.ualberta.cs.serl.wikidev.artifacts.Wiki": "private int page_id;\nprivate int page_namespace_id;\nprivate int project;\nprivate String page_title;\nprivate ArrayList<WikiRevision> revisions;",
    "ca.ualberta.cs.serl.wikidev.artifacts.IArtifact": "protected ArrayList<RelatedArtifact> directlyRelatedArtifacts;\nprotected User owner;\nprotected Timestamp timestamp;\nprotected Project project;\nprotected Document document;\nprotected int index;\nprotected int uid;\nprotected double[] coords;\nprotected boolean enforced;\nprivate String type;\nprivate int id;\nprotected User lastEditor;\nprotected Timestamp lastModified;\nprotected Timestamp created;",
    "ca.ualberta.cs.serl.wikidev.artifacts.Ticket": "public static final String TICKET_TYPE_TASK = \"task\";\npublic static final String TICKET_TYPE_ENHANCEMENT = \"enhancement\";\npublic static final String TICKET_TYPE_DEFECT = \"defect\";\npublic static final String TICKET_PRIORITY_LOW = \"low\";\npublic static final String TICKET_PRIORITY_MEDIUM = \"medium\";\npublic static final String TICKET_PRIOhRITY_HIGH = \"high\";\npublic static final String TICKET_STATUS_REJECTED = \"rejected\";\npublic static final String TICKET_STATUS_OPEN = \"open\";\npublic static final String TICKET_STATUS_COMPLETED = \"completed\";\nprivate int ticketID;\nprivate User reporter;\nprivate String summary;\nprivate String desription;\nprivate ArrayList<TicketChange> ticketChanges;\nprivate ArrayList<User> relatedUsers;\nprivate Timestamp dateOpened;\nprivate String ownerName;\nprivate String reporterName;\nprivate int project;\nprivate int project_ticket_id;\nprivate String priority;",
    "ca.ualberta.cs.serl.wikidev.Project": "private int projectID;\nprivate String projectName;\nprivate Set<User> developers;\nprivate Set<User> managers;\nprivate Set<User> users;\nprivate Set<IArtifact> relatedArtifacts;\nprivate Set<String> classNames;\nprivate Set<Wiki> wikis;\nprivate Set<Ticket> tickets;\nprivate Set<Message> messages;\nprivate Set<ChangeSet> changesets;\nprivate int system;",
    "ca.ualberta.cs.serl.wikidev.DataManager": "private static final String databaseDriver = \"com.mysql.jdbc.Driver\";\nprivate static final String databaseName = \"jdbc:mysql://hypatia.cs.ualberta.ca/wikidev_ucosp\";\nprivate static final String[] entityTypes = {\"wikidev_changesets\", \"wikidev_tickets\", \"mw_page\", \"wikidev_messages\"};\npublic static final long WEEK_INTERVAL_IN_MILLIS = 604800000;\nprivate static Connection conn;\nprivate static Statement statement;\npublic static Set<Integer> userIDs;\npublic static Set<User> users;\npublic static Set<String> usernames;\npublic static Set<Integer> projectIDs;\npublic static Set<Project> projects;\npublic static Set<String> artifactURLs;\npublic static Set<IArtifact> allArtifacts;\npublic static Set<String> classNames;\npublic static Set<SourceClass> classes;\npublic static HashMap<Integer, Integer> ticketids;\npublic static Set<Ticket> tickets;\npublic static Set<Integer> systems;\npublic static Set<ChangeSet> changesets;\npublic static Set<Integer> commBuildingIDs;\npublic static Set<CommunicationBuildingData> commBuildings;\npublic static Set<Integer> fileBuildingIDs;\npublic static Set<FileBuildingData> fileBuildings;",
    "ca.ualberta.cs.serl.wikidev.artifacts.ChangeSet": "private int changeSetID;\nprivate int externalSystemID;\nprivate String comment;\nprivate String externalAuthorUserName;\nprivate int project;\nprivate int revision;\nprivate ArrayList<ChangeSetDetail> changesetDetails;",
    "ca.ualberta.cs.serl.wikidev.User": "public static final String ROLE_DEVELOPER = \"Developer\";\npublic static final String ROLE_MANAGER = \"Manager\";\nprivate int userID;\nprivate String userName;\nprivate String userRealName;\nprivate ArrayList<Project> projects;\nprivate HashMap<IArtifact, Integer> relatedArtifacts;\nprivate HashMap<Project, String> rolePerProject;\nprivate ArrayList<String> aliases;\nprivate int index;\nprivate Color color;",
    "ca.ualberta.cs.serl.wikidev.QueryBuilder": "public static final String SELECT_ALL_USERS = \"select * from mw_user\";\npublic static final String SELECT_ALL_PROJECTS = \"select * from wikidev_projects\";"
  },
  "dependentMethods": {
    "ca.ualberta.cs.serl.wikidev.artifacts.Message": "public String getUser_name(){}\npublic String getAuthor(){}",
    "ca.ualberta.cs.serl.wikidev.artifacts.Wiki": "public int getPage_id(){}\npublic void setProjectID(int project){}\npublic int getPage_namespace_id(){}",
    "ca.ualberta.cs.serl.wikidev.artifacts.IArtifact": "public int getId(){}\npublic Project getProject(){}\npublic void setOwner(User owner){}\npublic String getType(){}\npublic void setTimestamp(Timestamp timestamp){}\npublic void setProject(Project project){}\npublic Timestamp getTimestamp(){}\npublic void setType(String type){}",
    "ca.ualberta.cs.serl.wikidev.artifacts.Ticket": "public String getOwnerName(){}\npublic String getReporterName(){}\npublic void setReporter(User reporter){}\npublic int getTicketID(){}",
    "ca.ualberta.cs.serl.wikidev.Project": "public void addTicket(Ticket ticket){}\npublic void addChangeset(ChangeSet changeset){}\npublic int getProjectID(){}\npublic void addMessage(Message message){}",
    "ca.ualberta.cs.serl.wikidev.DataManager": "private static ArrayList<WikiRevision> getRevisionsByWikiID(int page_id) throws SQLException{}\npublic static Project getProjectByName(String projectName) throws SQLException{}\nprivate static String getProjectNamespaceByNamespaceID(int page_namespace_id) throws SQLException{}\npublic static User getUserByUserName(String userName) throws SQLException{}\npublic static ArrayList<ChangeSetDetail> getChangeSetDetailsByRevAndProject(int rev, int externalsystem_id) throws SQLException{}\npublic static Project getProjectByID(int projectID) throws SQLException{}\npublic static ArrayList<TicketChange> getTicketChangesByTicketID(int ticketID) throws SQLException{}",
    "ca.ualberta.cs.serl.wikidev.artifacts.ChangeSet": "public int getExternalSystemID(){}\npublic int getRevision(){}\npublic void setAuthorForChangeSetDetails(){}\npublic ArrayList<ChangeSetDetail> getChangesetDetails(){}\npublic String getExternalAuthorUserName(){}",
    "ca.ualberta.cs.serl.wikidev.User": "public void setUserRealName(String userRealName){}",
    "ca.ualberta.cs.serl.wikidev.QueryBuilder": "public static String selectArtifactByTypeAndID(String type, int id, int projectid){}"
  },
  "dependentMethodBodies": {
    "ca.ualberta.cs.serl.wikidev.artifacts.Message": "* @return\n\t * @uml.property  name=\"user_name\"\n\t \npublic String getUser_name() {\n\t\treturn user_name;\n\t}\n\n\t * @return\n\t * @uml.property  name=\"author\"\n\t \npublic String getAuthor() {\n\t\treturn author;\n\t}",
    "ca.ualberta.cs.serl.wikidev.artifacts.Wiki": "* @return\n\t * @uml.property  name=\"page_id\"\n\t \npublic int getPage_id() {\n\t\treturn page_id;\n\t}\n\n\t * @param project\n\t * @uml.property  name=\"project\"\n\t \npublic void setProjectID(int project) {\n\t\tthis.project = project;\n\t}\n\n\t * @return\n\t * @uml.property  name=\"page_namespace_id\"\n\t \npublic int getPage_namespace_id() {\n\t\treturn page_namespace_id;\n\t}",
    "ca.ualberta.cs.serl.wikidev.artifacts.IArtifact": "public int getId() {\n\t\tif(this instanceof ChangeSet) {\n\t\t\treturn ((ChangeSet)this).getRevision();\n\t\t}\n\t\telse if(this instanceof Ticket) {\n\t\t\treturn ((Ticket)this).getTicketID();\n\t\t}\n\t\telse if(this instanceof Wiki) {\n\t\t\treturn ((Wiki)this).getPage_id();\n\t\t}\n\t\telse if(this instanceof Message) {\n\t\t\treturn ((Message)this).getCommunicationID();\n\t\t}\n\t\telse {\n\t\t\treturn this.id;\n\t\t}\n\t}\n\n\t * @return\n\t * @uml.property  name=\"project\"\n\t \npublic Project getProject() {\n\t\treturn project;\n\t}\n\n\t * @return\n\t * @uml.property  name=\"owner\"\n\t \npublic void setOwner(User owner) {\n\t\tthis.owner = owner;\n\t}\npublic String getType() {\n\t\treturn type;\n\t}\n\n\t * @param timestamp\n\t * @uml.property  name=\"timestamp\"\n\t \npublic void setTimestamp(Timestamp timestamp) {\n\t\tthis.timestamp = timestamp;\n\t}\n\n\t * @param  project\n\t * @uml.property  name=\"project\"\n\t \npublic void setProject(Project project) {\n\t\tthis.project = project;\n\t}\n\n\t * @return\n\t * @uml.property  name=\"timestamp\"\n\t \npublic Timestamp getTimestamp() {\n\t\treturn timestamp;\n\t}\npublic void setType(String type) {\n\t\tthis.type = type;\n\t}",
    "ca.ualberta.cs.serl.wikidev.artifacts.Ticket": "* @return\n\t * @uml.property  name=\"ownerName\"\n\t \npublic String getOwnerName() {\n\t\treturn ownerName;\n\t}\n\n\t * @return\n\t * @uml.property  name=\"reporterName\"\n\t \npublic String getReporterName() {\n\t\treturn reporterName;\n\t}\n\n\t * @param  reporter\n\t * @uml.property  name=\"reporter\"\n\t \npublic void setReporter(User reporter) {\n\t\tthis.reporter = reporter;\n\t}\n\n\t * @return\n\t * @uml.property  name=\"ticketID\"\n\t \npublic int getTicketID() {\n\t\treturn ticketID;\n\t}",
    "ca.ualberta.cs.serl.wikidev.Project": "public void addTicket(Ticket ticket) {\n\t\tthis.tickets.add(ticket);\n\t}\npublic void addChangeset(ChangeSet changeset) {\n\t\tthis.changesets.add(changeset);\n\t}\n\n\t * @return\n\t * @uml.property  name=\"projectID\"\n\t \npublic int getProjectID() {\n\t\treturn projectID;\n\t}\npublic void addMessage(Message message) {\n\t\tthis.messages.add(message);\n\t}",
    "ca.ualberta.cs.serl.wikidev.DataManager": "private static ArrayList<WikiRevision> getRevisionsByWikiID(int page_id) throws SQLException {\n    \tArrayList<WikiRevision> revisions = new ArrayList<WikiRevision>();\n    \tString sqlStmt = QueryBuilder.selectRevisionsByWikiID(page_id);\n\t\tResultSet res = null;\n\t\tres = statement.executeQuery(sqlStmt);\n\t\twhile (res.next()) {\n\t\t\tWikiRevision wikiRevision = new WikiRevision(res.getInt(\"rev_id\"), res.getInt(\"rev_page\"), res.getInt(\"rev_text_id\")\n\t\t\t\t\t, res.getString(\"rev_user_text\"), res.getTimestamp(\"rev_timestamp\"));\n\t\t\trevisions.add(wikiRevision);\n\t\t}\n\t\tif(res != null) res.close();\n\t\tfor(WikiRevision revision : revisions) {\n\t\t\trevision.setRev_user(getUserByUserName(revision.getRev_user_text()));\n\t\t\trevision.setRev_text(getRevisionTextByRevisionID(revision.getRev_id()));\n\t\t}\n\t\treturn revisions;\n\t}\npublic static Project getProjectByName(String projectName) throws SQLException {\n    \tboolean found = false;\n    \tProject aProject = null;\n    \tfor(Project project : projects) {\n    \t\tif(project.getProjectName().equals(projectName)) {\n    \t\t\taProject = project;\n    \t\t\tfound = true;\n    \t\t}\n    \t}\n    \tif (!found) {\n\t\t\tString sqlStmt = QueryBuilder.selectProjectByName(projectName);\n\t\t\tResultSet res = null;\n\t\t\tres = statement.executeQuery(sqlStmt);\n\t\t\twhile (res.next()) {\n\t\t\t\taProject = new Project(res.getInt(\"projectid\"), res\n\t\t\t\t\t\t.getString(\"projectname\"));\n\t\t\t\t\n\t\t\t}\n\t\t\tif (res != null)\n\t\t\t\tres.close();\n\t\t\taProject.setUsers(getProjectUsers(aProject.getProjectID()));\n\t\t\taProject.setSystem(getExternalSystemByProjectID(aProject.getProjectID()));\n\t    \tprojects.add(aProject);\n\t\t\tprojectIDs.add(aProject.getProjectID());\n\t\t\tsystems.add(aProject.getSystem());\n\t\t}\n    \t\n    \treturn aProject;\n    }\nprivate static String getProjectNamespaceByNamespaceID(int page_namespace_id) throws SQLException {\n\t\tString namespace = \"\";\n\t\tString sqlStmt = QueryBuilder.selectProjectNamespaceByNamespaceID(page_namespace_id);\n\t\tResultSet res = null;\n\t\tres = statement.executeQuery(sqlStmt);\n\t\twhile(res.next()) {\n\t\t\tnamespace = res.getString(\"nsName\");\n\t\t}\n\t\tif(res != null) res.close();\n\t\treturn namespace;\n\t}\npublic static User getUserByUserName(String userName) throws SQLException {\n    \tUser user = null;\n    \tuserName = userName.toLowerCase();\n    \tif (!usernames.contains(userName)) {\n\t\t\tString sqlStmt = QueryBuilder.selectUserByUserName(userName);\n\t\t\tResultSet res = null;\n\t\t\tres = statement.executeQuery(sqlStmt);\n\t\t\twhile (res.next()) {\n\n\t\t\t\tuser = new User(res.getInt(\"user_id\"), res\n\t\t\t\t\t\t.getString(\"user_name\").toLowerCase(), res\n\t\t\t\t\t\t.getString(\"user_real_name\"));\n\t\t\t}\n\t\t\tif (res != null)\n\t\t\t\tres.close();\n\t\t\tif (user != null) {\n\t\t\t\tusers.add(user);\n\t\t\t\tuserIDs.add(user.getUserID());\n\t\t\t\tusernames.add(userName);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tuser = new User(userName);\n\t\t\t\tusers.add(user);\n\t\t\t\tuserIDs.add(user.getUserID());\n\t\t\t\tusernames.add(userName);\n\t\t\t}\n\t\t}\n    \telse {\n    \t\tfor(User aUser : users) {\n    \t\t\tif(aUser.getUserName().equalsIgnoreCase(userName)) {\n    \t\t\t\tuser = aUser;\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t}\n\t\t\treturn user;\n    }\npublic static ArrayList<ChangeSetDetail> getChangeSetDetailsByRevAndProject(int rev, int externalsystem_id) throws SQLException {\n    \tArrayList<ChangeSetDetail> changeSetDetails = new ArrayList<ChangeSetDetail>();\n    \tString sqlStmt = QueryBuilder.selectChangeSetDetailByRevAndProject(rev, externalsystem_id);\n\t\tResultSet res = null;\n\t\tres = statement.executeQuery(sqlStmt);\n\t\twhile (res.next()) {\n\t\t\tChangeSetDetail changeSetDetail = new ChangeSetDetail(res.getString(\"changetype\"), res.getInt(\"externalsystem_id\"), res.getString(\"filename\"), res.getInt(\"id\"), \n\t\t\t\t\tres.getString(\"kind\"), res.getInt(\"linesadded\"), res.getInt(\"lineschanged\"), res.getInt(\"linesremoved\"), res.getString(\"props\"), res.getInt(\"rev\"));\n\t\t\tchangeSetDetails.add(changeSetDetail);\n\t\t}\n\t\tif(res != null) res.close();\n\t\treturn changeSetDetails;\n    }\npublic static Project getProjectByID(int projectID) throws SQLException {\n    \tProject aProject = null;\n    \tif (!projectIDs.contains(projectID)) {\n\t\t\tString sqlStmt = QueryBuilder.selectProjectByID(projectID);\n\t\t\tResultSet res = null;\n\t\t\tres = statement.executeQuery(sqlStmt);\n\t\t\twhile (res.next()) {\n\t\t\t\taProject = new Project(res.getInt(\"projectid\"), res\n\t\t\t\t\t\t.getString(\"projectname\"));\n\t\t\t}\n\t\t\tif (res != null)\n\t\t\t\tres.close();\n\t\t\taProject.setUsers(getProjectUsers(projectID));\n\t\t\taProject.setSystem(getExternalSystemByProjectID(projectID));\n\t    \tprojects.add(aProject);\n\t\t\tprojectIDs.add(aProject.getProjectID());\n\t\t\tsystems.add(aProject.getSystem());\n\t\t}\n    \telse {\n    \t\tfor(Project project : projects) {\n    \t\t\tif(project.getProjectID() == projectID) {\n    \t\t\t\taProject = project;\n    \t\t\t}\n    \t\t}\n    \t}\n    \treturn aProject;\n    }\npublic static ArrayList<TicketChange> getTicketChangesByTicketID(int ticketID) throws SQLException {\n    \tArrayList<TicketChange> ticketChanges = new ArrayList<TicketChange>();\n    \tString sqlStmt = QueryBuilder.selectTicketChangesByTicketID(ticketID);\n\t\tResultSet res = null;\n\t\tres = statement.executeQuery(sqlStmt);\n\t\twhile (res.next()) {\n\t\t\tTicketChange ticketChange = new TicketChange(res.getString(\"author_name\"), res.getString(\"field_changed\"), res.getInt(\"id\")\n\t\t\t\t\t, res.getString(\"new_value\"), res.getString(\"old_value\"), res.getInt(\"project_ticket_id\"), res.getInt(\"ticket_id\"), res.getInt(\"project_id\"), res.getTimestamp(\"change_time\"));\n\t\t\tticketChanges.add(ticketChange);\n\t\t}\n\t\tif(res != null) res.close();\n\t\tfor(TicketChange ticketChange : ticketChanges) {\n\t\t\tticketChange.setExternalAuthor(getUserByUserName(ticketChange.getExternalAuthorUsername()));\n\t\t}\n\t\treturn ticketChanges;\n    }",
    "ca.ualberta.cs.serl.wikidev.artifacts.ChangeSet": "* @return\n\t * @uml.property  name=\"externalSystemID\"\n\t \npublic int getExternalSystemID() {\n\t\treturn externalSystemID;\n\t}\n\n\t * @return\n\t * @uml.property  name=\"revision\"\n\t \npublic int getRevision() {\n\t\treturn revision;\n\t}\npublic void setAuthorForChangeSetDetails() {\n\t\tfor(ChangeSetDetail changeSetDetail : this.changesetDetails) {\n\t\t\tchangeSetDetail.setOwner(this.owner);\n\t\t}\n\t}\npublic ArrayList<ChangeSetDetail> getChangesetDetails() {\n\t\treturn changesetDetails;\n\t}\n\n\t * @return\n\t * @uml.property  name=\"externalAuthorUserName\"\n\t \npublic String getExternalAuthorUserName() {\n\t\treturn externalAuthorUserName;\n\t}",
    "ca.ualberta.cs.serl.wikidev.User": "* @param userRealName\n\t * @uml.property  name=\"userRealName\"\n\t \npublic void setUserRealName(String userRealName) {\n\t\tthis.userRealName = userRealName;\n\t}",
    "ca.ualberta.cs.serl.wikidev.QueryBuilder": "public static String selectArtifactByTypeAndID(String type, int id, int projectid) {\n\t\tString query = \"\";\n\t\tif(type.equals(\"Ticket\")) {\n\t\t\tquery =  \"select * from wikidev_tickets where id=\\'\"+id+\"\\'\";\n\t\t}\n\t\telse if(type.equals(\"Message\")) {\n\t\t\tquery =  \"select * from wikidev_messages where id=\\'\"+id+\"\\'\";\n\t\t}\n\t\telse if(type.equals(\"Wiki\")) {\n\t\t\tquery =  \"select * from mw_page where page_id=\\'\"+id+\"\\'\";\n\t\t}\n\t\telse if(type.equals(\"ChangeSet\")) {\n\t\t\tquery =  \"select * from wikidev_changesets where rev=\\'\"+id+\"\\' AND project_id=\\'\"+projectid+\"\\'\";\n\t\t}\n\t\treturn query;\n\t}"
  }
}