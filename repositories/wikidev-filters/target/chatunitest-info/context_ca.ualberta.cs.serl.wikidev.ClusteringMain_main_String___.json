{
  "targetClass": "ca.ualberta.cs.serl.wikidev.ClusteringMain",
  "targetMethod": "main(String[])",
  "dependentFields": {
    "ca.ualberta.cs.serl.wikidev.RelationshipMiner": "private Set<Project> projectsChanged;\nprivate Set<IArtifact> artifactsChanged;\nprivate Set<User> usersChanged;\nprivate IArtifact sourceArtifact;\nprivate Project project;\nprivate ArrayList<Document> documents;\nprivate ArrayList<IArtifact> artifacts;",
    "ca.ualberta.cs.serl.wikidev.clustering.MultidimensionalScaling": "private double[][] betaMatrix;\nprivate double[][] alphaMatrix;\nprivate double[][] hMatrix;\nprivate double[][] distanceMatrix;\nprivate double[][] squareDistanceMatrix;\nprivate int dimensions;",
    "ca.ualberta.cs.serl.wikidev.clustering.SammonsProjection": "private int maxIteration;\nprivate double lambda = 1;\nprivate double[][] InputData;\nprivate int[] indicesI;\nprivate int[] indicesJ;\nprivate int OutputDimension;\nprotected double[][] _distanceMatrix;\nprivate int Count;\nprivate double[][] Projection;\nprivate int Iteration;",
    "ca.ualberta.cs.serl.wikidev.clustering.Cluster": "private ArrayList<IArtifact> artifacts;\nprivate HashMap<IArtifact, ClusterPoint> coordinates;\nprivate HashSet<User> users;\nprivate HashSet<String> words;\nprivate Timestamp fromdate;\nprivate Timestamp todate;\nprivate int project;\nprivate int index;\nprivate String cluster_set_name;\nprivate double threshold;\nprivate int clusterid;\nprivate String projectname;",
    "ca.ualberta.cs.serl.wikidev.InvocationParser": "private String databaseName;\nprivate String username;\nprivate String password;\nprivate String fromdate;\nprivate String todate;\nprivate int project;\nprivate double lowerBound;\nprivate double upperBound;\nprivate double interval;\nprivate String window;",
    "ca.ualberta.cs.serl.wikidev.clustering.Clustering": "protected ArrayList<ArrayList<Double>> distanceList;\nprotected double[][] distanceMatrix;",
    "ca.ualberta.cs.serl.wikidev.DataManager": "private static final String databaseDriver = \"com.mysql.jdbc.Driver\";\nprivate static final String databaseName = \"jdbc:mysql://hypatia.cs.ualberta.ca/wikidev_ucosp\";\nprivate static final String[] entityTypes = {\"wikidev_changesets\", \"wikidev_tickets\", \"mw_page\", \"wikidev_messages\"};\npublic static final long WEEK_INTERVAL_IN_MILLIS = 604800000;\nprivate static Connection conn;\nprivate static Statement statement;\npublic static Set<Integer> userIDs;\npublic static Set<User> users;\npublic static Set<String> usernames;\npublic static Set<Integer> projectIDs;\npublic static Set<Project> projects;\npublic static Set<String> artifactURLs;\npublic static Set<IArtifact> allArtifacts;\npublic static Set<String> classNames;\npublic static Set<SourceClass> classes;\npublic static HashMap<Integer, Integer> ticketids;\npublic static Set<Ticket> tickets;\npublic static Set<Integer> systems;\npublic static Set<ChangeSet> changesets;\npublic static Set<Integer> commBuildingIDs;\npublic static Set<CommunicationBuildingData> commBuildings;\npublic static Set<Integer> fileBuildingIDs;\npublic static Set<FileBuildingData> fileBuildings;"
  },
  "dependentMethods": {
    "ca.ualberta.cs.serl.wikidev.RelationshipMiner": "public double[][] getDistanceMatrix(){}\npublic void getRelationships() throws SQLException{}",
    "ca.ualberta.cs.serl.wikidev.clustering.MultidimensionalScaling": "public double[][] cMDS(){}",
    "ca.ualberta.cs.serl.wikidev.clustering.SammonsProjection": "public void CreateMapping()\r\n{}\npublic double[][] getProjection(){}",
    "ca.ualberta.cs.serl.wikidev.clustering.Cluster": "public void setTodate(Timestamp todate){}\npublic void setThreshold(double threshold){}\npublic void setUsersAndWords(){}\npublic void setIndex(int index){}\npublic ArrayList<IArtifact> getArtifacts(){}\npublic void setCluster_set_name(String cluster_set_name){}\npublic void setProject(int project){}\npublic void addCoordinate(IArtifact artifact, ClusterPoint point){}\npublic void setFromdate(Timestamp fromdate){}",
    "ca.ualberta.cs.serl.wikidev.InvocationParser": "public double getUpperBound(){}\npublic int getProject(){}\npublic String getPassword(){}\npublic double getLowerBound(){}\npublic String getUsername(){}\npublic double getInterval(){}\npublic String getFromdate(){}\npublic String getTodate(){}\npublic String getWindow(){}\npublic void parseArgs(String[] args){}\npublic String getDatabaseName(){}",
    "ca.ualberta.cs.serl.wikidev.clustering.Clustering": "public static Clustering getInstance(int type, double[][] distanceMatrix, double threshold){}",
    "ca.ualberta.cs.serl.wikidev.DataManager": "public static ArrayList<IArtifact> getArtifactsBetweenDates(String timestamp1, String timestamp2, int projectid) throws SQLException{}\npublic static void closeTheConnection() throws SQLException{}\npublic static void writeCluster(Cluster cluster) throws SQLException{}\npublic static void writeClusterPerProject(int projectid, int clustered, int total, String fromdate, String todate, String cluster_set_name, double threshold) throws SQLExceptio{}\npublic static void openTheConnection(String username, String password, String databaseName) throws Exceptio{}"
  },
  "dependentMethodBodies": {
    "ca.ualberta.cs.serl.wikidev.RelationshipMiner": "public double[][] getDistanceMatrix() {\n\t\tdouble[][] distanceMatrix = getSimilarityMatrix();\n\t\tfor (int l = 0; l < 10; l++) {\n\t\t\tfor (int j = 0; j < distanceMatrix.length; j++) {\n\t\t\t\tdouble vector[] = MatrixOperator.getColumn(distanceMatrix, j);\n\t\t\t\tfor (int i = 0; i < distanceMatrix.length; i++) {\n\t\t\t\t\tfor (int k = i + 1; k < distanceMatrix.length; k++) {\n\t\t\t\t\t\tif (vector[i] != 0 && vector[k] != 0) {\n\t\t\t\t\t\t\tdouble value = vector[i] + vector[k];\n\t\t\t\t\t\t\tif (value < distanceMatrix[i][k]) {\n\t\t\t\t\t\t\t\tdistanceMatrix[i][k] = value;\n\t\t\t\t\t\t\t\tdistanceMatrix[k][i] = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn distanceMatrix;\n\t}\npublic void getRelationships() throws SQLException {\n\t\tArrayList<String> buffers = new ArrayList<String>();\n\t\tfor(IArtifact artifact : artifacts) {\n\t\t\t\n\t\t\tif(artifact instanceof Ticket) {\n\t\t\t\tTextParser parser = new TextParser();\n\t\t\t\tTicket ticket = (Ticket)artifact;\n\t\t\t\tparser.parseTextInWords(ticket.getDesription().toLowerCase());\n\t\t\t\tparser.parseTextInWords(ticket.getSummary().toLowerCase());\n\t\t\t\tdocuments.add(new Document(parser.getWords(), ticket.toString()));\n\t\t\t\tticket.setDocument(new Document(parser.getWords(), ticket.toString()));\n\t\t\t}\n\t\t\telse if(artifact instanceof ChangeSet) {\n\t\t\t\tTextParser parser = new TextParser();\n\t\t\t\tChangeSet changeset = (ChangeSet)artifact;\n\t\t\t\t//relateChangeSetToTicket(changeset);\n\t\t\t\tparser.parseTextInWords(changeset.getComment().toLowerCase());\n\t\t\t\tdocuments.add(new Document(parser.getWords(), changeset.toString()));\n\t\t\t\tchangeset.setDocument(new Document(parser.getWords(), changeset.toString()));\n\t\t\t}\n\t\t\telse if (artifact instanceof Message) {\n\t\t\t\tTextParser parser = new TextParser();\n\t\t\t\tMessage communication = (Message)artifact;\n\t\t\t\tparser.parseTextInWords(communication.getSubject().toLowerCase());\n\t\t\t\tparser.parseTextInWords(communication.getBody().toLowerCase());\n\t\t\t\tdocuments.add(new Document(parser.getWords(), communication.toString()));\n\t\t\t\tcommunication.setDocument(new Document(parser.getWords(), communication.toString()));\n\t\t\t}\n\t\t\telse if (artifact instanceof Wiki) {\n\t\t\t\tWiki wiki = (Wiki)artifact;\n\t\t\t\t\tTextParser parser = new TextParser();\n\t\t\t\t\tString text = \"\";\n\t\t\t\t\tfor (WikiRevision revision : wiki.getRevisions()) {\n\t\t\t\t\t\ttext += revision.getRev_text();\n\t\t\t\t\t}\n\t\t\t\t\tparser.parseTextInWords(text.toLowerCase());\n\t\t\t\t\tdocuments.add(new Document(parser.getWords(), wiki.toString()));\n\t\t\t\t\twiki.setDocument(new Document(parser.getWords(), wiki.toString()));\n\t\t\t}\n\t\t}\n\t\t\n\t\tfor(IArtifact artifact : artifacts) {\n\t\t\t\n\t\t\tif(artifact instanceof Ticket) {\n\t\t\t\tTextParser parser = new TextParser(documents);\n\t\t\t\tTicket ticket = (Ticket)artifact;\n\t\t\t\tparser.parseTextInWords(ticket.getDesription().toLowerCase());\n\t\t\t\tparser.parseTextInWords(ticket.getSummary().toLowerCase());\n\t\t\t\tticket.getDocument().setTfidf(parser.calculateTFIDF());\n\t\t\t}\n\t\t\telse if(artifact instanceof ChangeSet) {\n\t\t\t\tTextParser parser = new TextParser(documents);\n\t\t\t\tChangeSet changeset = (ChangeSet)artifact;\n\t\t\t\tparser.parseTextInWords(changeset.getComment().toLowerCase());\n\t\t\t\tchangeset.getDocument().setTfidf(parser.calculateTFIDF());\n\t\t\t}\n\t\t\telse if (artifact instanceof Message) {\n\t\t\t\tTextParser parser = new TextParser(documents);\n\t\t\t\tMessage communication = (Message)artifact;\n\t\t\t\tparser.parseTextInWords(communication.getSubject().toLowerCase());\n\t\t\t\tparser.parseTextInWords(communication.getBody().toLowerCase());\n\t\t\t\tcommunication.getDocument().setTfidf(parser.calculateTFIDF());\n\t\t\t}\n\t\t\telse if (artifact instanceof Wiki) {\n\t\t\t\tWiki wiki = (Wiki)artifact;\n\t\t\t\t\tTextParser parser = new TextParser(documents);\n\t\t\t\t\tString text = \"\";\n\t\t\t\t\tfor (WikiRevision revision : wiki.getRevisions()) {\n\t\t\t\t\t\ttext += revision.getRev_text();\n\t\t\t\t\t}\n\t\t\t\t\tparser.parseTextInWords(text.toLowerCase());\n\t\t\t\t\twiki.getDocument().setTfidf(parser.calculateTFIDF());\n\t\t\t}\n\t\t}\n\t\t\n\t\tfor(IArtifact artifact : artifacts) {\n\t\t\tSystem.out.println(\"Relationships: \"+artifact.toString());\n\t\t\t\n\t\t\tsourceArtifact = artifact;\n\t\t\tproject = artifact.getProject();\n\t\t\tgetGenericRelationships(sourceArtifact);\n\t\t\tif(sourceArtifact instanceof Ticket) {\n\t\t\t\tTextParser parser = new TextParser(documents);\n\t\t\t\tTicket ticket = (Ticket)sourceArtifact;\n\t\t\t\tparser.parseTextInWords(ticket.getDesription().toLowerCase());\n\t\t\t\tbuffers.add(ticket.getDesription().toLowerCase());\n\t\t\t\tparser.parseTextInWords(ticket.getSummary().toLowerCase());\n\t\t\t\tbuffers.add(ticket.getSummary().toLowerCase());\n\t\t\t\tmineRelationshipsFromText();\n\t\t\t\t/*for(URL url : parser.getUrls()) {\n\t\t\t\t\tmineRelationshipsFromURL(url);\n\t\t\t\t}*/\n\t\t\t}\n\t\t\telse if(sourceArtifact instanceof ChangeSet) {\n\t\t\t\tTextParser parser = new TextParser(documents);\n\t\t\t\tChangeSet changeset = (ChangeSet)sourceArtifact;\n\t\t\t\t//relateChangeSetToTicket(changeset);\n\t\t\t\tparser.parseTextInWords(changeset.getComment().toLowerCase());\n\t\t\t\tbuffers.add(changeset.getComment().toLowerCase());\n\t\t\t\tmineRelationshipsFromText();\n\t\t\t\t/*for(URL url : parser.getUrls()) {\n\t\t\t\t\tmineRelationshipsFromURL(url);\n\t\t\t\t}*/\n\t\t\t\t\n\t\t\t}\n\t\t\telse if (sourceArtifact instanceof Message) {\n\t\t\t\tTextParser parser = new TextParser(documents);\n\t\t\t\tMessage communication = (Message)sourceArtifact;\n\t\t\t\tparser.parseTextInWords(communication.getSubject().toLowerCase());\n\t\t\t\tbuffers.add(communication.getSubject().toLowerCase());\n\t\t\t\tparser.parseTextInWords(communication.getBody().toLowerCase());\n\t\t\t\tbuffers.add(communication.getBody().toLowerCase());\n\t\t\t\tmineRelationshipsFromText();\n\t\t\t\t/*for(URL url : parser.getUrls()) {\n\t\t\t\t\tmineRelationshipsFromURL(url);\n\t\t\t\t}*/\n\t\t\t}\n\t\t\telse if (sourceArtifact instanceof Wiki) {\n\t\t\t\tWiki wiki = (Wiki)sourceArtifact;\n\t\t\t\t\tTextParser parser = new TextParser(documents);\n\t\t\t\t\tString text = \"\";\n\t\t\t\t\tfor (WikiRevision revision : wiki.getRevisions()) {\n\t\t\t\t\t\ttext += revision.getRev_text();\n\t\t\t\t\t}\n\t\t\t\t\tparser.parseTextInWords(text.toLowerCase());\n\t\t\t\t\tbuffers.add(text.toLowerCase());\n\t\t\t\t\tmineRelationshipsFromText();\n\t\t\t}\n\t\t}\n\t\t//saveResults(buffers, project.toString());\n\t\t//System.out.println(\"done\");\n\t}",
    "ca.ualberta.cs.serl.wikidev.clustering.MultidimensionalScaling": "public double[][] cMDS() {\n\t\t//dimensions = 2;\n\t\t\n\t\tgetHMatrix();\n\t\tdouble[][] B = getNewBetaMatrix();\n\t\tdouble[] eigenValues = MatrixOperator.getEigenValues(B);\n\t\tdouble[][] eigenVectors = MatrixOperator.getEigenVectors(B);\n\t\tfor(int k=0; k<eigenValues.length; k++) {\n\t\t\tif(eigenValues[k] < 0) {\n\t\t\t\teigenValues[k] = 0;\n\t\t\t}\n\t\t}\n\t\tfor(int k=0; k<eigenValues.length; k++) {\n\t\t\tif(eigenValues[k] > 0) {\n\t\t\t\tdimensions++;\n\t\t\t}\n\t\t}\n\t\t//dimensions = 2;\n\t\tdouble[][] coordinates = new double[distanceMatrix.length][dimensions];\n\t\tdouble[] sqrtEigenValues = MatrixOperator.vectorPower(eigenValues, 1.0/2.0);\n\t\tdouble[][] eigenValuesDiagonal = MatrixOperator.diagonal(sqrtEigenValues);\n\t\tdouble[][] x = MatrixOperator.matrixProduct(eigenVectors, eigenValuesDiagonal);\n\t\t/*for(int i=0;i<distanceMatrix.length;i++) {\n\t\t\tfor(int j=0;j<dimensions;j++) {\n\t\t\t\tif(eigenVectors[j][i] >= 0.0) {\n\t\t\t\t\tcoordinates[i][j] = (float)eigenVectors[j][i];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcoordinates[i][j] = (float)-eigenVectors[j][i];\n\t\t\t\t}\n\t\t\t}\n\t\t}*/\n\t\tArrayList<Integer> indices = new ArrayList<Integer>();\n\t\tint counter = 0;\n\t\tfor(int i=0; i<x.length;i++) {\n\t\t\tif(x[0][i] != 0.0) {\n\t\t\t\tindices.add(i);\n\t\t\t\tcounter++;\n\t\t\t}\n\t\t\tif(counter == dimensions) break;\n\t\t}\n\t\tif (!indices.isEmpty()) {\n\t\t\tfor (int i = 0; i < x.length; i++) {\n\t\t\t\tfor (int j = 0; j < indices.size(); j++) {\n\t\t\t\t\tcoordinates[i][j] = x[i][indices.get(j)];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn coordinates;\n\t\t}\n\t\telse {\n\t\t\treturn coordinates;\n\t\t}\n\t\t\t\n\t}",
    "ca.ualberta.cs.serl.wikidev.clustering.SammonsProjection": "public void CreateMapping()\n\t{\n\t\tfor (int i = maxIteration; i >= 0; i--)\n\t\t\tthis.Iterate();\n\t}\npublic double[][] getProjection() {\n\t\treturn Projection;\n\t}",
    "ca.ualberta.cs.serl.wikidev.clustering.Cluster": "* @param todate\n\t * @uml.property  name=\"todate\"\n\t \npublic void setTodate(Timestamp todate) {\n\t\tthis.todate = todate;\n\t}\npublic void setThreshold(double threshold) {\n\t\tthis.threshold = threshold;\n\t}\npublic void setUsersAndWords() {\n\t\tfor(IArtifact artifact1 : artifacts) {\n\t\t\tusers.addAll(artifact1.getAssociatedUsers());\n\t\t\tfor(IArtifact artifact2 : artifacts) {\n\t\t\t\tif(artifact1.containsRelatedArtifact(artifact2)) {\n\t\t\t\t\twords.add(artifact1.getRelatedArtifact(artifact2).getWord());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t * @param index\n\t * @uml.property  name=\"index\"\n\t \npublic void setIndex(int index) {\n\t\tthis.index = index;\n\t}\npublic ArrayList<IArtifact> getArtifacts() {\n\t\treturn artifacts;\n\t}\npublic void setCluster_set_name(String cluster_set_name) {\n\t\tthis.cluster_set_name = cluster_set_name;\n\t}\n\n\t * @param project\n\t * @uml.property  name=\"project\"\n\t \npublic void setProject(int project) {\n\t\tthis.project = project;\n\t}\npublic void addCoordinate(IArtifact artifact, ClusterPoint point) {\n\t\tcoordinates.put(artifact, point);\n\t}\n\n\t * @param fromdate\n\t * @uml.property  name=\"fromdate\"\n\t \npublic void setFromdate(Timestamp fromdate) {\n\t\tthis.fromdate = fromdate;\n\t}",
    "ca.ualberta.cs.serl.wikidev.InvocationParser": "public double getUpperBound() {\n\t\treturn upperBound;\n\t}\npublic int getProject() {\n\t\treturn project;\n\t}\npublic String getPassword() {\n\t\treturn password;\n\t}\npublic double getLowerBound() {\n\t\treturn lowerBound;\n\t}\npublic String getUsername() {\n\t\treturn username;\n\t}\npublic double getInterval() {\n\t\treturn interval;\n\t}\npublic String getFromdate() {\n\t\treturn fromdate;\n\t}\npublic String getTodate() {\n\t\treturn todate;\n\t}\npublic String getWindow() {\n\t\treturn window;\n\t}\npublic void parseArgs(String[] args) {\n\t\tif(args.length < 7) {\n\t\t\tSystem.out.println(\"Please specify all required arguments (database, username, password, from date, to date, project and time window type\");\n\t\t\tSystem.exit(1);\n\t\t}\n\t\tthis.databaseName = args[0];\n\t\tthis.username = args[1];\n\t\tthis.password = args[2];\n\t\ttry {\n\t\t\tTimestamp.valueOf(args[3]);\n\t\t\tTimestamp.valueOf(args[4]);\n\t\t}\n\t\tcatch(IllegalArgumentException e) {\n\t\t\tSystem.out.println(\"Please specify the date in the format yyyy-mm-dd hh:mm:ss\");\n\t\t\tSystem.exit(1);\n\t\t}\n\t\tthis.fromdate = args[3];\n\t\tthis.todate = args[4];\n\t\ttry {\n\t\t\tthis.project = Integer.parseInt(args[5]);\n\t\t}\n\t\tcatch(NumberFormatException e) {\n\t\t\tSystem.out.println(\"Please specify the project id.\");\n\t\t\tSystem.exit(1);\n\t\t}\n\t\tthis.window = args[6];\n\t\tint i=7;\n\t\twhile(i<args.length) {\n\t\t\tif(args[i].equals(\"-lb\")) {\n\t\t\t\ti++;\n\t\t\t\tif(Double.parseDouble(args[i]) >=0.0) {\n\t\t\t\t\tthis.lowerBound = Double.parseDouble(args[i]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tSystem.out.println(\"The lower bound cannot be less than 0.0\");\n\t\t\t\t\tSystem.exit(1);\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t\telse if(args[i].equals(\"-ub\")) {\n\t\t\t\ti++;\n\t\t\t\tif(Double.parseDouble(args[i]) <= 1.0) {\n\t\t\t\t\tthis.upperBound = Double.parseDouble(args[i]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tSystem.out.println(\"The upper bound cannot be more than 1.0\");\n\t\t\t\t\tSystem.exit(1);\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t\telse if(args[i].equals(\"-i\")) {\n\t\t\t\ti++;\n\t\t\t\tif(Double.parseDouble(args[i]) >=0.01) {\n\t\t\t\t\tthis.interval = Double.parseDouble(args[i]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tSystem.out.println(\"The interval cannot be less than 0.01\");\n\t\t\t\t\tSystem.exit(1);\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\t}\npublic String getDatabaseName() {\n\t\treturn databaseName;\n\t}",
    "ca.ualberta.cs.serl.wikidev.clustering.Clustering": "public static Clustering getInstance(int type, double[][] distanceMatrix, double threshold) {\n\t\treturn new Hierarchical(distanceMatrix, threshold);\n\t}",
    "ca.ualberta.cs.serl.wikidev.DataManager": "public static ArrayList<IArtifact> getArtifactsBetweenDates(String timestamp1, String timestamp2, int projectid) throws SQLException {\n    \tArrayList<IArtifact> artifacts = new ArrayList<IArtifact>();\n    \tArrayList<IArtifact> finalArtifacts = new ArrayList<IArtifact>();\n    \tProject project = getProjectByID(projectid);\n    \tint namespaceID = DataManager.getProjectNamespaceIDByProjectID(projectid);\n    \tfor(ChangeSet changeset : changesets) {\n    \t\tif(changeset.getTimestamp().compareTo(Timestamp.valueOf(timestamp1))>=0 && changeset.getTimestamp().compareTo(Timestamp.valueOf(timestamp2))<=0) {\n    \t\t\tfinalArtifacts.add(changeset);\n    \t\t}\n    \t}\n    \tIArtifact artifact = null;\n    \tfor (int i = 0; i < entityTypes.length; i++) {\n    \t\tString entityType = entityTypes[i];\n    \t\tString nullString = \"\";\n    \t\tif(entityType.equals(\"mw_page\")) {\n    \t\t\ttimestamp1 = removeChar(timestamp1, '-');\n    \t\t\ttimestamp1 = removeChar(timestamp1, ' ');\n    \t\t\ttimestamp1 = removeChar(timestamp1, ':');\n    \t\t\ttimestamp2 = removeChar(timestamp2, '-');\n    \t\t\ttimestamp2 = removeChar(timestamp2, ' ');\n    \t\t\ttimestamp2 = removeChar(timestamp2, ':');\n    \t\t}\n\t\t\tString sqlStmt = QueryBuilder.selectArtifactsForProjectBetweenDates(entityType, timestamp1, timestamp2, projectid, namespaceID);\n\t\t\tResultSet res = null;\n\t\t\tres = statement.executeQuery(sqlStmt);\n\t\t\twhile (res.next()) {\n\t\t\t\tif (entityType.equals(\"wikidev_changesets\")) {\n\t\t\t\t\tartifact = new ChangeSet(res.getInt(\"id\"), res\n\t\t\t\t\t\t\t.getString(\"comment\"), res\n\t\t\t\t\t\t\t.getString(\"externalauthor\"), res\n\t\t\t\t\t\t\t.getInt(\"externalsystem_id\"), res\n\t\t\t\t\t\t\t.getTimestamp(\"timestamp\"), res.getInt(\"rev\"),\n\t\t\t\t\t\t\tres.getInt(\"project_id\"));\n\t\t\t\t\tartifacts.add(artifact);\n\t\t\t\t} else if (entityType.equals(\"wikidev_tickets\")) {\n\t\t\t\t\tartifact = new Ticket(res.getTimestamp(\"created\"), res\n\t\t\t\t\t\t\t.getString(\"description\"), res\n\t\t\t\t\t\t\t.getTimestamp(\"last_modified\"), res.getString(\"owner_name\"), res.getString(\"reporter\"), \n\t\t\t\t\t\t\tres.getString(\"summary\"),\n\t\t\t\t\t\t\tres.getInt(\"id\"), res.getInt(\"project_id\"), res.getInt(\"project_ticket_id\"), res.getString(\"priority\"));\n\t\t\t\t\tartifacts.add(artifact);\n\t\t\t\t} else if (entityType.equals(\"mw_page\")) {\n\t\t\t\t\tartifact = new Wiki(res.getInt(\"page_id\"), res.getInt(\"page_namespace\"), res.getString(\"page_title\"), res.getTimestamp(\"page_touched\"));\n\t\t\t\t\tartifacts.add(artifact);\n\t\t\t\t}\n\t\t\t\telse if(entityType.equals(\"wikidev_messages\")) {\n                \tartifact = new Message(res.getString(\"address\"), res.getString(\"author\"), res.getString(\"body\"), res.getInt(\"id\"),\n\t\t\t\t\t\t\tres.getInt(\"deleted\"), res.getString(\"mid_header\"), \n\t\t\t\t\t\t\tres.getInt(\"project_id\"),  res.getString(\"subject\"), res.getTimestamp(\"date\"), res.getString(\"user_name\"), res.getString(\"refid_header\"));;\n                \tartifacts.add(artifact);\n                }\n\t\t\t}\n\t\t\tif(res !=null) res.close();\n\t\t\t\n\t\t}\n    \tfor (IArtifact anArtifact : artifacts) {\n    \t\tif (anArtifact instanceof ChangeSet) {\n\t\t\t\tChangeSet changeSet = (ChangeSet)anArtifact;\n\t\t\t\tchangeSet.setOwner(getUserByUserName(changeSet.getExternalAuthorUserName()));\n\t\t\t\tchangeSet.setProject(project);\n\t\t\t\tchangeSet.setChangesetDetails(getChangeSetDetailsByRevAndProject(changeSet.getRevision(), changeSet.getExternalSystemID()));\n\t\t\t\tfor(ChangeSetDetail detail : changeSet.getChangesetDetails()) {\n\t\t\t\t\tdetail.setTimestamp(changeSet.getTimestamp());\n\t\t\t\t}\n\t\t\t\tchangeSet.setAuthorForChangeSetDetails();\n\t\t\t\tfinalArtifacts.add(changeSet);\n\t\t\t\tproject.addChangeset(changeSet);\n\t\t\t} else if (anArtifact instanceof Ticket) {\n\t\t\t\tTicket ticket = (Ticket)anArtifact;\n\t\t\t\tticket.setOwner(getUserByUserName(ticket.getOwnerName()));\n\t\t\t\tticket.setReporter(getUserByUserName(ticket.getReporterName()));\n\t\t\t\tticket.setTicketChanges(getTicketChangesByTicketID(ticket\n\t\t\t\t\t\t.getTicketID()));\n\t\t\t\tticket.setProject(project);\n\t\t\t\tproject.addTicket(ticket);\n\t\t\t\tticketids.put(ticket.getDr_id(), ticket.getProjectID());\n\t\t\t\ttickets.add(ticket);\n\t\t\t\tfinalArtifacts.add(ticket);\n\t\t\t} else if (anArtifact instanceof Message) {\n\t\t\t\tMessage communication = (Message)anArtifact;\n\t\t\t\tUser user = getUserByUserName(communication\n\t\t\t\t\t\t.getUser_name());\n\t\t\t\tcommunication.setOwner(user);\n\t\t\t\tuser.setUserRealName(communication.getAuthor());\n\t\t\t\tcommunication.setProject(project);\n\t\t\t\tproject.addMessage(communication);\n\t\t\t\tfinalArtifacts.add(communication);\n\t\t\t}\n\t\t\telse if(anArtifact instanceof Wiki) {\n            \tWiki wiki = (Wiki)anArtifact;\n            \twiki.setRevisions(getRevisionsByWikiID(wiki.getPage_id()));\n            \twiki.setOwner(wiki.getRevisions().get(0).getRev_user());\n            \twiki.setProject(DataManager.getProjectByName(getProjectNamespaceByNamespaceID(wiki.getPage_namespace_id())));\n            \twiki.setProjectID(wiki.getProject().getProjectID());\n            \tfinalArtifacts.add(wiki);\n            }\n\t\t}\n    \tallArtifacts.addAll(finalArtifacts);\n    \treturn finalArtifacts;\n    }\npublic static void closeTheConnection() throws SQLException {\n        if(statement != null) statement.close();\n        if (conn != null) conn.close();\n    }\npublic static void writeCluster(Cluster cluster) throws SQLException {\n    \tProject project = DataManager.getProjectByID(cluster.getProject());\n        String sqlStmt = QueryBuilder.insertIntoClusters(cluster, project.getProjectName());\n        statement.executeUpdate(sqlStmt);\n        DataManager.writeArtifactInCluster(cluster);\n        DataManager.writeUserInCluster(cluster);\n    }\npublic static void writeClusterPerProject(int projectid, int clustered, int total, String fromdate, String todate, String cluster_set_name, double threshold) throws SQLException{\n    \tProject project = DataManager.getProjectByID(projectid);\n    \tString sqlStmt = QueryBuilder.insertClusterPerProject(clustered, project.getProjectName(), fromdate, todate, total, cluster_set_name, threshold);\n    \tstatement.executeUpdate(sqlStmt);\n    }\npublic static void openTheConnection(String username, String password, String databaseName) throws Exception{\n    \tClass.forName(databaseDriver).newInstance();\n    \ttry {\n        conn=DriverManager.getConnection(databaseName, username, password);\n    \t}\n    \tcatch(SQLException e) {\n    \t\tSystem.out.println(e.getMessage());\n    \t\tSystem.exit(1);\n    \t}\n        statement=conn.createStatement();\n        userIDs = new HashSet<Integer>();\n        users = new HashSet<User>();\n        projectIDs = new HashSet<Integer>();\n        projects = new HashSet<Project>();\n        artifactURLs = new HashSet<String>();\n        allArtifacts = new HashSet<IArtifact>();\n        classNames = new HashSet<String>();\n        classes = new HashSet<SourceClass>();\n        ticketids = new HashMap<Integer, Integer>();\n        tickets = new HashSet<Ticket>();\n        usernames = new HashSet<String>();\n        systems = new HashSet<Integer>();\n        changesets = new HashSet<ChangeSet>();\n        commBuildingIDs = new HashSet<Integer>();\n        commBuildings = new HashSet<CommunicationBuildingData>();\n        fileBuildingIDs = new HashSet<Integer>();\n        fileBuildings = new HashSet<FileBuildingData>();\n    }"
  }
}