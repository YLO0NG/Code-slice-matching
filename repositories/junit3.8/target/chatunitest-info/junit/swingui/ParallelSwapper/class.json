{
  "fullClassName": "junit.swingui.ParallelSwapper",
  "className": "ParallelSwapper",
  "index": 50,
  "modifier": "[private ]",
  "extend": "[]",
  "implement": "[Sorter.Swapper]",
  "packageName": "junit.swingui",
  "packageDeclaration": "package junit.swingui;",
  "classSignature": "private class ParallelSwapper",
  "hasConstructor": true,
  "isPublic": false,
  "isInterface": false,
  "isAbstract": false,
  "imports": [
    "import java.awt.*;",
    "import java.awt.event.*;",
    "import java.util.*;",
    "import javax.swing.*;",
    "import javax.swing.event.*;",
    "import junit.runner.*;"
  ],
  "fields": [
    "Vector fOther;"
  ],
  "superClasses": [],
  "implementedTypes": [
    "Swapper"
  ],
  "methodSigs": {
    "swap(Vector, int, int)": "0",
    "ParallelSwapper(Vector)": "1"
  },
  "methodsBrief": [
    "public void swap(Vector values, int left, int right){}",
    "ParallelSwapper(Vector other){}"
  ],
  "constructorSigs": [
    "ParallelSwapper(Vector)"
  ],
  "constructorBrief": [
    "ParallelSwapper(Vector other){}"
  ],
  "getterSetterSigs": [],
  "getterSetterBrief": [],
  "constructorDeps": {
    "java.util.Vector": []
  },
  "compilationUnitCode": "package junit.swingui;\r\n\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.util.*;\r\nimport javax.swing.*;\r\nimport javax.swing.event.*;\r\nimport junit.runner.*;\r\n\r\n/**\r\n * A test class selector. A simple dialog to pick the name of a test suite.\r\n */\r\nclass TestSelector extends JDialog {\r\n\r\n    private JButton fCancel;\r\n\r\n    private JButton fOk;\r\n\r\n    private JList fList;\r\n\r\n    private JScrollPane fScrolledList;\r\n\r\n    private JLabel fDescription;\r\n\r\n    private String fSelectedItem;\r\n\r\n    /**\r\n     * Renders TestFailures in a JList\r\n     */\r\n    static class TestCellRenderer extends DefaultListCellRenderer {\r\n\r\n        Icon fLeafIcon;\r\n\r\n        Icon fSuiteIcon;\r\n\r\n        public TestCellRenderer() {\r\n            fLeafIcon = UIManager.getIcon(\"Tree.leafIcon\");\r\n            fSuiteIcon = UIManager.getIcon(\"Tree.closedIcon\");\r\n        }\r\n\r\n        public Component getListCellRendererComponent(JList list, Object value, int modelIndex, boolean isSelected, boolean cellHasFocus) {\r\n            Component c = super.getListCellRendererComponent(list, value, modelIndex, isSelected, cellHasFocus);\r\n            String displayString = displayString((String) value);\r\n            if (displayString.startsWith(\"AllTests\"))\r\n                setIcon(fSuiteIcon);\r\n            else\r\n                setIcon(fLeafIcon);\r\n            setText(displayString);\r\n            return c;\r\n        }\r\n\r\n        public static String displayString(String className) {\r\n            int typeIndex = className.lastIndexOf('.');\r\n            if (typeIndex < 0)\r\n                return className;\r\n            return className.substring(typeIndex + 1) + \" - \" + className.substring(0, typeIndex);\r\n        }\r\n\r\n        public static boolean matchesKey(String s, char ch) {\r\n            return ch == Character.toUpperCase(s.charAt(typeIndex(s)));\r\n        }\r\n\r\n        private static int typeIndex(String s) {\r\n            int typeIndex = s.lastIndexOf('.');\r\n            int i = 0;\r\n            if (typeIndex > 0)\r\n                i = typeIndex + 1;\r\n            return i;\r\n        }\r\n    }\r\n\r\n    protected class DoubleClickListener extends MouseAdapter {\r\n\r\n        public void mouseClicked(MouseEvent e) {\r\n            if (e.getClickCount() == 2) {\r\n                okSelected();\r\n            }\r\n        }\r\n    }\r\n\r\n    protected class KeySelectListener extends KeyAdapter {\r\n\r\n        public void keyTyped(KeyEvent e) {\r\n            keySelectTestClass(e.getKeyChar());\r\n        }\r\n    }\r\n\r\n    public TestSelector(Frame parent, TestCollector testCollector) {\r\n        super(parent, true);\r\n        setSize(350, 300);\r\n        setResizable(false);\r\n        setLocationRelativeTo(parent);\r\n        setTitle(\"Test Selector\");\r\n        Vector list = null;\r\n        try {\r\n            parent.setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));\r\n            list = createTestList(testCollector);\r\n        } finally {\r\n            parent.setCursor(Cursor.getDefaultCursor());\r\n        }\r\n        fList = new JList(list);\r\n        fList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\r\n        fList.setCellRenderer(new TestCellRenderer());\r\n        fScrolledList = new JScrollPane(fList);\r\n        fCancel = new JButton(\"Cancel\");\r\n        fDescription = new JLabel(\"Select the Test class:\");\r\n        fOk = new JButton(\"OK\");\r\n        fOk.setEnabled(false);\r\n        getRootPane().setDefaultButton(fOk);\r\n        defineLayout();\r\n        addListeners();\r\n    }\r\n\r\n    private void addListeners() {\r\n        fCancel.addActionListener(new ActionListener() {\r\n\r\n            public void actionPerformed(ActionEvent e) {\r\n                dispose();\r\n            }\r\n        });\r\n        fOk.addActionListener(new ActionListener() {\r\n\r\n            public void actionPerformed(ActionEvent e) {\r\n                okSelected();\r\n            }\r\n        });\r\n        fList.addMouseListener(new DoubleClickListener());\r\n        fList.addKeyListener(new KeySelectListener());\r\n        fList.addListSelectionListener(new ListSelectionListener() {\r\n\r\n            public void valueChanged(ListSelectionEvent e) {\r\n                checkEnableOK(e);\r\n            }\r\n        });\r\n        addWindowListener(new WindowAdapter() {\r\n\r\n            public void windowClosing(WindowEvent e) {\r\n                dispose();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void defineLayout() {\r\n        getContentPane().setLayout(new GridBagLayout());\r\n        GridBagConstraints labelConstraints = new GridBagConstraints();\r\n        labelConstraints.gridx = 0;\r\n        labelConstraints.gridy = 0;\r\n        labelConstraints.gridwidth = 1;\r\n        labelConstraints.gridheight = 1;\r\n        labelConstraints.fill = GridBagConstraints.BOTH;\r\n        labelConstraints.anchor = GridBagConstraints.WEST;\r\n        labelConstraints.weightx = 1.0;\r\n        labelConstraints.weighty = 0.0;\r\n        labelConstraints.insets = new Insets(8, 8, 0, 8);\r\n        getContentPane().add(fDescription, labelConstraints);\r\n        GridBagConstraints listConstraints = new GridBagConstraints();\r\n        listConstraints.gridx = 0;\r\n        listConstraints.gridy = 1;\r\n        listConstraints.gridwidth = 4;\r\n        listConstraints.gridheight = 1;\r\n        listConstraints.fill = GridBagConstraints.BOTH;\r\n        listConstraints.anchor = GridBagConstraints.CENTER;\r\n        listConstraints.weightx = 1.0;\r\n        listConstraints.weighty = 1.0;\r\n        listConstraints.insets = new Insets(8, 8, 8, 8);\r\n        getContentPane().add(fScrolledList, listConstraints);\r\n        GridBagConstraints okConstraints = new GridBagConstraints();\r\n        okConstraints.gridx = 2;\r\n        okConstraints.gridy = 2;\r\n        okConstraints.gridwidth = 1;\r\n        okConstraints.gridheight = 1;\r\n        okConstraints.anchor = java.awt.GridBagConstraints.EAST;\r\n        okConstraints.insets = new Insets(0, 8, 8, 8);\r\n        getContentPane().add(fOk, okConstraints);\r\n        GridBagConstraints cancelConstraints = new GridBagConstraints();\r\n        cancelConstraints.gridx = 3;\r\n        cancelConstraints.gridy = 2;\r\n        cancelConstraints.gridwidth = 1;\r\n        cancelConstraints.gridheight = 1;\r\n        cancelConstraints.anchor = java.awt.GridBagConstraints.EAST;\r\n        cancelConstraints.insets = new Insets(0, 8, 8, 8);\r\n        getContentPane().add(fCancel, cancelConstraints);\r\n    }\r\n\r\n    public void checkEnableOK(ListSelectionEvent e) {\r\n        fOk.setEnabled(fList.getSelectedIndex() != -1);\r\n    }\r\n\r\n    public void okSelected() {\r\n        fSelectedItem = (String) fList.getSelectedValue();\r\n        dispose();\r\n    }\r\n\r\n    public boolean isEmpty() {\r\n        return fList.getModel().getSize() == 0;\r\n    }\r\n\r\n    public void keySelectTestClass(char ch) {\r\n        ListModel model = fList.getModel();\r\n        if (!Character.isJavaIdentifierStart(ch))\r\n            return;\r\n        for (int i = 0; i < model.getSize(); i++) {\r\n            String s = (String) model.getElementAt(i);\r\n            if (TestCellRenderer.matchesKey(s, Character.toUpperCase(ch))) {\r\n                fList.setSelectedIndex(i);\r\n                fList.ensureIndexIsVisible(i);\r\n                return;\r\n            }\r\n        }\r\n        Toolkit.getDefaultToolkit().beep();\r\n    }\r\n\r\n    public String getSelectedItem() {\r\n        return fSelectedItem;\r\n    }\r\n\r\n    private Vector createTestList(TestCollector collector) {\r\n        Enumeration each = collector.collectTests();\r\n        Vector v = new Vector(200);\r\n        Vector displayVector = new Vector(v.size());\r\n        while (each.hasMoreElements()) {\r\n            String s = (String) each.nextElement();\r\n            v.addElement(s);\r\n            displayVector.addElement(TestCellRenderer.displayString(s));\r\n        }\r\n        if (v.size() > 0)\r\n            Sorter.sortStrings(displayVector, 0, displayVector.size() - 1, new ParallelSwapper(v));\r\n        return v;\r\n    }\r\n\r\n    private class ParallelSwapper implements Sorter.Swapper {\r\n\r\n        Vector fOther;\r\n\r\n        ParallelSwapper(Vector other) {\r\n            fOther = other;\r\n        }\r\n\r\n        public void swap(Vector values, int left, int right) {\r\n            Object tmp = values.elementAt(left);\r\n            values.setElementAt(values.elementAt(right), left);\r\n            values.setElementAt(tmp, right);\r\n            Object tmp2 = fOther.elementAt(left);\r\n            fOther.setElementAt(fOther.elementAt(right), left);\r\n            fOther.setElementAt(tmp2, right);\r\n        }\r\n    }\r\n}\r\n",
  "classDeclarationCode": "private class ParallelSwapper implements Sorter.Swapper {\r\n\r\n    Vector fOther;\r\n\r\n    ParallelSwapper(Vector other) {\r\n        fOther = other;\r\n    }\r\n\r\n    public void swap(Vector values, int left, int right) {\r\n        Object tmp = values.elementAt(left);\r\n        values.setElementAt(values.elementAt(right), left);\r\n        values.setElementAt(tmp, right);\r\n        Object tmp2 = fOther.elementAt(left);\r\n        fOther.setElementAt(fOther.elementAt(right), left);\r\n        fOther.setElementAt(tmp2, right);\r\n    }\r\n}",
  "subClasses": []
}