{
  "fullClassName": "CH.ifa.draw.application.DrawApplication",
  "className": "DrawApplication",
  "index": 2,
  "modifier": "[public ]",
  "extend": "[JFrame]",
  "implement": "[DrawingEditor, PaletteListener]",
  "packageName": "CH.ifa.draw.application",
  "packageDeclaration": "package CH.ifa.draw.application;",
  "classSignature": "public  class DrawApplication",
  "hasConstructor": true,
  "isPublic": true,
  "isInterface": false,
  "isAbstract": false,
  "imports": [
    "import javax.swing.*;",
    "import java.awt.*;",
    "import java.awt.event.*;",
    "import java.util.*;",
    "import java.io.*;",
    "import CH.ifa.draw.framework.*;",
    "import CH.ifa.draw.standard.*;",
    "import CH.ifa.draw.figures.*;",
    "import CH.ifa.draw.util.*;"
  ],
  "fields": [
    "private Drawing              fDrawing;",
    "private Tool                 fTool;",
    "private Iconkit              fIconkit;",
    "private JTextField           fStatusLine;",
    "private StandardDrawingView  fView;",
    "private ToolButton           fDefaultToolButton;",
    "private ToolButton           fSelectedToolButton;",
    "private String               fApplicationName;",
    "private String               fDrawingFilename;",
    "private StorageFormatManager fStorageFormatManager;",
    "static String                fgUntitled = \"untitled\";",
    "private static final String fgDrawPath = \"/CH/ifa/draw/\";",
    "public static final String IMAGES = fgDrawPath + \"images/\";",
    "public static final int    FILE_MENU = 0;",
    "public static final int    EDIT_MENU = 1;",
    "public static final int    ALIGNMENT_MENU = 2;",
    "public static final int    ATTRIBUTES_MENU = 3;"
  ],
  "superClasses": [
    "JFrame"
  ],
  "implementedTypes": [
    "DrawingEditor",
    "PaletteListener"
  ],
  "methodSigs": {
    "createApplication()": "0",
    "newView()": "1",
    "newWindow()": "2",
    "open()": "3",
    "addListeners()": "4",
    "initDrawing()": "5",
    "createMenus(JMenuBar)": "6",
    "createFileMenu()": "7",
    "createEditMenu()": "8",
    "createAlignmentMenu()": "9",
    "createDebugMenu()": "10",
    "createAttributesMenu()": "11",
    "createColorMenu(String, String)": "12",
    "createArrowMenu()": "13",
    "createFontMenu()": "14",
    "createFontStyleMenu()": "15",
    "createFontSizeMenu()": "16",
    "createLookAndFeelMenu()": "17",
    "createToolPalette()": "18",
    "createTools(JToolBar)": "19",
    "createSelectionTool()": "20",
    "createToolButton(String, String, Tool)": "21",
    "createDrawingView()": "22",
    "getDrawingViewSize()": "23",
    "createDrawing()": "24",
    "createContents(StandardDrawingView)": "25",
    "createStorageFormatManager()": "26",
    "setStorageFormatManager(StorageFormatManager)": "27",
    "getStorageFormatManager()": "28",
    "setDrawing(Drawing)": "29",
    "defaultSize()": "30",
    "createStatusLine()": "31",
    "paletteUserSelected(PaletteButton)": "32",
    "paletteUserOver(PaletteButton, boolean)": "33",
    "drawing()": "34",
    "tool()": "35",
    "view()": "36",
    "toolDone()": "37",
    "selectionChanged(DrawingView)": "38",
    "showStatus(String)": "39",
    "setTool(Tool, String)": "40",
    "setSelected(ToolButton)": "41",
    "exit()": "42",
    "destroy()": "43",
    "promptNew()": "44",
    "promptOpen()": "45",
    "promptSaveAs()": "46",
    "createOpenFileChooser()": "47",
    "createSaveFileChooser()": "48",
    "print()": "49",
    "saveDrawing(StorageFormat, String)": "50",
    "loadDrawing(StorageFormat, String)": "51",
    "newLookAndFeel(String)": "52",
    "setDrawingTitle(String)": "53",
    "getDrawingTitle()": "54",
    "setApplicationName(String)": "55",
    "getApplicationName()": "56",
    "DrawApplication()": "57",
    "DrawApplication(String)": "58"
  },
  "methodsBrief": [
    "protected DrawApplication createApplication(){}",
    "public void newView(){}",
    "public void newWindow(){}",
    "public void open(){}",
    "protected void addListeners(){}",
    "protected void initDrawing(){}",
    "protected void createMenus(JMenuBar mb){}",
    "protected JMenu createFileMenu(){}",
    "protected JMenu createEditMenu(){}",
    "protected JMenu createAlignmentMenu(){}",
    "protected JMenu createDebugMenu(){}",
    "protected JMenu createAttributesMenu(){}",
    "protected JMenu createColorMenu(String title, String attribute){}",
    "protected JMenu createArrowMenu(){}",
    "protected JMenu createFontMenu(){}",
    "protected JMenu createFontStyleMenu(){}",
    "protected JMenu createFontSizeMenu(){}",
    "public JMenu createLookAndFeelMenu(){}",
    "protected JToolBar createToolPalette(){}",
    "protected void createTools(JToolBar palette){}",
    "protected Tool createSelectionTool(){}",
    "protected ToolButton createToolButton(String iconName, String toolName, Tool tool){}",
    "protected StandardDrawingView createDrawingView(){}",
    "protected Dimension getDrawingViewSize(){}",
    "protected Drawing createDrawing(){}",
    "protected JComponent createContents(StandardDrawingView view){}",
    "public StorageFormatManager createStorageFormatManager(){}",
    "private void setStorageFormatManager(StorageFormatManager storageFormatManager){}",
    "public StorageFormatManager getStorageFormatManager(){}",
    "public void setDrawing(Drawing drawing){}",
    "protected Dimension defaultSize(){}",
    "protected JTextField createStatusLine(){}",
    "public void paletteUserSelected(PaletteButton button){}",
    "public void paletteUserOver(PaletteButton button, boolean inside){}",
    "public Drawing drawing(){}",
    "public Tool tool(){}",
    "public DrawingView view(){}",
    "public void toolDone(){}",
    "public void selectionChanged(DrawingView view){}",
    "public void showStatus(String string){}",
    "private void setTool(Tool t, String name){}",
    "private void setSelected(ToolButton button){}",
    "public void exit(){}",
    "protected void destroy(){}",
    "public void promptNew(){}",
    "public void promptOpen(){}",
    "public void promptSaveAs(){}",
    "protected JFileChooser createOpenFileChooser(){}",
    "protected JFileChooser createSaveFileChooser(){}",
    "public void print(){}",
    "protected void saveDrawing(StorageFormat storeFormat, String file){}",
    "protected void loadDrawing(StorageFormat restoreFormat, String file){}",
    "private void newLookAndFeel(String landf){}",
    "protected void setDrawingTitle(String drawingTitle){}",
    "protected String getDrawingTitle(){}",
    "public void setApplicationName(String applicationName){}",
    "public String getApplicationName(){}",
    "public DrawApplication(){}",
    "public DrawApplication(String title){}"
  ],
  "constructorSigs": [
    "DrawApplication()",
    "DrawApplication(String)"
  ],
  "constructorBrief": [
    "public DrawApplication(){}",
    "public DrawApplication(String title){}"
  ],
  "getterSetterSigs": [
    "getDrawingViewSize()",
    "setStorageFormatManager(StorageFormatManager)",
    "getStorageFormatManager()",
    "setDrawing(Drawing)",
    "setTool(Tool, String)",
    "setSelected(ToolButton)",
    "setDrawingTitle(String)",
    "getDrawingTitle()",
    "setApplicationName(String)",
    "getApplicationName()"
  ],
  "getterSetterBrief": [
    "protected Dimension getDrawingViewSize(){}",
    "private void setStorageFormatManager(StorageFormatManager storageFormatManager){}",
    "public StorageFormatManager getStorageFormatManager(){}",
    "public void setDrawing(Drawing drawing){}",
    "private void setTool(Tool t, String name){}",
    "private void setSelected(ToolButton button){}",
    "protected void setDrawingTitle(String drawingTitle){}",
    "protected String getDrawingTitle(){}",
    "public void setApplicationName(String applicationName){}",
    "public String getApplicationName(){}"
  ],
  "constructorDeps": {
    "java.lang.String": [],
    "CH.ifa.draw.application.DrawApplication": [
      "setApplicationName(String)"
    ]
  },
  "compilationUnitCode": "/*\n * @(#)DrawApplication.java 5.2\n *\n */\npackage CH.ifa.draw.application;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.util.*;\nimport java.io.*;\nimport CH.ifa.draw.framework.*;\nimport CH.ifa.draw.standard.*;\nimport CH.ifa.draw.figures.*;\nimport CH.ifa.draw.util.*;\n\n/**\n * DrawApplication defines a standard presentation for\n * standalone drawing editors. The presentation is\n * customized in subclasses.\n * The application is started as follows:\n * <pre>\n * public static void main(String[] args) {\n *     MayDrawApp window = new MyDrawApp();\n *     window.open();\n * }\n * </pre>\n */\npublic class DrawApplication extends JFrame implements DrawingEditor, PaletteListener {\n\n    private Drawing fDrawing;\n\n    private Tool fTool;\n\n    private Iconkit fIconkit;\n\n    private JTextField fStatusLine;\n\n    private StandardDrawingView fView;\n\n    private ToolButton fDefaultToolButton;\n\n    private ToolButton fSelectedToolButton;\n\n    private String fApplicationName;\n\n    private String fDrawingFilename;\n\n    private StorageFormatManager fStorageFormatManager;\n\n    static String fgUntitled = \"untitled\";\n\n    // the image resource path\n    private static final String fgDrawPath = \"/CH/ifa/draw/\";\n\n    public static final String IMAGES = fgDrawPath + \"images/\";\n\n    /**\n     * The index of the file menu in the menu bar.\n     */\n    public static final int FILE_MENU = 0;\n\n    /**\n     * The index of the edit menu in the menu bar.\n     */\n    public static final int EDIT_MENU = 1;\n\n    /**\n     * The index of the alignment menu in the menu bar.\n     */\n    public static final int ALIGNMENT_MENU = 2;\n\n    /**\n     * The index of the attributes menu in the menu bar.\n     */\n    public static final int ATTRIBUTES_MENU = 3;\n\n    public DrawApplication() {\n        super(\"JHotDraw\");\n    }\n\n    public DrawApplication(String title) {\n        super(title);\n        setApplicationName(title);\n    }\n\n    /**\n     * Factory method which can be overriden by subclasses to\n     * create an instance of their type.\n     *\n     * @return\tnewly created application\n     */\n    protected DrawApplication createApplication() {\n        return new DrawApplication();\n    }\n\n    /**\n     * Open a new view for this application containing a\n     * view of the drawing of the currently activated window.\n     */\n    public void newView() {\n        DrawApplication window = createApplication();\n        window.open();\n        window.setDrawing(drawing());\n        window.setDrawingTitle(getDrawingTitle() + \" (View)\");\n    }\n\n    /**\n     * Open a new window for this application containing\n     * an new (empty) drawing.\n     */\n    public void newWindow() {\n        DrawApplication window = createApplication();\n        window.open();\n    }\n\n    /**\n     * Opens the window and initializes its contents.\n     * Clients usually only call but don't override it.\n     */\n    public void open() {\n        fIconkit = new Iconkit(this);\n        getContentPane().setLayout(new BorderLayout());\n        // Panel in which a JToolBar can be placed using a BoxLayout\n        JPanel fullPanel = new JPanel();\n        fullPanel.setLayout(new BoxLayout(fullPanel, BoxLayout.X_AXIS));\n        fView = createDrawingView();\n        JComponent contents = createContents((StandardDrawingView) view());\n        contents.setAlignmentX(LEFT_ALIGNMENT);\n        JToolBar tools = createToolPalette();\n        createTools(tools);\n        JPanel activePanel = new JPanel();\n        activePanel.setAlignmentX(LEFT_ALIGNMENT);\n        activePanel.setAlignmentY(TOP_ALIGNMENT);\n        activePanel.setLayout(new BorderLayout());\n        activePanel.add(tools, BorderLayout.NORTH);\n        activePanel.add(contents, BorderLayout.CENTER);\n        fullPanel.add(activePanel);\n        fStatusLine = createStatusLine();\n        getContentPane().add(fullPanel, BorderLayout.CENTER);\n        getContentPane().add(fStatusLine, BorderLayout.SOUTH);\n        JMenuBar mb = new JMenuBar();\n        createMenus(mb);\n        setJMenuBar(mb);\n        initDrawing();\n        Dimension d = defaultSize();\n        if (d.width > mb.getPreferredSize().width) {\n            setSize(d.width, d.height);\n        } else {\n            setSize(mb.getPreferredSize().width, d.height);\n        }\n        addListeners();\n        setVisible(true);\n        fStorageFormatManager = createStorageFormatManager();\n    }\n\n    /**\n     * Registers the listeners for this window\n     */\n    protected void addListeners() {\n        addWindowListener(new WindowAdapter() {\n\n            public void windowClosing(WindowEvent event) {\n                exit();\n            }\n        });\n    }\n\n    protected void initDrawing() {\n        setDrawing(createDrawing());\n        setDrawingTitle(fgUntitled);\n        view().setDrawing(drawing());\n        toolDone();\n    }\n\n    /**\n     * Creates the standard menus. Clients override this\n     * method to add additional menus.\n     */\n    protected void createMenus(JMenuBar mb) {\n        mb.add(createFileMenu());\n        mb.add(createEditMenu());\n        mb.add(createAlignmentMenu());\n        mb.add(createAttributesMenu());\n        mb.add(createDebugMenu());\n    }\n\n    /**\n     * Creates the file menu. Clients override this\n     * method to add additional menu items.\n     */\n    protected JMenu createFileMenu() {\n        JMenu menu = new JMenu(\"File\");\n        JMenuItem mi = new JMenuItem(\"New\", new MenuShortcut('n').getKey());\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                promptNew();\n            }\n        });\n        menu.add(mi);\n        mi = new JMenuItem(\"Open...\", new MenuShortcut('o').getKey());\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                promptOpen();\n            }\n        });\n        menu.add(mi);\n        mi = new JMenuItem(\"Save As...\", new MenuShortcut('s').getKey());\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                promptSaveAs();\n            }\n        });\n        menu.add(mi);\n        menu.addSeparator();\n        mi = new JMenuItem(\"Print...\", new MenuShortcut('p').getKey());\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                print();\n            }\n        });\n        menu.add(mi);\n        menu.addSeparator();\n        mi = new JMenuItem(\"Exit\");\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                exit();\n            }\n        });\n        menu.add(mi);\n        return menu;\n    }\n\n    /**\n     * Creates the edit menu. Clients override this\n     * method to add additional menu items.\n     */\n    protected JMenu createEditMenu() {\n        CommandMenu menu = new CommandMenu(\"Edit\");\n        menu.add(new CutCommand(\"Cut\", view()), new MenuShortcut('x'));\n        menu.add(new CopyCommand(\"Copy\", view()), new MenuShortcut('c'));\n        menu.add(new PasteCommand(\"Paste\", view()), new MenuShortcut('v'));\n        menu.addSeparator();\n        menu.add(new DuplicateCommand(\"Duplicate\", view()), new MenuShortcut('d'));\n        menu.add(new DeleteCommand(\"Delete\", view()));\n        menu.addSeparator();\n        menu.add(new GroupCommand(\"Group\", view()));\n        menu.add(new UngroupCommand(\"Ungroup\", view()));\n        menu.addSeparator();\n        menu.add(new SendToBackCommand(\"Send to Back\", view()));\n        menu.add(new BringToFrontCommand(\"Bring to Front\", view()));\n        return menu;\n    }\n\n    /**\n     * Creates the alignment menu. Clients override this\n     * method to add additional menu items.\n     */\n    protected JMenu createAlignmentMenu() {\n        CommandMenu menu = new CommandMenu(\"Align\");\n        menu.add(new ToggleGridCommand(\"Toggle Snap to Grid\", view(), new Point(4, 4)));\n        menu.addSeparator();\n        menu.add(new AlignCommand(\"Lefts\", view(), AlignCommand.LEFTS));\n        menu.add(new AlignCommand(\"Centers\", view(), AlignCommand.CENTERS));\n        menu.add(new AlignCommand(\"Rights\", view(), AlignCommand.RIGHTS));\n        menu.addSeparator();\n        menu.add(new AlignCommand(\"Tops\", view(), AlignCommand.TOPS));\n        menu.add(new AlignCommand(\"Middles\", view(), AlignCommand.MIDDLES));\n        menu.add(new AlignCommand(\"Bottoms\", view(), AlignCommand.BOTTOMS));\n        return menu;\n    }\n\n    /**\n     * Creates the debug menu. Clients override this\n     * method to add additional menu items.\n     */\n    protected JMenu createDebugMenu() {\n        JMenu menu = new JMenu(\"Debug\");\n        JMenuItem mi = new JMenuItem(\"Simple Update\");\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                view().setDisplayUpdate(new SimpleUpdateStrategy());\n            }\n        });\n        menu.add(mi);\n        mi = new JMenuItem(\"Buffered Update\");\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                view().setDisplayUpdate(new BufferedUpdateStrategy());\n            }\n        });\n        menu.add(mi);\n        return menu;\n    }\n\n    /**\n     * Creates the attributes menu and its submenus. Clients override this\n     * method to add additional menu items.\n     */\n    protected JMenu createAttributesMenu() {\n        JMenu menu = new JMenu(\"Attributes\");\n        menu.add(createColorMenu(\"Fill Color\", \"FillColor\"));\n        menu.add(createColorMenu(\"Pen Color\", \"FrameColor\"));\n        menu.add(createArrowMenu());\n        menu.addSeparator();\n        menu.add(createFontMenu());\n        menu.add(createFontSizeMenu());\n        menu.add(createFontStyleMenu());\n        menu.add(createColorMenu(\"Text Color\", \"TextColor\"));\n        return menu;\n    }\n\n    /**\n     * Creates the color menu.\n     */\n    protected JMenu createColorMenu(String title, String attribute) {\n        CommandMenu menu = new CommandMenu(title);\n        for (int i = 0; i < ColorMap.size(); i++) menu.add(new ChangeAttributeCommand(ColorMap.name(i), attribute, ColorMap.color(i), view()));\n        return menu;\n    }\n\n    /**\n     * Creates the arrows menu.\n     */\n    protected JMenu createArrowMenu() {\n        CommandMenu menu = new CommandMenu(\"Arrow\");\n        menu.add(new ChangeAttributeCommand(\"none\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_NONE), view()));\n        menu.add(new ChangeAttributeCommand(\"at Start\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_START), view()));\n        menu.add(new ChangeAttributeCommand(\"at End\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_END), view()));\n        menu.add(new ChangeAttributeCommand(\"at Both\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_BOTH), view()));\n        return menu;\n    }\n\n    /**\n     * Creates the fonts menus. It installs all available fonts\n     * supported by the toolkit implementation.\n     */\n    protected JMenu createFontMenu() {\n        CommandMenu menu = new CommandMenu(\"Font\");\n        String[] fonts = Toolkit.getDefaultToolkit().getFontList();\n        for (int i = 0; i < fonts.length; i++) menu.add(new ChangeAttributeCommand(fonts[i], \"FontName\", fonts[i], view()));\n        return menu;\n    }\n\n    /**\n     * Creates the font style menu with entries (Plain, Italic, Bold).\n     */\n    protected JMenu createFontStyleMenu() {\n        CommandMenu menu = new CommandMenu(\"Font Style\");\n        menu.add(new ChangeAttributeCommand(\"Plain\", \"FontStyle\", new Integer(Font.PLAIN), view()));\n        menu.add(new ChangeAttributeCommand(\"Italic\", \"FontStyle\", new Integer(Font.ITALIC), view()));\n        menu.add(new ChangeAttributeCommand(\"Bold\", \"FontStyle\", new Integer(Font.BOLD), view()));\n        return menu;\n    }\n\n    /**\n     * Creates the font size menu.\n     */\n    protected JMenu createFontSizeMenu() {\n        CommandMenu menu = new CommandMenu(\"Font Size\");\n        int[] sizes = { 9, 10, 12, 14, 18, 24, 36, 48, 72 };\n        for (int i = 0; i < sizes.length; i++) {\n            menu.add(new ChangeAttributeCommand(Integer.toString(sizes[i]), \"FontSize\", new Integer(sizes[i]), view()));\n        }\n        return menu;\n    }\n\n    /**\n     * Create a menu which allows the user to select a different look and feel at runtime.\n     */\n    public JMenu createLookAndFeelMenu() {\n        JMenu menu = new JMenu(\"Look'n'Feel\");\n        UIManager.LookAndFeelInfo[] lafs = UIManager.getInstalledLookAndFeels();\n        JMenuItem mi = null;\n        for (int i = 0; i < lafs.length; i++) {\n            mi = new JMenuItem(lafs[i].getName());\n            final String lnfClassName = lafs[i].getClassName();\n            mi.addActionListener(new ActionListener() {\n\n                public void actionPerformed(ActionEvent event) {\n                    newLookAndFeel(lnfClassName);\n                }\n            });\n            menu.add(mi);\n        }\n        return menu;\n    }\n\n    /**\n     * Creates the tool palette.\n     */\n    protected JToolBar createToolPalette() {\n        JToolBar palette = new JToolBar();\n        palette.setBackground(Color.lightGray);\n        // use standard FlowLayout for JToolBar\n        // palette.setLayout(new PaletteLayout(2,new Point(2,2)));\n        return palette;\n    }\n\n    /**\n     * Creates the tools. By default only the selection tool is added.\n     * Override this method to add additional tools.\n     * Call the inherited method to include the selection tool.\n     * @param palette the palette where the tools are added.\n     */\n    protected void createTools(JToolBar palette) {\n        Tool tool = createSelectionTool();\n        fDefaultToolButton = createToolButton(IMAGES + \"SEL\", \"Selection Tool\", tool);\n        palette.add(fDefaultToolButton);\n    }\n\n    /**\n     * Creates the selection tool used in this editor. Override to use\n     * a custom selection tool.\n     */\n    protected Tool createSelectionTool() {\n        return new SelectionTool(view());\n    }\n\n    /**\n     * Creates a tool button with the given image, tool, and text\n     */\n    protected ToolButton createToolButton(String iconName, String toolName, Tool tool) {\n        return new ToolButton(this, iconName, toolName, tool);\n    }\n\n    /**\n     * Creates the drawing view used in this application.\n     * You need to override this method to use a DrawingView\n     * subclass in your application. By default a standard\n     * DrawingView is returned.\n     */\n    protected StandardDrawingView createDrawingView() {\n        Dimension d = getDrawingViewSize();\n        return new StandardDrawingView(this, d.width, d.height);\n    }\n\n    /**\n     * Override to define the dimensions of the drawing view.\n     */\n    protected Dimension getDrawingViewSize() {\n        return new Dimension(800, 800);\n    }\n\n    /**\n     * Creates the drawing used in this application.\n     * You need to override this method to use a Drawing\n     * subclass in your application. By default a standard\n     * Drawing is returned.\n     */\n    protected Drawing createDrawing() {\n        return new StandardDrawing();\n    }\n\n    /**\n     * Creates the contents component of the application\n     * frame. By default the DrawingView is returned in\n     * a JScrollPane.\n     */\n    protected JComponent createContents(StandardDrawingView view) {\n        JScrollPane sp = new JScrollPane(view);\n        sp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n        sp.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);\n        return sp;\n    }\n\n    /**\n     * Factory method to create a StorageFormatManager for supported storage formats.\n     * Different applications might want to use different storage formats and can return\n     * their own format manager by overriding this method.\n     */\n    public StorageFormatManager createStorageFormatManager() {\n        StorageFormatManager storageFormatManager = new StorageFormatManager();\n        storageFormatManager.setDefaultStorageFormat(new StandardStorageFormat());\n        storageFormatManager.addStorageFormat(storageFormatManager.getDefaultStorageFormat());\n        storageFormatManager.addStorageFormat(new SerializationStorageFormat());\n        return storageFormatManager;\n    }\n\n    /**\n     * Set the StorageFormatManager. The StorageFormatManager is used when storing and\n     * restoring Drawing from the file system.\n     */\n    private void setStorageFormatManager(StorageFormatManager storageFormatManager) {\n        fStorageFormatManager = storageFormatManager;\n    }\n\n    /**\n     * Return the StorageFormatManager for this application.The StorageFormatManager is\n     * used when storing and restoring Drawing from the file system.\n     */\n    public StorageFormatManager getStorageFormatManager() {\n        return fStorageFormatManager;\n    }\n\n    /**\n     * Sets the drawing to be edited.\n     */\n    public void setDrawing(Drawing drawing) {\n        view().setDrawing(drawing);\n        fDrawing = drawing;\n    }\n\n    /**\n     * Gets the default size of the window.\n     */\n    protected Dimension defaultSize() {\n        return new Dimension(600, 450);\n    }\n\n    /**\n     * Creates the status line.\n     */\n    protected JTextField createStatusLine() {\n        JTextField field = new JTextField(\"No Tool\", 40);\n        field.setBackground(Color.white);\n        field.setEditable(false);\n        return field;\n    }\n\n    /**\n     * Handles a user selection in the palette.\n     * @see PaletteListener\n     */\n    public void paletteUserSelected(PaletteButton button) {\n        ToolButton toolButton = (ToolButton) button;\n        setTool(toolButton.tool(), toolButton.name());\n        setSelected(toolButton);\n    }\n\n    /**\n     * Handles when the mouse enters or leaves a palette button.\n     * @see PaletteListener\n     */\n    public void paletteUserOver(PaletteButton button, boolean inside) {\n        ToolButton toolButton = (ToolButton) button;\n        if (inside)\n            showStatus(toolButton.name());\n        else\n            showStatus(fSelectedToolButton.name());\n    }\n\n    /**\n     * Gets the current drawing.\n     * @see DrawingEditor\n     */\n    public Drawing drawing() {\n        return fDrawing;\n    }\n\n    /**\n     * Gets the current tool.\n     * @see DrawingEditor\n     */\n    public Tool tool() {\n        return fTool;\n    }\n\n    /**\n     * Gets the current drawing view.\n     * @see DrawingEditor\n     */\n    public DrawingView view() {\n        return fView;\n    }\n\n    /**\n     * Sets the default tool of the editor.\n     * @see DrawingEditor\n     */\n    public void toolDone() {\n        if (fDefaultToolButton != null) {\n            setTool(fDefaultToolButton.tool(), fDefaultToolButton.name());\n            setSelected(fDefaultToolButton);\n        }\n    }\n\n    /**\n     * Handles a change of the current selection. Updates all\n     * menu items that are selection sensitive.\n     * @see DrawingEditor\n     */\n    public void selectionChanged(DrawingView view) {\n        JMenuBar mb = getJMenuBar();\n        CommandMenu editMenu = (CommandMenu) mb.getMenu(EDIT_MENU);\n        editMenu.checkEnabled();\n        CommandMenu alignmentMenu = (CommandMenu) mb.getMenu(ALIGNMENT_MENU);\n        alignmentMenu.checkEnabled();\n    }\n\n    /**\n     * Shows a status message.\n     * @see DrawingEditor\n     */\n    public void showStatus(String string) {\n        fStatusLine.setText(string);\n    }\n\n    private void setTool(Tool t, String name) {\n        if (tool() != null)\n            tool().deactivate();\n        fTool = t;\n        if (tool() != null) {\n            fStatusLine.setText(name);\n            tool().activate();\n        }\n    }\n\n    private void setSelected(ToolButton button) {\n        if (fSelectedToolButton != null)\n            fSelectedToolButton.reset();\n        fSelectedToolButton = button;\n        if (fSelectedToolButton != null)\n            fSelectedToolButton.select();\n    }\n\n    /**\n     * Exits the application. You should never override this method\n     */\n    public void exit() {\n        destroy();\n        // hide the JFrame\n        setVisible(false);\n        // tell windowing system to free resources\n        dispose();\n        System.exit(0);\n    }\n\n    /**\n     * Handles additional clean up operations. Override to destroy\n     * or release drawing editor resources.\n     */\n    protected void destroy() {\n    }\n\n    /**\n     * Resets the drawing to a new empty drawing.\n     */\n    public void promptNew() {\n        initDrawing();\n    }\n\n    /**\n     * Shows a file dialog and opens a drawing.\n     */\n    public void promptOpen() {\n        toolDone();\n        JFileChooser openDialog = createOpenFileChooser();\n        getStorageFormatManager().registerFileFilters(openDialog);\n        if (openDialog.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {\n            StorageFormat foundFormat = getStorageFormatManager().findStorageFormat(openDialog.getFileFilter());\n            if (foundFormat != null) {\n                String file = openDialog.getSelectedFile().getAbsolutePath();\n                try {\n                    Drawing restoredDrawing = foundFormat.restore(file);\n                    if (restoredDrawing != null) {\n                        newWindow();\n                        setDrawing(restoredDrawing);\n                        setDrawingTitle(file);\n                    } else {\n                        showStatus(\"Unknown file type: could not open file '\" + file + \"'\");\n                    }\n                } catch (IOException e) {\n                    showStatus(\"Error: \" + e);\n                }\n            } else {\n                showStatus(\"Not a valid file format: \" + openDialog.getFileFilter().getDescription());\n            }\n        }\n    }\n\n    /**\n     * Shows a file dialog and saves drawing.\n     */\n    public void promptSaveAs() {\n        toolDone();\n        JFileChooser saveDialog1 = new JFileChooser();\n        saveDialog1.setDialogTitle(\"Save File...\");\n        JFileChooser saveDialog = saveDialog1;\n        getStorageFormatManager().registerFileFilters(saveDialog);\n        if (saveDialog.showSaveDialog(this) == JFileChooser.APPROVE_OPTION) {\n            StorageFormat foundFormat = getStorageFormatManager().findStorageFormat(saveDialog.getFileFilter());\n            if (foundFormat != null) {\n                saveDrawing(foundFormat, saveDialog.getSelectedFile().getAbsolutePath());\n            } else {\n                showStatus(\"Not a valid file format: \" + saveDialog.getFileFilter().getDescription());\n            }\n        }\n    }\n\n    /**\n     * Create a file chooser for the open file dialog. Subclasses may override this\n     * method in order to customize the open file dialog.\n     */\n    protected JFileChooser createOpenFileChooser() {\n        JFileChooser openDialog = new JFileChooser();\n        openDialog.setDialogTitle(\"Open File...\");\n        return openDialog;\n    }\n\n    /**\n     * Create a file chooser for the save file dialog. Subclasses may override this\n     * method in order to customize the save file dialog.\n     */\n    protected JFileChooser createSaveFileChooser() {\n        JFileChooser saveDialog = new JFileChooser();\n        saveDialog.setDialogTitle(\"Save File...\");\n        return saveDialog;\n    }\n\n    /**\n     * Prints the drawing.\n     */\n    public void print() {\n        tool().deactivate();\n        PrintJob printJob = getToolkit().getPrintJob(this, \"Print Drawing\", null);\n        if (printJob != null) {\n            Graphics pg = printJob.getGraphics();\n            if (pg != null) {\n                ((StandardDrawingView) view()).printAll(pg);\n                // flush page\n                pg.dispose();\n            }\n            printJob.end();\n        }\n        tool().activate();\n    }\n\n    /**\n     * Save a Drawing in a file\n     */\n    protected void saveDrawing(StorageFormat storeFormat, String file) {\n        try {\n            setDrawingTitle(storeFormat.store(file, drawing()));\n        } catch (IOException e) {\n            showStatus(e.toString());\n        }\n    }\n\n    /**\n     * Load a Drawing from a file\n     */\n    protected void loadDrawing(StorageFormat restoreFormat, String file) {\n        try {\n            Drawing restoredDrawing = restoreFormat.restore(file);\n            if (restoredDrawing != null) {\n                newWindow();\n                setDrawing(restoredDrawing);\n                setDrawingTitle(file);\n            } else {\n                showStatus(\"Unknown file type: could not open file '\" + file + \"'\");\n            }\n        } catch (IOException e) {\n            showStatus(\"Error: \" + e);\n        }\n    }\n\n    /**\n     * Switch to a new Look&Feel\n     */\n    private void newLookAndFeel(String landf) {\n        try {\n            UIManager.setLookAndFeel(landf);\n            SwingUtilities.updateComponentTreeUI(this);\n        } catch (Exception e) {\n            System.err.println(e);\n        }\n    }\n\n    /**\n     * Set the title of the currently selected drawing\n     */\n    protected void setDrawingTitle(String drawingTitle) {\n        fDrawingFilename = drawingTitle;\n        if (fgUntitled.equals(drawingTitle)) {\n            setTitle(getApplicationName());\n        } else {\n            setTitle(getApplicationName() + \" - \" + drawingTitle);\n        }\n    }\n\n    /**\n     * Return the title of the currently selected drawing\n     */\n    protected String getDrawingTitle() {\n        return fDrawingFilename;\n    }\n\n    /**\n     * Set the name of the application build from this skeleton application\n     */\n    public void setApplicationName(String applicationName) {\n        fApplicationName = applicationName;\n    }\n\n    /**\n     * Return the name of the application build from this skeleton application\n     */\n    public String getApplicationName() {\n        return fApplicationName;\n    }\n}\n",
  "classDeclarationCode": "/**\n * DrawApplication defines a standard presentation for\n * standalone drawing editors. The presentation is\n * customized in subclasses.\n * The application is started as follows:\n * <pre>\n * public static void main(String[] args) {\n *     MayDrawApp window = new MyDrawApp();\n *     window.open();\n * }\n * </pre>\n */\npublic class DrawApplication extends JFrame implements DrawingEditor, PaletteListener {\n\n    private Drawing fDrawing;\n\n    private Tool fTool;\n\n    private Iconkit fIconkit;\n\n    private JTextField fStatusLine;\n\n    private StandardDrawingView fView;\n\n    private ToolButton fDefaultToolButton;\n\n    private ToolButton fSelectedToolButton;\n\n    private String fApplicationName;\n\n    private String fDrawingFilename;\n\n    private StorageFormatManager fStorageFormatManager;\n\n    static String fgUntitled = \"untitled\";\n\n    // the image resource path\n    private static final String fgDrawPath = \"/CH/ifa/draw/\";\n\n    public static final String IMAGES = fgDrawPath + \"images/\";\n\n    /**\n     * The index of the file menu in the menu bar.\n     */\n    public static final int FILE_MENU = 0;\n\n    /**\n     * The index of the edit menu in the menu bar.\n     */\n    public static final int EDIT_MENU = 1;\n\n    /**\n     * The index of the alignment menu in the menu bar.\n     */\n    public static final int ALIGNMENT_MENU = 2;\n\n    /**\n     * The index of the attributes menu in the menu bar.\n     */\n    public static final int ATTRIBUTES_MENU = 3;\n\n    public DrawApplication() {\n        super(\"JHotDraw\");\n    }\n\n    public DrawApplication(String title) {\n        super(title);\n        setApplicationName(title);\n    }\n\n    /**\n     * Factory method which can be overriden by subclasses to\n     * create an instance of their type.\n     *\n     * @return\tnewly created application\n     */\n    protected DrawApplication createApplication() {\n        return new DrawApplication();\n    }\n\n    /**\n     * Open a new view for this application containing a\n     * view of the drawing of the currently activated window.\n     */\n    public void newView() {\n        DrawApplication window = createApplication();\n        window.open();\n        window.setDrawing(drawing());\n        window.setDrawingTitle(getDrawingTitle() + \" (View)\");\n    }\n\n    /**\n     * Open a new window for this application containing\n     * an new (empty) drawing.\n     */\n    public void newWindow() {\n        DrawApplication window = createApplication();\n        window.open();\n    }\n\n    /**\n     * Opens the window and initializes its contents.\n     * Clients usually only call but don't override it.\n     */\n    public void open() {\n        fIconkit = new Iconkit(this);\n        getContentPane().setLayout(new BorderLayout());\n        // Panel in which a JToolBar can be placed using a BoxLayout\n        JPanel fullPanel = new JPanel();\n        fullPanel.setLayout(new BoxLayout(fullPanel, BoxLayout.X_AXIS));\n        fView = createDrawingView();\n        JComponent contents = createContents((StandardDrawingView) view());\n        contents.setAlignmentX(LEFT_ALIGNMENT);\n        JToolBar tools = createToolPalette();\n        createTools(tools);\n        JPanel activePanel = new JPanel();\n        activePanel.setAlignmentX(LEFT_ALIGNMENT);\n        activePanel.setAlignmentY(TOP_ALIGNMENT);\n        activePanel.setLayout(new BorderLayout());\n        activePanel.add(tools, BorderLayout.NORTH);\n        activePanel.add(contents, BorderLayout.CENTER);\n        fullPanel.add(activePanel);\n        fStatusLine = createStatusLine();\n        getContentPane().add(fullPanel, BorderLayout.CENTER);\n        getContentPane().add(fStatusLine, BorderLayout.SOUTH);\n        JMenuBar mb = new JMenuBar();\n        createMenus(mb);\n        setJMenuBar(mb);\n        initDrawing();\n        Dimension d = defaultSize();\n        if (d.width > mb.getPreferredSize().width) {\n            setSize(d.width, d.height);\n        } else {\n            setSize(mb.getPreferredSize().width, d.height);\n        }\n        addListeners();\n        setVisible(true);\n        fStorageFormatManager = createStorageFormatManager();\n    }\n\n    /**\n     * Registers the listeners for this window\n     */\n    protected void addListeners() {\n        addWindowListener(new WindowAdapter() {\n\n            public void windowClosing(WindowEvent event) {\n                exit();\n            }\n        });\n    }\n\n    protected void initDrawing() {\n        setDrawing(createDrawing());\n        setDrawingTitle(fgUntitled);\n        view().setDrawing(drawing());\n        toolDone();\n    }\n\n    /**\n     * Creates the standard menus. Clients override this\n     * method to add additional menus.\n     */\n    protected void createMenus(JMenuBar mb) {\n        mb.add(createFileMenu());\n        mb.add(createEditMenu());\n        mb.add(createAlignmentMenu());\n        mb.add(createAttributesMenu());\n        mb.add(createDebugMenu());\n    }\n\n    /**\n     * Creates the file menu. Clients override this\n     * method to add additional menu items.\n     */\n    protected JMenu createFileMenu() {\n        JMenu menu = new JMenu(\"File\");\n        JMenuItem mi = new JMenuItem(\"New\", new MenuShortcut('n').getKey());\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                promptNew();\n            }\n        });\n        menu.add(mi);\n        mi = new JMenuItem(\"Open...\", new MenuShortcut('o').getKey());\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                promptOpen();\n            }\n        });\n        menu.add(mi);\n        mi = new JMenuItem(\"Save As...\", new MenuShortcut('s').getKey());\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                promptSaveAs();\n            }\n        });\n        menu.add(mi);\n        menu.addSeparator();\n        mi = new JMenuItem(\"Print...\", new MenuShortcut('p').getKey());\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                print();\n            }\n        });\n        menu.add(mi);\n        menu.addSeparator();\n        mi = new JMenuItem(\"Exit\");\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                exit();\n            }\n        });\n        menu.add(mi);\n        return menu;\n    }\n\n    /**\n     * Creates the edit menu. Clients override this\n     * method to add additional menu items.\n     */\n    protected JMenu createEditMenu() {\n        CommandMenu menu = new CommandMenu(\"Edit\");\n        menu.add(new CutCommand(\"Cut\", view()), new MenuShortcut('x'));\n        menu.add(new CopyCommand(\"Copy\", view()), new MenuShortcut('c'));\n        menu.add(new PasteCommand(\"Paste\", view()), new MenuShortcut('v'));\n        menu.addSeparator();\n        menu.add(new DuplicateCommand(\"Duplicate\", view()), new MenuShortcut('d'));\n        menu.add(new DeleteCommand(\"Delete\", view()));\n        menu.addSeparator();\n        menu.add(new GroupCommand(\"Group\", view()));\n        menu.add(new UngroupCommand(\"Ungroup\", view()));\n        menu.addSeparator();\n        menu.add(new SendToBackCommand(\"Send to Back\", view()));\n        menu.add(new BringToFrontCommand(\"Bring to Front\", view()));\n        return menu;\n    }\n\n    /**\n     * Creates the alignment menu. Clients override this\n     * method to add additional menu items.\n     */\n    protected JMenu createAlignmentMenu() {\n        CommandMenu menu = new CommandMenu(\"Align\");\n        menu.add(new ToggleGridCommand(\"Toggle Snap to Grid\", view(), new Point(4, 4)));\n        menu.addSeparator();\n        menu.add(new AlignCommand(\"Lefts\", view(), AlignCommand.LEFTS));\n        menu.add(new AlignCommand(\"Centers\", view(), AlignCommand.CENTERS));\n        menu.add(new AlignCommand(\"Rights\", view(), AlignCommand.RIGHTS));\n        menu.addSeparator();\n        menu.add(new AlignCommand(\"Tops\", view(), AlignCommand.TOPS));\n        menu.add(new AlignCommand(\"Middles\", view(), AlignCommand.MIDDLES));\n        menu.add(new AlignCommand(\"Bottoms\", view(), AlignCommand.BOTTOMS));\n        return menu;\n    }\n\n    /**\n     * Creates the debug menu. Clients override this\n     * method to add additional menu items.\n     */\n    protected JMenu createDebugMenu() {\n        JMenu menu = new JMenu(\"Debug\");\n        JMenuItem mi = new JMenuItem(\"Simple Update\");\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                view().setDisplayUpdate(new SimpleUpdateStrategy());\n            }\n        });\n        menu.add(mi);\n        mi = new JMenuItem(\"Buffered Update\");\n        mi.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                view().setDisplayUpdate(new BufferedUpdateStrategy());\n            }\n        });\n        menu.add(mi);\n        return menu;\n    }\n\n    /**\n     * Creates the attributes menu and its submenus. Clients override this\n     * method to add additional menu items.\n     */\n    protected JMenu createAttributesMenu() {\n        JMenu menu = new JMenu(\"Attributes\");\n        menu.add(createColorMenu(\"Fill Color\", \"FillColor\"));\n        menu.add(createColorMenu(\"Pen Color\", \"FrameColor\"));\n        menu.add(createArrowMenu());\n        menu.addSeparator();\n        menu.add(createFontMenu());\n        menu.add(createFontSizeMenu());\n        menu.add(createFontStyleMenu());\n        menu.add(createColorMenu(\"Text Color\", \"TextColor\"));\n        return menu;\n    }\n\n    /**\n     * Creates the color menu.\n     */\n    protected JMenu createColorMenu(String title, String attribute) {\n        CommandMenu menu = new CommandMenu(title);\n        for (int i = 0; i < ColorMap.size(); i++) menu.add(new ChangeAttributeCommand(ColorMap.name(i), attribute, ColorMap.color(i), view()));\n        return menu;\n    }\n\n    /**\n     * Creates the arrows menu.\n     */\n    protected JMenu createArrowMenu() {\n        CommandMenu menu = new CommandMenu(\"Arrow\");\n        menu.add(new ChangeAttributeCommand(\"none\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_NONE), view()));\n        menu.add(new ChangeAttributeCommand(\"at Start\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_START), view()));\n        menu.add(new ChangeAttributeCommand(\"at End\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_END), view()));\n        menu.add(new ChangeAttributeCommand(\"at Both\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_BOTH), view()));\n        return menu;\n    }\n\n    /**\n     * Creates the fonts menus. It installs all available fonts\n     * supported by the toolkit implementation.\n     */\n    protected JMenu createFontMenu() {\n        CommandMenu menu = new CommandMenu(\"Font\");\n        String[] fonts = Toolkit.getDefaultToolkit().getFontList();\n        for (int i = 0; i < fonts.length; i++) menu.add(new ChangeAttributeCommand(fonts[i], \"FontName\", fonts[i], view()));\n        return menu;\n    }\n\n    /**\n     * Creates the font style menu with entries (Plain, Italic, Bold).\n     */\n    protected JMenu createFontStyleMenu() {\n        CommandMenu menu = new CommandMenu(\"Font Style\");\n        menu.add(new ChangeAttributeCommand(\"Plain\", \"FontStyle\", new Integer(Font.PLAIN), view()));\n        menu.add(new ChangeAttributeCommand(\"Italic\", \"FontStyle\", new Integer(Font.ITALIC), view()));\n        menu.add(new ChangeAttributeCommand(\"Bold\", \"FontStyle\", new Integer(Font.BOLD), view()));\n        return menu;\n    }\n\n    /**\n     * Creates the font size menu.\n     */\n    protected JMenu createFontSizeMenu() {\n        CommandMenu menu = new CommandMenu(\"Font Size\");\n        int[] sizes = { 9, 10, 12, 14, 18, 24, 36, 48, 72 };\n        for (int i = 0; i < sizes.length; i++) {\n            menu.add(new ChangeAttributeCommand(Integer.toString(sizes[i]), \"FontSize\", new Integer(sizes[i]), view()));\n        }\n        return menu;\n    }\n\n    /**\n     * Create a menu which allows the user to select a different look and feel at runtime.\n     */\n    public JMenu createLookAndFeelMenu() {\n        JMenu menu = new JMenu(\"Look'n'Feel\");\n        UIManager.LookAndFeelInfo[] lafs = UIManager.getInstalledLookAndFeels();\n        JMenuItem mi = null;\n        for (int i = 0; i < lafs.length; i++) {\n            mi = new JMenuItem(lafs[i].getName());\n            final String lnfClassName = lafs[i].getClassName();\n            mi.addActionListener(new ActionListener() {\n\n                public void actionPerformed(ActionEvent event) {\n                    newLookAndFeel(lnfClassName);\n                }\n            });\n            menu.add(mi);\n        }\n        return menu;\n    }\n\n    /**\n     * Creates the tool palette.\n     */\n    protected JToolBar createToolPalette() {\n        JToolBar palette = new JToolBar();\n        palette.setBackground(Color.lightGray);\n        // use standard FlowLayout for JToolBar\n        // palette.setLayout(new PaletteLayout(2,new Point(2,2)));\n        return palette;\n    }\n\n    /**\n     * Creates the tools. By default only the selection tool is added.\n     * Override this method to add additional tools.\n     * Call the inherited method to include the selection tool.\n     * @param palette the palette where the tools are added.\n     */\n    protected void createTools(JToolBar palette) {\n        Tool tool = createSelectionTool();\n        fDefaultToolButton = createToolButton(IMAGES + \"SEL\", \"Selection Tool\", tool);\n        palette.add(fDefaultToolButton);\n    }\n\n    /**\n     * Creates the selection tool used in this editor. Override to use\n     * a custom selection tool.\n     */\n    protected Tool createSelectionTool() {\n        return new SelectionTool(view());\n    }\n\n    /**\n     * Creates a tool button with the given image, tool, and text\n     */\n    protected ToolButton createToolButton(String iconName, String toolName, Tool tool) {\n        return new ToolButton(this, iconName, toolName, tool);\n    }\n\n    /**\n     * Creates the drawing view used in this application.\n     * You need to override this method to use a DrawingView\n     * subclass in your application. By default a standard\n     * DrawingView is returned.\n     */\n    protected StandardDrawingView createDrawingView() {\n        Dimension d = getDrawingViewSize();\n        return new StandardDrawingView(this, d.width, d.height);\n    }\n\n    /**\n     * Override to define the dimensions of the drawing view.\n     */\n    protected Dimension getDrawingViewSize() {\n        return new Dimension(800, 800);\n    }\n\n    /**\n     * Creates the drawing used in this application.\n     * You need to override this method to use a Drawing\n     * subclass in your application. By default a standard\n     * Drawing is returned.\n     */\n    protected Drawing createDrawing() {\n        return new StandardDrawing();\n    }\n\n    /**\n     * Creates the contents component of the application\n     * frame. By default the DrawingView is returned in\n     * a JScrollPane.\n     */\n    protected JComponent createContents(StandardDrawingView view) {\n        JScrollPane sp = new JScrollPane(view);\n        sp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n        sp.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);\n        return sp;\n    }\n\n    /**\n     * Factory method to create a StorageFormatManager for supported storage formats.\n     * Different applications might want to use different storage formats and can return\n     * their own format manager by overriding this method.\n     */\n    public StorageFormatManager createStorageFormatManager() {\n        StorageFormatManager storageFormatManager = new StorageFormatManager();\n        storageFormatManager.setDefaultStorageFormat(new StandardStorageFormat());\n        storageFormatManager.addStorageFormat(storageFormatManager.getDefaultStorageFormat());\n        storageFormatManager.addStorageFormat(new SerializationStorageFormat());\n        return storageFormatManager;\n    }\n\n    /**\n     * Set the StorageFormatManager. The StorageFormatManager is used when storing and\n     * restoring Drawing from the file system.\n     */\n    private void setStorageFormatManager(StorageFormatManager storageFormatManager) {\n        fStorageFormatManager = storageFormatManager;\n    }\n\n    /**\n     * Return the StorageFormatManager for this application.The StorageFormatManager is\n     * used when storing and restoring Drawing from the file system.\n     */\n    public StorageFormatManager getStorageFormatManager() {\n        return fStorageFormatManager;\n    }\n\n    /**\n     * Sets the drawing to be edited.\n     */\n    public void setDrawing(Drawing drawing) {\n        view().setDrawing(drawing);\n        fDrawing = drawing;\n    }\n\n    /**\n     * Gets the default size of the window.\n     */\n    protected Dimension defaultSize() {\n        return new Dimension(600, 450);\n    }\n\n    /**\n     * Creates the status line.\n     */\n    protected JTextField createStatusLine() {\n        JTextField field = new JTextField(\"No Tool\", 40);\n        field.setBackground(Color.white);\n        field.setEditable(false);\n        return field;\n    }\n\n    /**\n     * Handles a user selection in the palette.\n     * @see PaletteListener\n     */\n    public void paletteUserSelected(PaletteButton button) {\n        ToolButton toolButton = (ToolButton) button;\n        setTool(toolButton.tool(), toolButton.name());\n        setSelected(toolButton);\n    }\n\n    /**\n     * Handles when the mouse enters or leaves a palette button.\n     * @see PaletteListener\n     */\n    public void paletteUserOver(PaletteButton button, boolean inside) {\n        ToolButton toolButton = (ToolButton) button;\n        if (inside)\n            showStatus(toolButton.name());\n        else\n            showStatus(fSelectedToolButton.name());\n    }\n\n    /**\n     * Gets the current drawing.\n     * @see DrawingEditor\n     */\n    public Drawing drawing() {\n        return fDrawing;\n    }\n\n    /**\n     * Gets the current tool.\n     * @see DrawingEditor\n     */\n    public Tool tool() {\n        return fTool;\n    }\n\n    /**\n     * Gets the current drawing view.\n     * @see DrawingEditor\n     */\n    public DrawingView view() {\n        return fView;\n    }\n\n    /**\n     * Sets the default tool of the editor.\n     * @see DrawingEditor\n     */\n    public void toolDone() {\n        if (fDefaultToolButton != null) {\n            setTool(fDefaultToolButton.tool(), fDefaultToolButton.name());\n            setSelected(fDefaultToolButton);\n        }\n    }\n\n    /**\n     * Handles a change of the current selection. Updates all\n     * menu items that are selection sensitive.\n     * @see DrawingEditor\n     */\n    public void selectionChanged(DrawingView view) {\n        JMenuBar mb = getJMenuBar();\n        CommandMenu editMenu = (CommandMenu) mb.getMenu(EDIT_MENU);\n        editMenu.checkEnabled();\n        CommandMenu alignmentMenu = (CommandMenu) mb.getMenu(ALIGNMENT_MENU);\n        alignmentMenu.checkEnabled();\n    }\n\n    /**\n     * Shows a status message.\n     * @see DrawingEditor\n     */\n    public void showStatus(String string) {\n        fStatusLine.setText(string);\n    }\n\n    private void setTool(Tool t, String name) {\n        if (tool() != null)\n            tool().deactivate();\n        fTool = t;\n        if (tool() != null) {\n            fStatusLine.setText(name);\n            tool().activate();\n        }\n    }\n\n    private void setSelected(ToolButton button) {\n        if (fSelectedToolButton != null)\n            fSelectedToolButton.reset();\n        fSelectedToolButton = button;\n        if (fSelectedToolButton != null)\n            fSelectedToolButton.select();\n    }\n\n    /**\n     * Exits the application. You should never override this method\n     */\n    public void exit() {\n        destroy();\n        // hide the JFrame\n        setVisible(false);\n        // tell windowing system to free resources\n        dispose();\n        System.exit(0);\n    }\n\n    /**\n     * Handles additional clean up operations. Override to destroy\n     * or release drawing editor resources.\n     */\n    protected void destroy() {\n    }\n\n    /**\n     * Resets the drawing to a new empty drawing.\n     */\n    public void promptNew() {\n        initDrawing();\n    }\n\n    /**\n     * Shows a file dialog and opens a drawing.\n     */\n    public void promptOpen() {\n        toolDone();\n        JFileChooser openDialog = createOpenFileChooser();\n        getStorageFormatManager().registerFileFilters(openDialog);\n        if (openDialog.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {\n            StorageFormat foundFormat = getStorageFormatManager().findStorageFormat(openDialog.getFileFilter());\n            if (foundFormat != null) {\n                String file = openDialog.getSelectedFile().getAbsolutePath();\n                try {\n                    Drawing restoredDrawing = foundFormat.restore(file);\n                    if (restoredDrawing != null) {\n                        newWindow();\n                        setDrawing(restoredDrawing);\n                        setDrawingTitle(file);\n                    } else {\n                        showStatus(\"Unknown file type: could not open file '\" + file + \"'\");\n                    }\n                } catch (IOException e) {\n                    showStatus(\"Error: \" + e);\n                }\n            } else {\n                showStatus(\"Not a valid file format: \" + openDialog.getFileFilter().getDescription());\n            }\n        }\n    }\n\n    /**\n     * Shows a file dialog and saves drawing.\n     */\n    public void promptSaveAs() {\n        toolDone();\n        JFileChooser saveDialog1 = new JFileChooser();\n        saveDialog1.setDialogTitle(\"Save File...\");\n        JFileChooser saveDialog = saveDialog1;\n        getStorageFormatManager().registerFileFilters(saveDialog);\n        if (saveDialog.showSaveDialog(this) == JFileChooser.APPROVE_OPTION) {\n            StorageFormat foundFormat = getStorageFormatManager().findStorageFormat(saveDialog.getFileFilter());\n            if (foundFormat != null) {\n                saveDrawing(foundFormat, saveDialog.getSelectedFile().getAbsolutePath());\n            } else {\n                showStatus(\"Not a valid file format: \" + saveDialog.getFileFilter().getDescription());\n            }\n        }\n    }\n\n    /**\n     * Create a file chooser for the open file dialog. Subclasses may override this\n     * method in order to customize the open file dialog.\n     */\n    protected JFileChooser createOpenFileChooser() {\n        JFileChooser openDialog = new JFileChooser();\n        openDialog.setDialogTitle(\"Open File...\");\n        return openDialog;\n    }\n\n    /**\n     * Create a file chooser for the save file dialog. Subclasses may override this\n     * method in order to customize the save file dialog.\n     */\n    protected JFileChooser createSaveFileChooser() {\n        JFileChooser saveDialog = new JFileChooser();\n        saveDialog.setDialogTitle(\"Save File...\");\n        return saveDialog;\n    }\n\n    /**\n     * Prints the drawing.\n     */\n    public void print() {\n        tool().deactivate();\n        PrintJob printJob = getToolkit().getPrintJob(this, \"Print Drawing\", null);\n        if (printJob != null) {\n            Graphics pg = printJob.getGraphics();\n            if (pg != null) {\n                ((StandardDrawingView) view()).printAll(pg);\n                // flush page\n                pg.dispose();\n            }\n            printJob.end();\n        }\n        tool().activate();\n    }\n\n    /**\n     * Save a Drawing in a file\n     */\n    protected void saveDrawing(StorageFormat storeFormat, String file) {\n        try {\n            setDrawingTitle(storeFormat.store(file, drawing()));\n        } catch (IOException e) {\n            showStatus(e.toString());\n        }\n    }\n\n    /**\n     * Load a Drawing from a file\n     */\n    protected void loadDrawing(StorageFormat restoreFormat, String file) {\n        try {\n            Drawing restoredDrawing = restoreFormat.restore(file);\n            if (restoredDrawing != null) {\n                newWindow();\n                setDrawing(restoredDrawing);\n                setDrawingTitle(file);\n            } else {\n                showStatus(\"Unknown file type: could not open file '\" + file + \"'\");\n            }\n        } catch (IOException e) {\n            showStatus(\"Error: \" + e);\n        }\n    }\n\n    /**\n     * Switch to a new Look&Feel\n     */\n    private void newLookAndFeel(String landf) {\n        try {\n            UIManager.setLookAndFeel(landf);\n            SwingUtilities.updateComponentTreeUI(this);\n        } catch (Exception e) {\n            System.err.println(e);\n        }\n    }\n\n    /**\n     * Set the title of the currently selected drawing\n     */\n    protected void setDrawingTitle(String drawingTitle) {\n        fDrawingFilename = drawingTitle;\n        if (fgUntitled.equals(drawingTitle)) {\n            setTitle(getApplicationName());\n        } else {\n            setTitle(getApplicationName() + \" - \" + drawingTitle);\n        }\n    }\n\n    /**\n     * Return the title of the currently selected drawing\n     */\n    protected String getDrawingTitle() {\n        return fDrawingFilename;\n    }\n\n    /**\n     * Set the name of the application build from this skeleton application\n     */\n    public void setApplicationName(String applicationName) {\n        fApplicationName = applicationName;\n    }\n\n    /**\n     * Return the name of the application build from this skeleton application\n     */\n    public String getApplicationName() {\n        return fApplicationName;\n    }\n}",
  "subClasses": []
}