{
  "fullClassName": "CH.ifa.draw.applet.SleeperThread",
  "className": "SleeperThread",
  "index": 1,
  "modifier": "[]",
  "extend": "[Thread]",
  "implement": "[]",
  "packageName": "CH.ifa.draw.applet",
  "packageDeclaration": "package CH.ifa.draw.applet;",
  "classSignature": "class SleeperThread",
  "hasConstructor": true,
  "isPublic": false,
  "isInterface": false,
  "isAbstract": false,
  "imports": [
    "import javax.swing.*;",
    "import java.applet.Applet;",
    "import java.awt.*;",
    "import java.awt.event.*;",
    "import java.util.*;",
    "import java.io.*;",
    "import java.net.*;",
    "import CH.ifa.draw.framework.*;",
    "import CH.ifa.draw.standard.*;",
    "import CH.ifa.draw.figures.*;",
    "import CH.ifa.draw.util.*;"
  ],
  "fields": [
    "JApplet  fApplet;"
  ],
  "superClasses": [
    "Thread"
  ],
  "implementedTypes": [],
  "methodSigs": {
    "run()": "0",
    "SleeperThread(JApplet)": "1"
  },
  "methodsBrief": [
    "public void run(){}",
    "SleeperThread(JApplet applet){}"
  ],
  "constructorSigs": [
    "SleeperThread(JApplet)"
  ],
  "constructorBrief": [
    "SleeperThread(JApplet applet){}"
  ],
  "getterSetterSigs": [],
  "getterSetterBrief": [],
  "constructorDeps": {
    "javax.swing.JApplet": []
  },
  "compilationUnitCode": "/*\n * @(#)DrawApplet.java 5.2\n *\n */\npackage CH.ifa.draw.applet;\n\nimport javax.swing.*;\nimport java.applet.Applet;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.util.*;\nimport java.io.*;\nimport java.net.*;\nimport CH.ifa.draw.framework.*;\nimport CH.ifa.draw.standard.*;\nimport CH.ifa.draw.figures.*;\nimport CH.ifa.draw.util.*;\n\n/**\n * DrawApplication defines a standard presentation for\n * a drawing editor that is run as an applet. The presentation is\n * customized in subclasses.<p>\n * Supported applet parameters: <br>\n * <i>DRAWINGS</i>: a blank separated list of drawing names that is\n *           shown in the drawings choice.\n */\npublic class DrawApplet extends JApplet implements DrawingEditor, PaletteListener {\n\n    transient private Drawing fDrawing;\n\n    transient private Tool fTool;\n\n    transient private StandardDrawingView fView;\n\n    transient private ToolButton fDefaultToolButton;\n\n    transient private ToolButton fSelectedToolButton;\n\n    transient private boolean fSimpleUpdate;\n\n    transient private JButton fUpdateButton;\n\n    transient private JComboBox fFrameColor;\n\n    transient private JComboBox fFillColor;\n\n    transient private JComboBox fTextColor;\n\n    transient private JComboBox fArrowChoice;\n\n    transient private JComboBox fFontChoice;\n\n    transient private Thread fSleeper;\n\n    private Iconkit fIconkit;\n\n    static String fgUntitled = \"untitled\";\n\n    private static final String fgDrawPath = \"/CH/ifa/draw/\";\n\n    public static final String IMAGES = fgDrawPath + \"images/\";\n\n    /**\n     * Initializes the applet and creates its contents.\n     */\n    public void init() {\n        fIconkit = new Iconkit(this);\n        getContentPane().setLayout(new BorderLayout());\n        fView = createDrawingView();\n        JPanel attributes = createAttributesPanel();\n        attributes.add(new JLabel(\"Fill\"));\n        fFillColor = createColorChoice(\"FillColor\");\n        attributes.add(fFillColor);\n        attributes.add(new JLabel(\"Text\"));\n        fTextColor = createColorChoice(\"TextColor\");\n        attributes.add(fTextColor);\n        attributes.add(new JLabel(\"Pen\"));\n        fFrameColor = createColorChoice(\"FrameColor\");\n        attributes.add(fFrameColor);\n        attributes.add(new JLabel(\"Arrow\"));\n        CommandChoice choice = new CommandChoice();\n        fArrowChoice = choice;\n        choice.addItem(new ChangeAttributeCommand(\"none\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_NONE), fView));\n        choice.addItem(new ChangeAttributeCommand(\"at Start\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_START), fView));\n        choice.addItem(new ChangeAttributeCommand(\"at End\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_END), fView));\n        choice.addItem(new ChangeAttributeCommand(\"at Both\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_BOTH), fView));\n        attributes.add(fArrowChoice);\n        attributes.add(new JLabel(\"Font\"));\n        fFontChoice = createFontChoice();\n        attributes.add(fFontChoice);\n        getContentPane().add(\"North\", attributes);\n        JPanel toolPanel = createToolPalette();\n        createTools(toolPanel);\n        getContentPane().add(\"West\", toolPanel);\n        getContentPane().add(\"Center\", fView);\n        JPanel buttonPalette = createButtonPanel();\n        createButtons(buttonPalette);\n        getContentPane().add(\"South\", buttonPalette);\n        initDrawing();\n        // JFC should have its own internal double buffering...\n        // setBufferedDisplayUpdate();\n        setupAttributes();\n    }\n\n    /*\n     * Gets the iconkit to be used in the applet.\n     */\n    /**\n     * * not sure whether this will still be needed on 1.1 enabled browsers\n     *      protected Iconkit iconkit() {\n     *         if (fIconkit == null) {\n     *\n     *             startSleeper();\n     *             loadAllImages(this); // blocks until images loaded\n     *             stopSleeper();\n     *         }\n     *         return fIconkit;\n     *     }\n     */\n    /**\n     * Creates the attributes panel.\n     */\n    protected JPanel createAttributesPanel() {\n        JPanel panel = new JPanel();\n        panel.setLayout(new PaletteLayout(2, new Point(2, 2), false));\n        return panel;\n    }\n\n    /**\n     * Creates the attribute choices. Override to add additional\n     * choices.\n     */\n    protected void createAttributeChoices(JPanel panel) {\n        panel.add(new JLabel(\"Fill\"));\n        fFillColor = createColorChoice(\"FillColor\");\n        panel.add(fFillColor);\n        panel.add(new JLabel(\"Text\"));\n        fTextColor = createColorChoice(\"TextColor\");\n        panel.add(fTextColor);\n        panel.add(new JLabel(\"Pen\"));\n        fFrameColor = createColorChoice(\"FrameColor\");\n        panel.add(fFrameColor);\n        panel.add(new JLabel(\"Arrow\"));\n        CommandChoice choice = new CommandChoice();\n        fArrowChoice = choice;\n        choice.addItem(new ChangeAttributeCommand(\"none\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_NONE), fView));\n        choice.addItem(new ChangeAttributeCommand(\"at Start\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_START), fView));\n        choice.addItem(new ChangeAttributeCommand(\"at End\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_END), fView));\n        choice.addItem(new ChangeAttributeCommand(\"at Both\", \"ArrowMode\", new Integer(PolyLineFigure.ARROW_TIP_BOTH), fView));\n        panel.add(fArrowChoice);\n        panel.add(new JLabel(\"Font\"));\n        CommandChoice choice1 = new CommandChoice();\n        String[] fonts = Toolkit.getDefaultToolkit().getFontList();\n        for (int i = 0; i < fonts.length; i++) choice1.addItem(new ChangeAttributeCommand(fonts[i], \"FontName\", fonts[i], fView));\n        fFontChoice = choice1;\n        panel.add(fFontChoice);\n    }\n\n    /**\n     * Creates the color choice for the given attribute.\n     */\n    protected JComboBox createColorChoice(String attribute) {\n        CommandChoice choice = new CommandChoice();\n        for (int i = 0; i < ColorMap.size(); i++) choice.addItem(new ChangeAttributeCommand(ColorMap.name(i), attribute, ColorMap.color(i), fView));\n        return choice;\n    }\n\n    /**\n     * Creates the font choice. The choice is filled with\n     * all the fonts supported by the toolkit.\n     */\n    protected JComboBox createFontChoice() {\n        CommandChoice choice = new CommandChoice();\n        String[] fonts = Toolkit.getDefaultToolkit().getFontList();\n        for (int i = 0; i < fonts.length; i++) choice.addItem(new ChangeAttributeCommand(fonts[i], \"FontName\", fonts[i], fView));\n        return choice;\n    }\n\n    /**\n     * Creates the buttons panel.\n     */\n    protected JPanel createButtonPanel() {\n        JPanel panel = new JPanel();\n        panel.setLayout(new PaletteLayout(2, new Point(2, 2), false));\n        return panel;\n    }\n\n    /**\n     * Creates the buttons shown in the buttons panel. Override to\n     * add additional buttons.\n     * @param panel the buttons panel.\n     */\n    protected void createButtons(JPanel panel) {\n        panel.add(new Filler(24, 20));\n        JComboBox drawingChoice = new JComboBox();\n        drawingChoice.addItem(fgUntitled);\n        String param = getParameter(\"DRAWINGS\");\n        if (param == null)\n            param = \"\";\n        StringTokenizer st = new StringTokenizer(param);\n        while (st.hasMoreTokens()) drawingChoice.addItem(st.nextToken());\n        // offer choice only if more than one\n        if (drawingChoice.getItemCount() > 1)\n            panel.add(drawingChoice);\n        else\n            panel.add(new JLabel(fgUntitled));\n        drawingChoice.addItemListener(new ItemListener() {\n\n            public void itemStateChanged(ItemEvent e) {\n                if (e.getStateChange() == ItemEvent.SELECTED) {\n                    loadDrawing((String) e.getItem());\n                }\n            }\n        });\n        panel.add(new Filler(6, 20));\n        JButton button;\n        button = new CommandButton(new DeleteCommand(\"Delete\", fView));\n        panel.add(button);\n        button = new CommandButton(new DuplicateCommand(\"Duplicate\", fView));\n        panel.add(button);\n        button = new CommandButton(new GroupCommand(\"Group\", fView));\n        panel.add(button);\n        button = new CommandButton(new UngroupCommand(\"Ungroup\", fView));\n        panel.add(button);\n        button = new JButton(\"Help\");\n        button.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                showHelp();\n            }\n        });\n        panel.add(button);\n        fUpdateButton = new JButton(\"Simple Update\");\n        fUpdateButton.addActionListener(new ActionListener() {\n\n            public void actionPerformed(ActionEvent event) {\n                if (fSimpleUpdate)\n                    setBufferedDisplayUpdate();\n                else\n                    setSimpleDisplayUpdate();\n            }\n        });\n        // panel.add(fUpdateButton); // not shown currently\n    }\n\n    /**\n     * Creates the tools palette.\n     */\n    protected JPanel createToolPalette() {\n        JPanel palette = new JPanel();\n        palette.setLayout(new PaletteLayout(2, new Point(2, 2)));\n        return palette;\n    }\n\n    /**\n     * Creates the tools. By default only the selection tool is added.\n     * Override this method to add additional tools.\n     * Call the inherited method to include the selection tool.\n     * @param palette the palette where the tools are added.\n     */\n    protected void createTools(JPanel palette) {\n        Tool tool = createSelectionTool();\n        fDefaultToolButton = createToolButton(IMAGES + \"SEL\", \"Selection Tool\", tool);\n        palette.add(fDefaultToolButton);\n    }\n\n    /**\n     * Creates the selection tool used in this editor. Override to use\n     * a custom selection tool.\n     */\n    protected Tool createSelectionTool() {\n        return new SelectionTool(view());\n    }\n\n    /**\n     * Creates a tool button with the given image, tool, and text\n     */\n    protected ToolButton createToolButton(String iconName, String toolName, Tool tool) {\n        return new ToolButton(this, iconName, toolName, tool);\n    }\n\n    /**\n     * Creates the drawing used in this application.\n     * You need to override this method to use a Drawing\n     * subclass in your application. By default a standard\n     * Drawing is returned.\n     */\n    protected Drawing createDrawing() {\n        return new StandardDrawing();\n    }\n\n    /**\n     * Creates the drawing view used in this application.\n     * You need to override this method to use a DrawingView\n     * subclass in your application. By default a standard\n     * DrawingView is returned.\n     */\n    protected StandardDrawingView createDrawingView() {\n        return new StandardDrawingView(this, 410, 370);\n    }\n\n    /**\n     * Handles a user selection in the palette.\n     * @see PaletteListener\n     */\n    public void paletteUserSelected(PaletteButton button) {\n        ToolButton toolButton = (ToolButton) button;\n        setTool(toolButton.tool(), toolButton.name());\n        setSelected(toolButton);\n    }\n\n    /**\n     * Handles when the mouse enters or leaves a palette button.\n     * @see PaletteListener\n     */\n    public void paletteUserOver(PaletteButton button, boolean inside) {\n        if (inside)\n            showStatus(((ToolButton) button).name());\n        else\n            showStatus(fSelectedToolButton.name());\n    }\n\n    /**\n     * Gets the current drawing.\n     * @see DrawingEditor\n     */\n    public Drawing drawing() {\n        return fDrawing;\n    }\n\n    /**\n     * Gets the current tool.\n     * @see DrawingEditor\n     */\n    public Tool tool() {\n        return fTool;\n    }\n\n    /**\n     * Gets the current drawing view.\n     * @see DrawingEditor\n     */\n    public DrawingView view() {\n        return fView;\n    }\n\n    /**\n     * Sets the default tool of the editor.\n     * @see DrawingEditor\n     */\n    public void toolDone() {\n        setTool(fDefaultToolButton.tool(), fDefaultToolButton.name());\n        setSelected(fDefaultToolButton);\n    }\n\n    /**\n     * Handles a change of the current selection. Updates all\n     * menu items that are selection sensitive.\n     * @see DrawingEditor\n     */\n    public void selectionChanged(DrawingView view) {\n        setupAttributes();\n    }\n\n    private void initDrawing() {\n        fDrawing = createDrawing();\n        fView.setDrawing(fDrawing);\n        toolDone();\n    }\n\n    private void setTool(Tool t, String name) {\n        if (fTool != null)\n            fTool.deactivate();\n        fTool = t;\n        if (fTool != null) {\n            showStatus(name);\n            fTool.activate();\n        }\n    }\n\n    private void setSelected(ToolButton button) {\n        if (fSelectedToolButton != null)\n            fSelectedToolButton.reset();\n        fSelectedToolButton = button;\n        if (fSelectedToolButton != null)\n            fSelectedToolButton.select();\n    }\n\n    protected void loadDrawing(String param) {\n        if (param == fgUntitled) {\n            fDrawing.release();\n            initDrawing();\n            return;\n        }\n        String filename = getParameter(param);\n        if (filename != null) {\n            toolDone();\n            String type = guessType(filename);\n            if (type.equals(\"storable\"))\n                readFromStorableInput(filename);\n            else if (type.equals(\"serialized\"))\n                readFromObjectInput(filename);\n            else\n                showStatus(\"Unknown file type\");\n        }\n    }\n\n    private void readDrawing(String filename) {\n        toolDone();\n        String type = guessType(filename);\n        if (type.equals(\"storable\"))\n            readFromStorableInput(filename);\n        else if (type.equals(\"serialized\"))\n            try {\n                URL url = new URL(getCodeBase(), filename);\n                InputStream stream = url.openStream();\n                ObjectInput input = new ObjectInputStream(stream);\n                fDrawing.release();\n                fDrawing = (Drawing) input.readObject();\n                fView.setDrawing(fDrawing);\n            } catch (IOException e) {\n                initDrawing();\n                showStatus(\"Error: \" + e);\n            } catch (ClassNotFoundException e) {\n                initDrawing();\n                showStatus(\"Class not found: \" + e);\n            }\n        else\n            showStatus(\"Unknown file type\");\n    }\n\n    private void readFromStorableInput(String filename) {\n        try {\n            URL url = new URL(getCodeBase(), filename);\n            InputStream stream = url.openStream();\n            StorableInput input = new StorableInput(stream);\n            fDrawing.release();\n            fDrawing = (Drawing) input.readStorable();\n            fView.setDrawing(fDrawing);\n        } catch (IOException e) {\n            fDrawing = createDrawing();\n            fView.setDrawing(fDrawing);\n            toolDone();\n            showStatus(\"Error:\" + e);\n        }\n    }\n\n    private void readFromObjectInput(String filename) {\n        try {\n            URL url = new URL(getCodeBase(), filename);\n            InputStream stream = url.openStream();\n            ObjectInput input = new ObjectInputStream(stream);\n            fDrawing.release();\n            fDrawing = (Drawing) input.readObject();\n            fView.setDrawing(fDrawing);\n        } catch (IOException e) {\n            fDrawing = createDrawing();\n            fView.setDrawing(fDrawing);\n            toolDone();\n            showStatus(\"Error: \" + e);\n        } catch (ClassNotFoundException e) {\n            initDrawing();\n            showStatus(\"Class not found: \" + e);\n        }\n    }\n\n    private String guessType(String file) {\n        if (file.endsWith(\".draw\"))\n            return \"storable\";\n        if (file.endsWith(\".ser\"))\n            return \"serialized\";\n        return \"unknown\";\n    }\n\n    private void setupAttributes() {\n        Color frameColor = (Color) AttributeFigure.getDefaultAttribute(\"FrameColor\");\n        Color fillColor = (Color) AttributeFigure.getDefaultAttribute(\"FillColor\");\n        Color textColor = (Color) AttributeFigure.getDefaultAttribute(\"TextColor\");\n        Integer arrowMode = (Integer) AttributeFigure.getDefaultAttribute(\"ArrowMode\");\n        String fontName = (String) AttributeFigure.getDefaultAttribute(\"FontName\");\n        FigureEnumeration k = fView.selectionElements();\n        while (k.hasMoreElements()) {\n            Figure f = k.nextFigure();\n            frameColor = (Color) f.getAttribute(\"FrameColor\");\n            fillColor = (Color) f.getAttribute(\"FillColor\");\n            textColor = (Color) f.getAttribute(\"TextColor\");\n            arrowMode = (Integer) f.getAttribute(\"ArrowMode\");\n            fontName = (String) f.getAttribute(\"FontName\");\n        }\n        fFrameColor.setSelectedIndex(ColorMap.colorIndex(frameColor));\n        fFillColor.setSelectedIndex(ColorMap.colorIndex(fillColor));\n        // fTextColor.select(ColorMap.colorIndex(textColor));\n        if (arrowMode != null)\n            fArrowChoice.setSelectedIndex(arrowMode.intValue());\n        if (fontName != null)\n            fFontChoice.setSelectedItem(fontName);\n    }\n\n    protected void setSimpleDisplayUpdate() {\n        fView.setDisplayUpdate(new SimpleUpdateStrategy());\n        fUpdateButton.setText(\"Simple Update\");\n        fSimpleUpdate = true;\n    }\n\n    protected void setBufferedDisplayUpdate() {\n        fView.setDisplayUpdate(new BufferedUpdateStrategy());\n        fUpdateButton.setText(\"Buffered Update\");\n        fSimpleUpdate = false;\n    }\n\n    /**\n     * Shows a help page for the applet. The URL of the help\n     * page is derived as follows: codeBase+appletClassname+Help.html\"\n     */\n    protected void showHelp() {\n        try {\n            String appletPath = getClass().getName().replace('.', '/');\n            URL url = new URL(getCodeBase(), appletPath + \"Help.html\");\n            getAppletContext().showDocument(url, \"Help\");\n        } catch (IOException e) {\n            showStatus(\"Help file not found\");\n        }\n    }\n\n    /**\n     * *** netscape browser work around ***\n     */\n    private void startSleeper() {\n        if (fSleeper == null)\n            fSleeper = new SleeperThread(this);\n        fSleeper.start();\n    }\n\n    private void stopSleeper() {\n        if (fSleeper != null)\n            fSleeper.stop();\n    }\n}\n\nclass SleeperThread extends Thread {\n\n    JApplet fApplet;\n\n    SleeperThread(JApplet applet) {\n        fApplet = applet;\n    }\n\n    public void run() {\n        try {\n            for (; ; ) {\n                fApplet.showStatus(\"loading icons...\");\n                sleep(50);\n            }\n        } catch (InterruptedException e) {\n            return;\n        }\n    }\n}\n",
  "classDeclarationCode": "class SleeperThread extends Thread {\n\n    JApplet fApplet;\n\n    SleeperThread(JApplet applet) {\n        fApplet = applet;\n    }\n\n    public void run() {\n        try {\n            for (; ; ) {\n                fApplet.showStatus(\"loading icons...\");\n                sleep(50);\n            }\n        } catch (InterruptedException e) {\n            return;\n        }\n    }\n}",
  "subClasses": []
}