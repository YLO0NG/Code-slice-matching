{
  "fullClassName": "classes.PurchaseOrderAction",
  "className": "PurchaseOrderAction",
  "index": 10,
  "modifier": "[public ]",
  "extend": "[ExampleSupport]",
  "implement": "[RequestAware, ParameterAware]",
  "packageName": "classes",
  "packageDeclaration": "package classes;",
  "classSignature": "public class PurchaseOrderAction",
  "hasConstructor": false,
  "isPublic": true,
  "isInterface": false,
  "isAbstract": false,
  "imports": [
    "import java.util.Date;",
    "import java.util.Iterator;",
    "import java.util.List;",
    "import java.util.Map;",
    "import org.apache.log4j.Logger;",
    "import org.apache.struts2.interceptor.ParameterAware;",
    "import org.apache.struts2.interceptor.RequestAware;",
    "import org.hibernate.Criteria;",
    "import org.hibernate.Session;",
    "import org.hibernate.Transaction;",
    "import org.hibernate.criterion.Example;",
    "import org.hibernate.criterion.MatchMode;",
    "import org.hibernate.criterion.Restrictions;",
    "import com.opensymphony.xwork2.ActionContext;"
  ],
  "fields": [
    "private static Logger logger = Logger.getLogger(PurchaseOrderAction.class);",
    "private Map<String, Object> request;",
    "private Map<String, String[]> parameters;",
    "private PurchaseOrder purchaseOrder;",
    "private String task;"
  ],
  "superClasses": [
    "ExampleSupport"
  ],
  "implementedTypes": [
    "RequestAware",
    "ParameterAware"
  ],
  "methodSigs": {
    "setRequest(Map)": "0",
    "setParameters(Map)": "1",
    "getPurchaseOrder()": "2",
    "setPurchaseOrder(PurchaseOrder)": "3",
    "getTask()": "4",
    "setTask(String)": "5",
    "execute()": "6",
    "input()": "7",
    "find()": "8",
    "save()": "9",
    "update()": "10",
    "delete()": "11",
    "edit()": "12",
    "validate()": "13"
  },
  "methodsBrief": [
    "@Override\r\n\tpublic void setRequest( Map<String, Object> map ){}",
    "@Override\r\n\tpublic void setParameters( Map<String, String[]> parameters ){}",
    "public PurchaseOrder getPurchaseOrder(){}",
    "public void setPurchaseOrder( PurchaseOrder purchaseOrder ){}",
    "public String getTask(){}",
    "public void setTask( String task ){}",
    "@Override\r\n\tpublic String execute() throws Exception{}",
    "@Override\r\n\tpublic String input() throws Exception{}",
    "public String find() throws Exception{}",
    "public String save() throws Exception{}",
    "public String update() throws Exception{}",
    "public String delete() throws Exception{}",
    "public String edit() throws Exception{}",
    "@Override\r\n\tpublic void validate(){}"
  ],
  "constructorSigs": [],
  "constructorBrief": [],
  "getterSetterSigs": [
    "setRequest(Map)",
    "setParameters(Map)",
    "getPurchaseOrder()",
    "setPurchaseOrder(PurchaseOrder)",
    "getTask()",
    "setTask(String)"
  ],
  "getterSetterBrief": [
    "@Override\r\n\tpublic void setRequest( Map<String, Object> map ){}",
    "@Override\r\n\tpublic void setParameters( Map<String, String[]> parameters ){}",
    "public PurchaseOrder getPurchaseOrder(){}",
    "public void setPurchaseOrder( PurchaseOrder purchaseOrder ){}",
    "public String getTask(){}",
    "public void setTask( String task ){}"
  ],
  "constructorDeps": {},
  "compilationUnitCode": "/*\n * $Id: Login.java 471756 2006-11-06 15:01:43Z husted $\n *\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\npackage classes;\n\nimport java.util.Date;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Map;\nimport org.apache.log4j.Logger;\nimport org.apache.struts2.interceptor.ParameterAware;\nimport org.apache.struts2.interceptor.RequestAware;\nimport org.hibernate.Criteria;\nimport org.hibernate.Session;\nimport org.hibernate.Transaction;\nimport org.hibernate.criterion.Example;\nimport org.hibernate.criterion.MatchMode;\nimport org.hibernate.criterion.Restrictions;\nimport com.opensymphony.xwork2.ActionContext;\n\npublic class PurchaseOrderAction extends ExampleSupport implements RequestAware, ParameterAware {\n\n    // f:log\n    private static Logger logger = Logger.getLogger(PurchaseOrderAction.class);\n\n    private Map<String, Object> request;\n\n    private Map<String, String[]> parameters;\n\n    private PurchaseOrder purchaseOrder;\n\n    private String task;\n\n    @Override\n    public void setRequest(Map<String, Object> map) {\n        request = map;\n    }\n\n    @Override\n    public void setParameters(Map<String, String[]> parameters) {\n        this.parameters = parameters;\n    }\n\n    public PurchaseOrder getPurchaseOrder() {\n        return this.purchaseOrder;\n    }\n\n    public void setPurchaseOrder(PurchaseOrder purchaseOrder) {\n        this.purchaseOrder = purchaseOrder;\n    }\n\n    public String getTask() {\n        return this.task;\n    }\n\n    public void setTask(String task) {\n        this.task = task;\n    }\n\n    @Override\n    public String execute() throws Exception {\n        return this.input();\n    }\n\n    @Override\n    public String input() throws Exception {\n        // f:log\n        logger.info(\"Starting input()\");\n        this.task = SystemConstants.CR_MODE;\n        this.purchaseOrder = null;\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        Criteria criteria = sess.createCriteria(Customer.class);\n        @SuppressWarnings(\"unchecked\")\n        List<Customer> // f:hibernate\n        lc = (List<Customer>) criteria.list();\n        ActionContext.getContext().getSession().put(\"listCustomer\", lc);\n        // f:hibernate\n        criteria = sess.createCriteria(Product.class);\n        @SuppressWarnings(\"unchecked\")\n        List<Product> // f:hibernate\n        lp = (List<Product>) criteria.list();\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        ActionContext.getContext().getSession().put(\"listProduct\", lp);\n        // f:log\n        logger.info(\"Finishing input()\");\n        return INPUT;\n    }\n\n    public String find() throws Exception {\n        // f:log\n        logger.info(\"Starting find()\");\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        Criteria criteria = sess.createCriteria(PurchaseOrder.class);\n        // f:hibernate\n        criteria.add(Example.create(this.purchaseOrder).excludeZeroes().ignoreCase().enableLike(MatchMode.ANYWHERE));\n        if (this.purchaseOrder.getId() != null) {\n            // f:hibernate\n            // f:hibernate\n            criteria.add(Restrictions.idEq(this.purchaseOrder.getId()));\n        }\n        // f:hibernate\n        if (this.purchaseOrder.getCustomer().getId() != null) {\n            // f:hibernate\n            // f:hibernate\n            criteria.add(Restrictions.eq(\"customer\", this.purchaseOrder.getCustomer()));\n        }\n        // f:hibernate\n        // f:hibernate\n        criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);\n        @SuppressWarnings(\"unchecked\")\n        List<PurchaseOrder> // f:hibernate\n        l = (List<PurchaseOrder>) criteria.list();\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        request.put(\"list\", l);\n        this.task = SystemConstants.CR_MODE;\n        // f:log\n        logger.info(\"Finishing input()\");\n        return INPUT;\n    }\n\n    public String save() throws Exception {\n        // f:log\n        logger.info(\"Starting save()\");\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        sess.save(this.purchaseOrder);\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        this.purchaseOrder.setOrderDate(new Date());\n        for (PurchaseOrderItem item : this.purchaseOrder.getPurchaseOrderItems()) {\n            item.setPurchaseOrder(this.purchaseOrder);\n        }\n        this.task = SystemConstants.UD_MODE;\n        this.addActionMessage(this.getText(\"saveSuccessful\", new String[] { \"order\" }));\n        // f:log\n        logger.info(\"Finishing save()\");\n        return INPUT;\n    }\n\n    public String update() throws Exception {\n        // f:log\n        logger.info(\"Starting update()\");\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        sess.update(this.purchaseOrder);\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        for (PurchaseOrderItem item : this.purchaseOrder.getPurchaseOrderItems()) {\n            item.setPurchaseOrder(this.purchaseOrder);\n        }\n        this.task = SystemConstants.UD_MODE;\n        this.addActionMessage(this.getText(\"updateSuccessful\", new String[] { \"order\" }));\n        // f:log\n        logger.info(\"Finishing update()\");\n        return INPUT;\n    }\n\n    public String delete() throws Exception {\n        // f:log\n        logger.info(\"Starting delete()\");\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        sess.delete(this.purchaseOrder);\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        this.task = SystemConstants.CR_MODE;\n        this.addActionMessage(this.getText(\"deleteSuccessful\", new String[] { \"order\" }));\n        // f:log\n        logger.info(\"Finishing delete()\");\n        return this.input();\n    }\n\n    public String edit() throws Exception {\n        // f:log\n        logger.info(\"Starting edit()\");\n        Integer id = Integer.valueOf(this.parameters.get(\"id\")[0]);\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        PurchaseOrder po = (PurchaseOrder) sess.get(PurchaseOrder.class, id);\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        this.setPurchaseOrder(po);\n        this.task = SystemConstants.UD_MODE;\n        // f:log\n        logger.info(\"Finishing edit()\");\n        return INPUT;\n    }\n\n    @Override\n    public void validate() {\n        // f:log\n        logger.info(\"Starting validate()\");\n        super.validate();\n        int i = 0;\n        for (Iterator<PurchaseOrderItem> it = this.purchaseOrder.getPurchaseOrderItems().iterator(); it.hasNext(); i++) {\n            PurchaseOrderItem item = it.next();\n            if (item.getProduct().getId() != null || item.getPrice() != null || item.getQuantity() != null || i == 0) {\n                if (item.getProduct().getId() == null) {\n                    this.addFieldError(\"item\" + i + \"_product\", getText(\"requiredspecific\", new String[] { \"Product\" }));\n                }\n                if (item.getPrice() == null) {\n                    this.addFieldError(\"item\" + i + \"_price\", getText(\"requiredspecific\", new String[] { \"Price\" }));\n                }\n                if (item.getQuantity() == null) {\n                    this.addFieldError(\"item\" + i + \"_quantity\", getText(\"requiredspecific\", new String[] { \"Quantity\" }));\n                }\n            } else {\n                it.remove();\n            }\n        }\n        // f:log\n        logger.info(\"Finishing validate()\");\n    }\n}\n",
  "classDeclarationCode": "public class PurchaseOrderAction extends ExampleSupport implements RequestAware, ParameterAware {\n\n    // f:log\n    private static Logger logger = Logger.getLogger(PurchaseOrderAction.class);\n\n    private Map<String, Object> request;\n\n    private Map<String, String[]> parameters;\n\n    private PurchaseOrder purchaseOrder;\n\n    private String task;\n\n    @Override\n    public void setRequest(Map<String, Object> map) {\n        request = map;\n    }\n\n    @Override\n    public void setParameters(Map<String, String[]> parameters) {\n        this.parameters = parameters;\n    }\n\n    public PurchaseOrder getPurchaseOrder() {\n        return this.purchaseOrder;\n    }\n\n    public void setPurchaseOrder(PurchaseOrder purchaseOrder) {\n        this.purchaseOrder = purchaseOrder;\n    }\n\n    public String getTask() {\n        return this.task;\n    }\n\n    public void setTask(String task) {\n        this.task = task;\n    }\n\n    @Override\n    public String execute() throws Exception {\n        return this.input();\n    }\n\n    @Override\n    public String input() throws Exception {\n        // f:log\n        logger.info(\"Starting input()\");\n        this.task = SystemConstants.CR_MODE;\n        this.purchaseOrder = null;\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        Criteria criteria = sess.createCriteria(Customer.class);\n        @SuppressWarnings(\"unchecked\")\n        List<Customer> // f:hibernate\n        lc = (List<Customer>) criteria.list();\n        ActionContext.getContext().getSession().put(\"listCustomer\", lc);\n        // f:hibernate\n        criteria = sess.createCriteria(Product.class);\n        @SuppressWarnings(\"unchecked\")\n        List<Product> // f:hibernate\n        lp = (List<Product>) criteria.list();\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        ActionContext.getContext().getSession().put(\"listProduct\", lp);\n        // f:log\n        logger.info(\"Finishing input()\");\n        return INPUT;\n    }\n\n    public String find() throws Exception {\n        // f:log\n        logger.info(\"Starting find()\");\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        Criteria criteria = sess.createCriteria(PurchaseOrder.class);\n        // f:hibernate\n        criteria.add(Example.create(this.purchaseOrder).excludeZeroes().ignoreCase().enableLike(MatchMode.ANYWHERE));\n        if (this.purchaseOrder.getId() != null) {\n            // f:hibernate\n            // f:hibernate\n            criteria.add(Restrictions.idEq(this.purchaseOrder.getId()));\n        }\n        // f:hibernate\n        if (this.purchaseOrder.getCustomer().getId() != null) {\n            // f:hibernate\n            // f:hibernate\n            criteria.add(Restrictions.eq(\"customer\", this.purchaseOrder.getCustomer()));\n        }\n        // f:hibernate\n        // f:hibernate\n        criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);\n        @SuppressWarnings(\"unchecked\")\n        List<PurchaseOrder> // f:hibernate\n        l = (List<PurchaseOrder>) criteria.list();\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        request.put(\"list\", l);\n        this.task = SystemConstants.CR_MODE;\n        // f:log\n        logger.info(\"Finishing input()\");\n        return INPUT;\n    }\n\n    public String save() throws Exception {\n        // f:log\n        logger.info(\"Starting save()\");\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        sess.save(this.purchaseOrder);\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        this.purchaseOrder.setOrderDate(new Date());\n        for (PurchaseOrderItem item : this.purchaseOrder.getPurchaseOrderItems()) {\n            item.setPurchaseOrder(this.purchaseOrder);\n        }\n        this.task = SystemConstants.UD_MODE;\n        this.addActionMessage(this.getText(\"saveSuccessful\", new String[] { \"order\" }));\n        // f:log\n        logger.info(\"Finishing save()\");\n        return INPUT;\n    }\n\n    public String update() throws Exception {\n        // f:log\n        logger.info(\"Starting update()\");\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        sess.update(this.purchaseOrder);\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        for (PurchaseOrderItem item : this.purchaseOrder.getPurchaseOrderItems()) {\n            item.setPurchaseOrder(this.purchaseOrder);\n        }\n        this.task = SystemConstants.UD_MODE;\n        this.addActionMessage(this.getText(\"updateSuccessful\", new String[] { \"order\" }));\n        // f:log\n        logger.info(\"Finishing update()\");\n        return INPUT;\n    }\n\n    public String delete() throws Exception {\n        // f:log\n        logger.info(\"Starting delete()\");\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        sess.delete(this.purchaseOrder);\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        this.task = SystemConstants.CR_MODE;\n        this.addActionMessage(this.getText(\"deleteSuccessful\", new String[] { \"order\" }));\n        // f:log\n        logger.info(\"Finishing delete()\");\n        return this.input();\n    }\n\n    public String edit() throws Exception {\n        // f:log\n        logger.info(\"Starting edit()\");\n        Integer id = Integer.valueOf(this.parameters.get(\"id\")[0]);\n        // f:hibernate\n        Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        PurchaseOrder po = (PurchaseOrder) sess.get(PurchaseOrder.class, id);\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        this.setPurchaseOrder(po);\n        this.task = SystemConstants.UD_MODE;\n        // f:log\n        logger.info(\"Finishing edit()\");\n        return INPUT;\n    }\n\n    @Override\n    public void validate() {\n        // f:log\n        logger.info(\"Starting validate()\");\n        super.validate();\n        int i = 0;\n        for (Iterator<PurchaseOrderItem> it = this.purchaseOrder.getPurchaseOrderItems().iterator(); it.hasNext(); i++) {\n            PurchaseOrderItem item = it.next();\n            if (item.getProduct().getId() != null || item.getPrice() != null || item.getQuantity() != null || i == 0) {\n                if (item.getProduct().getId() == null) {\n                    this.addFieldError(\"item\" + i + \"_product\", getText(\"requiredspecific\", new String[] { \"Product\" }));\n                }\n                if (item.getPrice() == null) {\n                    this.addFieldError(\"item\" + i + \"_price\", getText(\"requiredspecific\", new String[] { \"Price\" }));\n                }\n                if (item.getQuantity() == null) {\n                    this.addFieldError(\"item\" + i + \"_quantity\", getText(\"requiredspecific\", new String[] { \"Quantity\" }));\n                }\n            } else {\n                it.remove();\n            }\n        }\n        // f:log\n        logger.info(\"Finishing validate()\");\n    }\n}",
  "subClasses": []
}