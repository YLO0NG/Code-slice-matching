{
  "className": "SupplyMailJob",
  "methodName": "execute",
  "brief": "public void execute( JobExecutionContext context )\r\n\t\t\tthrows JobExecutionException{}",
  "methodSignature": "execute(JobExecutionContext)",
  "sourceCode": "public void execute( JobExecutionContext context )\n\t\t\tthrows JobExecutionException {\n\t\tlogger.info( \"Starting execute() in job\" ); //f:log\n\n\t\torg.hibernate.Session sess = HibernateUtil.getSessionFactory().openSession(); //f:hibernate\n\t\tTransaction t = sess.beginTransaction(); //f:hibernate\n\n\t\tCriteria criteria = sess.createCriteria( Product.class ); //f:hibernate\n\t\tcriteria.add( Restrictions.lt( \"supply\", 5 ) ); //f:hibernate\n\n\t\t@SuppressWarnings(\"unchecked\")\n\t\tList<Product> l = (List<Product>) criteria.list(); //f:hibernate\n\t\tt.commit(); //f:hibernate\n\t\tsess.close(); //f:hibernate\n\n\t\tif ( !l.isEmpty() ) {\n\t\t\tStringBuilder str = new StringBuilder();\n\t\t\tstr.append( \"The following products are getting over:\\n\" );\n\n\t\t\tProperties props = new Properties(); //f:mail\n\t\t\tprops.setProperty( \"mail.smtp.submitter\", \"terra\" ); //f:mail\n\t\t\tprops.setProperty( \"mail.smtp.auth\", \"false\" ); //f:mail\n\t\t\tprops.setProperty( \"mail.smtp.host\", this.host ); //f:mail\n\t\t\tprops.setProperty( \"mail.smtp.port\", \"25\" ); //f:mail\n\n\t\t\tjavax.mail.Session session = javax.mail.Session.getInstance( props ); //f:mail\n\n\t\t\ttry { //f:mail\n\t\t\t\tMessage msg = new MimeMessage( session ); //f:mail\n\n\t\t\t\tmsg.setFrom( new InternetAddress( this.from ) ); //f:mail\n\t\t\t\tInternetAddress[] address = { new InternetAddress( this.to ) }; //f:mail\n\t\t\t\tmsg.setRecipients( Message.RecipientType.TO, address ); //f:mail\n\t\t\t\tmsg.setSubject( \"Low Supply of Products\" ); //f:mail\n\t\t\t\tmsg.setSentDate( new Date() ); //f:mail\n\n\t\t\t\tmsg.setText( str.toString() ); //f:mail\n\n\t\t\t\tTransport.send( msg ); //f:mail\n\t\t\t} catch (MessagingException mex) {\n\t\t\t\tmex.printStackTrace();\n\t\t\t}\n\n\t\t\tfor ( Product p : l ) {\n\t\t\t\tstr.append( p.getName() + \"\\t\\t\" + p.getSupply() + \"\\n\" );\n\t\t\t}\n\t\t}\n\n\t\tlogger.info( \"Finishing execute() in job\" ); //f:log\n\t}",
  "useField": true,
  "isConstructor": false,
  "isGetSet": false,
  "isPublic": true,
  "isBoolean": false,
  "isAbstract": false,
  "parameters": [
    "JobExecutionContext"
  ],
  "dependentMethods": {
    "classes.HibernateUtil": [
      "getSessionFactory()"
    ],
    "java.util.List": [
      "isEmpty()"
    ],
    "java.lang.StringBuilder": [
      "toString()",
      "append(String)"
    ],
    "java.util.Properties": [
      "setProperty(String, String)"
    ],
    "classes.Product": [
      "getSupply()",
      "getName()"
    ]
  },
  "full_method_info": "public void execute(JobExecutionContext context) throws JobExecutionException {\n    // f:log\n    logger.info(\"Starting execute() in job\");\n    // f:hibernate\n    org.hibernate.Session sess = HibernateUtil.getSessionFactory().openSession();\n    // f:hibernate\n    Transaction t = sess.beginTransaction();\n    // f:hibernate\n    Criteria criteria = sess.createCriteria(Product.class);\n    // f:hibernate\n    criteria.add(Restrictions.lt(\"supply\", 5));\n    @SuppressWarnings(\"unchecked\")\n    List<Product> // f:hibernate\n    l = (List<Product>) criteria.list();\n    // f:hibernate\n    t.commit();\n    // f:hibernate\n    sess.close();\n    if (!l.isEmpty()) {\n        StringBuilder str = new StringBuilder();\n        str.append(\"The following products are getting over:\\n\");\n        // f:mail\n        Properties props = new Properties();\n        // f:mail\n        props.setProperty(\"mail.smtp.submitter\", \"terra\");\n        // f:mail\n        props.setProperty(\"mail.smtp.auth\", \"false\");\n        // f:mail\n        props.setProperty(\"mail.smtp.host\", this.host);\n        // f:mail\n        props.setProperty(\"mail.smtp.port\", \"25\");\n        // f:mail\n        javax.mail.Session session = javax.mail.Session.getInstance(props);\n        try {\n            // f:mail\n            // f:mail\n            Message msg = new MimeMessage(session);\n            // f:mail\n            msg.setFrom(new InternetAddress(this.from));\n            // f:mail\n            InternetAddress[] address = { new InternetAddress(this.to) };\n            // f:mail\n            msg.setRecipients(Message.RecipientType.TO, address);\n            // f:mail\n            msg.setSubject(\"Low Supply of Products\");\n            // f:mail\n            msg.setSentDate(new Date());\n            // f:mail\n            msg.setText(str.toString());\n            // f:mail\n            Transport.send(msg);\n        } catch (MessagingException mex) {\n            mex.printStackTrace();\n        }\n        for (Product p : l) {\n            str.append(p.getName() + \"\\t\\t\" + p.getSupply() + \"\\n\");\n        }\n    }\n    // f:log\n    logger.info(\"Finishing execute() in job\");\n}",
  "method_comment": "",
  "method_annotation": ""
}