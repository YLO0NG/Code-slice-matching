{
  "fullClassName": "classes.SupplyMailJob",
  "className": "SupplyMailJob",
  "index": 15,
  "modifier": "[public ]",
  "extend": "[]",
  "implement": "[Job]",
  "packageName": "classes",
  "packageDeclaration": "package classes;",
  "classSignature": "public class SupplyMailJob",
  "hasConstructor": false,
  "isPublic": true,
  "isInterface": false,
  "isAbstract": false,
  "imports": [
    "import java.util.Date;",
    "import java.util.List;",
    "import java.util.Properties;",
    "import javax.mail.Message;",
    "import javax.mail.MessagingException;",
    "import javax.mail.Transport;",
    "import javax.mail.internet.InternetAddress;",
    "import javax.mail.internet.MimeMessage;",
    "import org.apache.log4j.Logger;",
    "import org.hibernate.Criteria;",
    "import org.hibernate.Transaction;",
    "import org.hibernate.criterion.Restrictions;",
    "import org.quartz.Job;",
    "import org.quartz.JobExecutionContext;",
    "import org.quartz.JobExecutionException;"
  ],
  "fields": [
    "private static Logger logger = Logger.getLogger( SupplyMailJob.class );",
    "private String to = \"terra@dcc.ufmg.br\";",
    "private String from = \"terra@dcc.ufmg.br\";",
    "private String host = \"smtp.dcc.ufmg.br\";"
  ],
  "superClasses": [],
  "implementedTypes": [
    "Job"
  ],
  "methodSigs": {
    "execute(JobExecutionContext)": "0"
  },
  "methodsBrief": [
    "public void execute( JobExecutionContext context )\r\n\t\t\tthrows JobExecutionException{}"
  ],
  "constructorSigs": [],
  "constructorBrief": [],
  "getterSetterSigs": [],
  "getterSetterBrief": [],
  "constructorDeps": {},
  "compilationUnitCode": "package classes;\n\nimport java.util.Date;\nimport java.util.List;\nimport java.util.Properties;\nimport javax.mail.Message;\nimport javax.mail.MessagingException;\nimport javax.mail.Transport;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeMessage;\nimport org.apache.log4j.Logger;\nimport org.hibernate.Criteria;\nimport org.hibernate.Transaction;\nimport org.hibernate.criterion.Restrictions;\nimport org.quartz.Job;\nimport org.quartz.JobExecutionContext;\nimport org.quartz.JobExecutionException;\n\npublic class SupplyMailJob implements Job {\n\n    // f:log\n    private static Logger logger = Logger.getLogger(SupplyMailJob.class);\n\n    private String to = \"terra@dcc.ufmg.br\";\n\n    private String from = \"terra@dcc.ufmg.br\";\n\n    private String host = \"smtp.dcc.ufmg.br\";\n\n    public void execute(JobExecutionContext context) throws JobExecutionException {\n        // f:log\n        logger.info(\"Starting execute() in job\");\n        // f:hibernate\n        org.hibernate.Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        Criteria criteria = sess.createCriteria(Product.class);\n        // f:hibernate\n        criteria.add(Restrictions.lt(\"supply\", 5));\n        @SuppressWarnings(\"unchecked\")\n        List<Product> // f:hibernate\n        l = (List<Product>) criteria.list();\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        if (!l.isEmpty()) {\n            StringBuilder str = new StringBuilder();\n            str.append(\"The following products are getting over:\\n\");\n            // f:mail\n            Properties props = new Properties();\n            // f:mail\n            props.setProperty(\"mail.smtp.submitter\", \"terra\");\n            // f:mail\n            props.setProperty(\"mail.smtp.auth\", \"false\");\n            // f:mail\n            props.setProperty(\"mail.smtp.host\", this.host);\n            // f:mail\n            props.setProperty(\"mail.smtp.port\", \"25\");\n            // f:mail\n            javax.mail.Session session = javax.mail.Session.getInstance(props);\n            try {\n                // f:mail\n                // f:mail\n                Message msg = new MimeMessage(session);\n                // f:mail\n                msg.setFrom(new InternetAddress(this.from));\n                // f:mail\n                InternetAddress[] address = { new InternetAddress(this.to) };\n                // f:mail\n                msg.setRecipients(Message.RecipientType.TO, address);\n                // f:mail\n                msg.setSubject(\"Low Supply of Products\");\n                // f:mail\n                msg.setSentDate(new Date());\n                // f:mail\n                msg.setText(str.toString());\n                // f:mail\n                Transport.send(msg);\n            } catch (MessagingException mex) {\n                mex.printStackTrace();\n            }\n            for (Product p : l) {\n                str.append(p.getName() + \"\\t\\t\" + p.getSupply() + \"\\n\");\n            }\n        }\n        // f:log\n        logger.info(\"Finishing execute() in job\");\n    }\n}\n",
  "classDeclarationCode": "public class SupplyMailJob implements Job {\n\n    // f:log\n    private static Logger logger = Logger.getLogger(SupplyMailJob.class);\n\n    private String to = \"terra@dcc.ufmg.br\";\n\n    private String from = \"terra@dcc.ufmg.br\";\n\n    private String host = \"smtp.dcc.ufmg.br\";\n\n    public void execute(JobExecutionContext context) throws JobExecutionException {\n        // f:log\n        logger.info(\"Starting execute() in job\");\n        // f:hibernate\n        org.hibernate.Session sess = HibernateUtil.getSessionFactory().openSession();\n        // f:hibernate\n        Transaction t = sess.beginTransaction();\n        // f:hibernate\n        Criteria criteria = sess.createCriteria(Product.class);\n        // f:hibernate\n        criteria.add(Restrictions.lt(\"supply\", 5));\n        @SuppressWarnings(\"unchecked\")\n        List<Product> // f:hibernate\n        l = (List<Product>) criteria.list();\n        // f:hibernate\n        t.commit();\n        // f:hibernate\n        sess.close();\n        if (!l.isEmpty()) {\n            StringBuilder str = new StringBuilder();\n            str.append(\"The following products are getting over:\\n\");\n            // f:mail\n            Properties props = new Properties();\n            // f:mail\n            props.setProperty(\"mail.smtp.submitter\", \"terra\");\n            // f:mail\n            props.setProperty(\"mail.smtp.auth\", \"false\");\n            // f:mail\n            props.setProperty(\"mail.smtp.host\", this.host);\n            // f:mail\n            props.setProperty(\"mail.smtp.port\", \"25\");\n            // f:mail\n            javax.mail.Session session = javax.mail.Session.getInstance(props);\n            try {\n                // f:mail\n                // f:mail\n                Message msg = new MimeMessage(session);\n                // f:mail\n                msg.setFrom(new InternetAddress(this.from));\n                // f:mail\n                InternetAddress[] address = { new InternetAddress(this.to) };\n                // f:mail\n                msg.setRecipients(Message.RecipientType.TO, address);\n                // f:mail\n                msg.setSubject(\"Low Supply of Products\");\n                // f:mail\n                msg.setSentDate(new Date());\n                // f:mail\n                msg.setText(str.toString());\n                // f:mail\n                Transport.send(msg);\n            } catch (MessagingException mex) {\n                mex.printStackTrace();\n            }\n            for (Product p : l) {\n                str.append(p.getName() + \"\\t\\t\" + p.getSupply() + \"\\n\");\n            }\n        }\n        // f:log\n        logger.info(\"Finishing execute() in job\");\n    }\n}",
  "subClasses": []
}